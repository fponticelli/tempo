{"version":3,"sources":["../../src/impl/set_attribute.ts","../../src/impl/attributes_mapper.ts","../../src/impl/dom.ts","../src/context.ts","../../src/impl/text.ts","../src/objects.ts","../../src/impl/dom_builder.ts","../src/value.ts","../src/maybe.ts","../src/arrays.ts","../src/equals.ts","../../src/impl/component.ts","../src/lifecycle.ts","../../src/impl/element.ts","../../src/impl/map_state.ts","../../src/impl/fragment.ts","../../src/impl/map_action.ts","../../src/impl/map_query.ts","../../src/impl/until.ts","../../src/impl/simple_component.ts","../../src/impl/portal.ts","../../src/impl/lazy.ts","../../src/impl/match_bool_template.ts","../src/html.ts","../../src/impl/hold_state.ts","../../src/impl/adapter.ts","../../src/impl/svg_builder.ts","../../src/impl/html_builder.ts","../../src/impl/match_template.ts","../../src/impl/match_value_template.ts","../../src/impl/html.ts","../src/tempo.ts","../../src/core/result.ts","../../src/core/decoder.ts","../../src/error/custom_error.ts","../../src/error/entity.ts","../../src/utils/index.ts","../../src/error/expected_any_of.ts","../../src/error/expected_at_least.ts","../../src/error/expected_eoi.ts","../../src/error/expected_field.ts","../../src/error/expected_match.ts","../../src/error/expected_none_of.ts","../../src/error/expected_once.ts","../../src/error/expected_within_range.ts","../../src/error/pattern_mismatch.ts","../../src/error/unexpected_eoi.ts","../../src/error/index.ts","../../src/text/index.ts","../src/match.ts","route.ts","action.ts","templates/link_route.ts","../../src/impl/svg.ts","../src/svg.ts","templates/header.ts","../../src/lifecycle/unsafe_html.ts","templates/comments.ts","templates/pagination.ts","templates/page_feed.ts","templates/article.ts","templates/notification.ts","http_error.ts","templates/error.ts","templates/loading.ts","templates/not_found.ts","templates/profile.ts","templates/page.ts","templates/app.ts","state.ts","../src/reducer.ts","../src/option.ts","../src/result.ts","reducer.ts","../src/purify.js","../src/utils.js","../src/tags.js","../src/attrs.js","../src/regexp.js","../node_modules/@ts-stack/markdown/dist/extend-regexp.js","../node_modules/@ts-stack/markdown/dist/helpers.js","../node_modules/@ts-stack/markdown/dist/interfaces.js","../node_modules/@ts-stack/markdown/dist/renderer.js","../node_modules/@ts-stack/markdown/dist/inline-lexer.js","../node_modules/@ts-stack/markdown/dist/parser.js","../node_modules/@ts-stack/markdown/dist/marked.js","../node_modules/@ts-stack/markdown/dist/block-lexer.js","../node_modules/@ts-stack/markdown/dist/index.js","../../src/value/index.ts","decoders.ts","request.ts","config.ts","middleware.ts","main.ts"],"names":["hasOwnProperty","Object","setPrototypeOf","isFrozen","objectKeys","keys","freeze","seal","Reflect","apply","construct","fun","thisValue","args","x","Func","arrayForEach","unapply","Array","prototype","forEach","arrayIndexOf","indexOf","arrayJoin","join","arrayPop","pop","arrayPush","push","arraySlice","slice","stringToLowerCase","String","toLowerCase","stringMatch","match","stringReplace","replace","stringIndexOf","stringTrim","trim","regExpTest","RegExp","test","regExpCreate","unconstruct","typeErrorCreate","TypeError","func","thisArg","addToSet","set","array","l","length","element","lcElement","clone","object","newObject","property","html","svg","svgFilters","mathMl","text","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","getGlobal","window","_createTrustedTypesPolicy","trustedTypes","document","createPolicy","suffix","currentScript","hasAttribute","getAttribute","policyName","_","warn","createDOMPurify","DOMPurify","root","version","VERSION","removed","nodeType","isSupported","originalDocument","removeTitle","DocumentFragment","HTMLTemplateElement","Node","NodeFilter","NamedNodeMap","MozNamedAttrMap","Text","Comment","DOMParser","template","createElement","content","ownerDocument","trustedTypesPolicy","emptyHTML","createHTML","implementation","createNodeIterator","getElementsByTagName","createDocumentFragment","importNode","hooks","createHTMLDocument","documentMode","EXPRESSIONS","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","ATTRS","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_JQUERY","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_DOM_IMPORT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","CONFIG","formElement","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","_forceRemove","node","parentNode","removeChild","outerHTML","_removeAttribute","name","getAttributeNode","removeAttribute","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","parseFromString","documentElement","body","firstElementChild","insertBefore","createTextNode","childNodes","call","querySelector","innerHTML","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","FILTER_ACCEPT","_isNode","nodeName","_executeHook","entryPoint","currentNode","data","hook","_sanitizeElements","elm","_isClobbered","textContent","attributes","setAttribute","namespaceURI","tagName","querySelectorAll","insertAdjacentHTML","htmlToInsert","cloneNode","_isValidAttribute","lcTag","lcName","value","_sanitizeAttributes","attr","idAttr","hookEvent","attrName","attrValue","keepAttr","forceKeepAttr","undefined","id","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","oldNode","returnNode","toString","toStaticHTML","appendChild","firstChild","nodeIterator","serializedHTML","setConfig","clearConfig","isValidAttribute","tag","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","ExtendRegexp","constructor","regex","flags","source","setGroup","groupName","groupRegexp","newRegexp","getRegexp","escapeTest","escapeReplace","replacements","escapeTestNoEncode","escapeReplaceNoEncode","escape","encode","ch","unescape","n","charAt","fromCharCode","parseInt","substring","TokenType","MarkedOptions","gfm","tables","breaks","pedantic","mangle","smartLists","silent","langPrefix","smartypants","headerPrefix","xhtml","Renderer","options","Marked","code","lang","escaped","highlight","out","blockquote","quote","heading","level","raw","hr","list","ordered","type","listitem","paragraph","header","tablerow","tablecell","align","strong","em","codespan","br","del","link","href","title","prot","decodeURIComponent","e","image","InlineLexer","staticThis","links","renderer","Error","setRules","output","src","inlineLexer","getRulesBase","rulesBase","base","autolink","reflink","nolink","_inside","_href","getRulesPedantic","rulesPedantic","getRulesGfm","rulesGfm","url","getRulesBreaks","rulesBreaks","inline","rules","hasRulesGfm","nextPart","execArr","exec","inLink","sanitizer","outputLink","keyLink","charCodeAt","i","str","Math","random","Parser","simpleRenderers","line","tokens","token","parse","parser","reverse","next","tok","debug","outToken","split","getNextElement","parseText","nextElement","space","isNoP","depth","listStart","listEnd","listItemStart","listItemEnd","looseItemStart","cell","row","cells","j","blockquoteStart","blockquoteEnd","pre","errMsg","console","log","setOptions","assign","setBlockRule","regexp","simpleRules","callBlockLexer","callParser","callMe","origin","result","map","BlockLexer","lex","err","message","top","isBlockQuote","lexer","getTokens","newline","lheading","def","bullet","item","fences","group1","group2","getRulesTable","rulesTables","nptable","hasRulesTables","mainLoop","td","bull","blockBullet","loose","isPre"],"mappings":"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C,IAAcD,IAEXpD,EAASiD,KACNC,EAAAA,GAAKG,GAGHA,EAAAA,GAIVD,EAAAA,IAAW,EAGVJ,OAAAA,EAIF,SAASM,EAAMC,GACdC,IAAAA,EAAY,GAEdC,OAAJ,EACKA,IAAAA,KAAYF,EACXjD,EAAMT,EAAgB0D,EAAQ,CAACE,MACvBA,EAAAA,GAAYF,EAAOE,IAI1BD,OAAAA,EC9FF,IAAME,EAAOvD,EAAO,CACzB,IACA,OACA,UACA,UACA,OACA,UACA,QACA,QACA,IACA,MACA,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,QAIWwD,EAAMxD,EAAO,CACxB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,QACA,SACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,QACA,OACA,UAGWyD,EAAazD,EAAO,CAC/B,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,iBAGW0D,EAAS1D,EAAO,CAC3B,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,eAGW2D,EAAO3D,EAAO,CAAC,UCnOfuD,EAAOvD,EAAO,CACzB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,UAGWwD,EAAMxD,EAAO,CACxB,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,WACA,UACA,UACA,YACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,eAGW0D,EAAS1D,EAAO,CAC3B,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,UAGW4D,EAAM5D,EAAO,CACxB,aACA,SACA,cACA,YACA,gBChWW6D,EAAgB5D,EAAK,6BACrB6D,EAAW7D,EAAK,yBAChB8D,EAAY9D,EAAK,8BACjB+D,EAAY/D,EAAK,kBACjBgE,EAAiBhE,EAC5B,yFAEWiE,EAAoBjE,EAAK,yBACzBkE,EAAkBlE,EAC7B,+DJ8uCF,EAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EA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","file":"main.93c6dcef.js","sourceRoot":"../src","sourcesContent":["/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nexport function setAttribute(\n  el: Element,\n  name: string,\n  value: string | undefined\n) {\n  if (value == null || value === '') {\n    el.removeAttribute(name)\n  } else {\n    el.setAttribute(name, value)\n  }\n}\n\nexport function setNumberProperty(\n  el: Element,\n  name: string,\n  value: string | undefined\n) {\n  const anyEl = el as any\n  if (value == null) {\n    anyEl[name] = null\n  } else {\n    anyEl[name] = Number(value)\n  }\n}\n\nexport function setProperty(\n  el: Element,\n  name: string,\n  value: string | undefined\n) {\n  const anyEl = el as any\n  if (value == null) {\n    anyEl[name] = null\n  } else {\n    anyEl[name] = value\n  }\n}\n\nexport function setBoolProperty(\n  el: Element,\n  name: string,\n  value: string | undefined\n) {\n  const anyEl = el as any\n  if (value == null) {\n    anyEl[name] = null\n  } else {\n    anyEl[name] = value === name\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport {\n  setBoolProperty,\n  setNumberProperty,\n  setProperty\n} from './set_attribute'\n\nexport const attributeNameMap: Record<string, string> = {\n  acceptcharset: 'accept-charset',\n  acceptCharset: 'accept-charset',\n  asattr: 'as',\n  asAttr: 'as',\n  classname: 'class',\n  className: 'class',\n  httpequiv: 'http-equiv',\n  httpEquiv: 'http-equiv',\n  htmlfor: 'for',\n  htmlFor: 'for'\n}\n\nexport const htmlAttributeMap: Record<\n  string,\n  (el: Element, name: string, value: any) => void\n> = {\n  // html\n  checked: setBoolProperty,\n  multiple: setBoolProperty,\n  muted: setBoolProperty,\n  selected: setBoolProperty,\n  value: setProperty,\n\n  // svg\n  useCurrentView: setBoolProperty,\n  currentView: setProperty,\n  currentScale: setNumberProperty\n\n  // 'accept-charset': setSpaceSeparated,\n  // acceptcharset: setSpaceSeparated,\n  // async: setBoolAttribute,\n  // autofocus: setBoolAttribute,\n  // autoplay: setBoolAttribute,\n  // class: setSpaceSeparated,\n  // contenteditable: setEnumBoolAttribute,\n  // controls: setBoolAttribute,\n  // default: setBoolAttribute,\n  // defer: setBoolAttribute,\n  // disabled: setBoolAttribute,\n  // draggable: setEnumBoolAttribute,\n  // formnovalidate: setBoolAttribute,\n  // headers: setSpaceSeparated,\n  // hidden: setBoolAttribute,\n  // ismap: setBoolAttribute,\n  // itemscope: setBoolAttribute,\n  // loop: setBoolAttribute,\n  // nomodule: setBoolAttribute,\n  // novalidate: setBoolAttribute,\n  // open: setBoolAttribute,\n  // ping: setSpaceSeparated,\n  // playsinline: setBoolAttribute,\n  // readonly: setBoolAttribute,\n  // rel: setSpaceSeparated,\n  // required: setBoolAttribute,\n  // reversed: setBoolAttribute,\n  // sizes: setCommaSeparated,\n  // srcset: setCommaSeparated,\n  // style: setStyleAttribute,\n  // typemustmatch: setBoolAttribute,\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { htmlAttributeMap as attributeMap } from './attributes_mapper'\nimport { setAttribute } from './set_attribute'\n\nexport function removeNode(node: Node) {\n  const el = node as HTMLElement\n  if (el && el.onblur) {\n    el.onblur = null\n  }\n  if (!node || node.ownerDocument === undefined) return\n  if (node.parentElement) {\n    node.parentElement.removeChild(node)\n  }\n}\n\nexport function insertFBefore(ref: Node) {\n  return function (node: Node) {\n    if (ref.parentElement != null) {\n      ref.parentElement.insertBefore(node, ref)\n    }\n  }\n}\n\nexport function makeCreateElement(name: string) {\n  return (doc: Document) => (doc.createElement(name) as any) as HTMLElement\n}\n\nexport function makeCreateElementNS(namespace: string, name: string) {\n  return (doc: Document) => doc.createElementNS(namespace, name) as HTMLElement // TODO\n}\n\nexport type Acc<State> = ((state: State) => void)[]\n\nexport function setElAttribute(\n  el: HTMLElement,\n  name: string,\n  value: string | undefined\n) {\n  if (attributeMap[name] !== undefined) {\n    attributeMap[name](el, name, value)\n  } else {\n    setAttribute(el, name, value)\n  }\n  // let set = attributeMap[name] || setAttribute\n  // set(el, name, value)\n}\n\nexport function setElStyle(\n  el: HTMLElement,\n  name: string,\n  value: string | undefined\n) {\n  if (value == null) {\n    el.style.removeProperty(name)\n  } else {\n    el.style.setProperty(name, value)\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { insertFBefore as makeInsertBefore } from './impl/dom'\n\nexport class DOMContext<Action> {\n  static fromElement<Action>(\n    element: Element,\n    dispatch: (action: Action) => void\n  ): DOMContext<Action> {\n    return new DOMContext<Action>(\n      element.ownerDocument || (window && window.document),\n      (node: Node) => element.appendChild(node),\n      dispatch\n    )\n  }\n\n  constructor(\n    readonly doc: Document,\n    readonly append: (node: Node) => void,\n    readonly dispatch: (action: Action) => void\n  ) {}\n\n  mapAction<OtherAction>(f: (action: OtherAction) => Action) {\n    return new DOMContext<OtherAction>(\n      this.doc,\n      this.append,\n      (action: OtherAction) => this.dispatch(f(action))\n    )\n  }\n\n  conditionalMapAction<OtherAction>(\n    f: (action: OtherAction) => Action | undefined\n  ) {\n    return new DOMContext<OtherAction>(\n      this.doc,\n      this.append,\n      (action: OtherAction) => {\n        const newAction = f(action)\n        if (newAction !== undefined) {\n          this.dispatch(newAction)\n        }\n      }\n    )\n  }\n\n  withAppendToReference() {\n    const ref = this.doc.createTextNode('')\n    this.append(ref)\n    return {\n      ctx: this.withAppend(makeInsertBefore(ref)),\n      ref\n    }\n  }\n\n  withAppend(append: (node: Node) => void) {\n    return new DOMContext<Action>(this.doc, append, this.dispatch)\n  }\n\n  withDispatch<OtherAction>(dispatch: (action: OtherAction) => void) {\n    return new DOMContext<OtherAction>(this.doc, this.append, dispatch)\n  }\n\n  withInterceptDispatch(dispatch: (action: Action) => void) {\n    return new DOMContext<Action>(this.doc, this.append, (action: Action) => {\n      dispatch(action)\n      this.dispatch(action)\n    })\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { DerivedValue } from 'tempo-core/lib/value'\nimport { removeNode } from './dom'\nimport { DOMTemplate } from '../template'\nimport { DOMContext } from '../context'\nimport { TextValue } from '../value'\n\nclass DerivedTextTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  constructor(readonly makeContent: DerivedValue<State, string>) {}\n\n  render(ctx: DOMContext<Action>, state: State): View<State, Query> {\n    const { makeContent } = this\n    let content = makeContent(state) || ''\n    const node = ctx.doc.createTextNode(content)\n    ctx.append(node)\n    return {\n      change(state: State) {\n        const newContent = makeContent(state) || ''\n        if (newContent !== content) {\n          node.nodeValue = newContent\n          if (newContent.length < 5000) content = newContent\n        }\n      },\n      destroy() {\n        removeNode(node)\n      },\n      request(_: Query) {}\n    }\n  }\n}\n\nclass LiteralTextTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  constructor(readonly content: string) {}\n  render(ctx: DOMContext<Action>, _: State): View<State, Query> {\n    const node = ctx.doc.createTextNode(this.content)\n    ctx.append(node)\n    return {\n      change(_: State) {},\n      destroy() {\n        removeNode(node)\n      },\n      request(_: Query) {}\n    }\n  }\n}\n\nexport function text<State, Action, Query = unknown>(\n  content: TextValue<State>\n): DOMTemplate<State, Action, Query> {\n  if (typeof content === 'function') {\n    return new DerivedTextTemplate<State, Action, Query>(\n      content as DerivedValue<State, string>\n    )\n  } else {\n    return new LiteralTextTemplate<State, Action, Query>(content || '')\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { TupleToUnion } from './types/tuples'\nimport { Merge } from './types/objects'\n\nexport function keys<T>(object: T): (keyof T)[] {\n  return (Object.keys(object) as any) as (keyof T)[]\n}\n\nexport function removeFields<T, F extends (keyof T)[]>(\n  ob: T,\n  ...fields: F\n): Omit<T, TupleToUnion<F>> {\n  return keys(ob).reduce((acc: any, key) => {\n    if (fields.indexOf(key) < 0) acc[key] = ob[key]\n    return acc\n  }, {} as any) as Omit<T, TupleToUnion<F>>\n}\n\nexport function merge<A extends {}, B extends {}>(a: A, b: B): Merge<A, B> {\n  return Object.assign({}, a, b) as Merge<A, B>\n}\n","import { DOMTemplate, DOMChild } from '../template'\nimport { text } from './text'\nimport { DerivedOrLiteralValue, DerivedValue } from 'tempo-core/lib/value'\nimport { keys } from 'tempo-std/lib/objects'\n\nexport type ListOrRecordValue<T extends string> = T | T[] | Record<T, boolean>\nexport type ListValue<T> = T | T[]\n\nexport interface IBuilder<State, Action, Query> {\n  build(): DOMTemplate<State, Action, Query>\n}\n\nexport function childOrBuilderToTemplate<State, Action, Query>(\n  src: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n): DOMTemplate<State, Action, Query> {\n  if (src === undefined) {\n    return text('')\n  } else if (typeof (src as any).build === 'function') {\n    return (src as IBuilder<State, Action, Query>).build()\n  } else if (typeof src === 'string' || typeof src === 'function') {\n    return text(src)\n  } else {\n    return src as DOMTemplate<State, Action, Query>\n  }\n}\n\nexport function extractLiterals<State>(\n  record: Record<string, DerivedOrLiteralValue<State, string>>\n) {\n  return keys(record).reduce((list, name) => {\n    if (typeof record[name] === 'string') {\n      list.push({ name, value: record[name] as string })\n    }\n    return list\n  }, [] as { name: string; value: string }[])\n}\n\nexport function extractDerived<State>(\n  record: Record<string, DerivedOrLiteralValue<State, string>>\n) {\n  return keys(record).reduce((list, name) => {\n    if (typeof record[name] === 'function') {\n      list.push({\n        name,\n        resolve: record[name] as DerivedValue<State, string>\n      })\n    }\n    return list\n  }, [] as { name: string; resolve: DerivedValue<State, string> }[])\n}\nexport function listOrRecordToString(\n  src: ListOrRecordValue<string>,\n  separator: string\n) {\n  if (typeof src === 'string') {\n    return src\n  } else if (src == null) {\n    return undefined\n  } else if (Array.isArray(src)) {\n    return src.join(separator)\n  } else {\n    return keys(src)\n      .reduce((list, key) => {\n        if (src[key]) list.push(key)\n        return list\n      }, [] as string[])\n      .join(separator)\n  }\n}\n\nexport function numbersListToString(src: ListValue<number>) {\n  src = Array.isArray(src) ? src : [src]\n  return src.join(' ')\n}\n\nexport function numberPairsListToString(src: [number, number][]) {\n  return src.map(([a, b]) => `${a},${b}`).join(' ')\n}\n\nexport function listOrRecordToSpaceSeparated(src: ListOrRecordValue<string>) {\n  return listOrRecordToString(src, ' ')\n}\n\nexport function lostOrRecordToCommaSeparated(src: ListOrRecordValue<string>) {\n  return listOrRecordToString(src, ', ')\n}\n\nexport function stylesToString(src: string | Record<string, string>) {\n  if (typeof src === 'string') {\n    return src\n  } else {\n    return keys(src)\n      .reduce((list, key) => {\n        if (src[key]) list.push(`${key}: ${src[key]};`)\n        return list\n      }, [] as string[])\n      .join(' ')\n  }\n}\n\nexport function booleanToString(src: boolean) {\n  return `${src}`\n}\n\nexport function toggleToString(name: string) {\n  return (src: boolean) => (src ? name : '')\n}\n\nexport class DOMBuilder<State, Action, Query> {\n  protected _children: DOMTemplate<State, Action, Query>[] = []\n  // children\n  Append(\n    el: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  ): this {\n    this._children.push(childOrBuilderToTemplate(el))\n    return this\n  }\n  AppendMany(\n    ...els: (DOMChild<State, Action, Query> | IBuilder<State, Action, Query>)[]\n  ): this {\n    this._children.push(...els.map(childOrBuilderToTemplate))\n    return this\n  }\n\n  // transform\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { keys } from 'tempo-std/lib/objects'\nimport { DerivedOrLiteralValue, DerivedValue } from 'tempo-core/lib/value'\n\nexport type Attribute<State, Value> =\n  | DerivedOrLiteralValue<State, Value | undefined>\n  | undefined\nexport type TextValue<S> = Attribute<S, string>\nexport type EventHandler<S, Action> = (\n  state: S,\n  event: Event,\n  element: Element\n) => Action | undefined\nexport type EventHandlerTE<S, Action, Ev extends Event, El extends Element> = (\n  state: S,\n  event: Ev,\n  element: El\n) => Action | undefined\nexport type StyleAttribute<State, Value> = DerivedOrLiteralValue<\n  State,\n  Value | undefined\n>\n\nexport type ValueOfAttribute<\n  Att extends Attribute<any, any>\n> = Att extends Attribute<any, infer Value> ? Value : never\n\nexport function applyAttributes<State, A, B, C>(\n  attrA: Attribute<State, A>,\n  attrB: Attribute<State, B>,\n  apply: (a: A, b: B) => C\n): Attribute<State, C> {\n  if (attrA === undefined) return undefined\n  if (attrB === undefined) return undefined\n  if (typeof attrA === 'function' && typeof attrB === 'function') {\n    return (state: State) => {\n      const resA = (attrA as DerivedValue<State, A>)(state)\n      const resB = (attrB as DerivedValue<State, B>)(state)\n      if (resA !== undefined && resB !== undefined) return apply(resA, resB)\n      else return undefined\n    }\n  } else if (typeof attrA === 'function') {\n    return (state: State) => {\n      const resA = (attrA as DerivedValue<State, A>)(state)\n      if (resA !== undefined) return apply(resA, attrB as B)\n      else return undefined\n    }\n  } else if (typeof attrB === 'function') {\n    return (state: State) => {\n      const resB = (attrB as DerivedValue<State, B>)(state)\n      if (resB !== undefined) return apply(attrA as A, resB)\n      else return undefined\n    }\n  } else {\n    return apply(attrA, attrB)\n  }\n}\n\nexport function mapAttribute<State, A, B>(\n  attr: Attribute<State, A>,\n  map: (a: A) => B\n): Attribute<State, B> {\n  if (attr === undefined) {\n    return undefined\n  } else if (typeof attr === 'function') {\n    return (state: State) => {\n      const res = (attr as DerivedValue<State, A>)(state)\n      if (res !== undefined) return map(res)\n      else return undefined\n    }\n  } else {\n    return map(attr)\n  }\n}\n\nexport function mapAttributeOrElse<State, A, B>(\n  attr: Attribute<State, A>,\n  map: (a: A) => B,\n  alt: B\n): Attribute<State, B> {\n  if (attr === undefined) {\n    return alt\n  } else if (typeof attr === 'function') {\n    return (state: State) => {\n      const res = (attr as DerivedValue<State, A>)(state)\n      if (res !== undefined) return map(res)\n      else return alt\n    }\n  } else {\n    return map(attr)\n  }\n}\n\nexport function mapAttributes<\n  State,\n  T extends { [_ in string]: Attribute<State, any> },\n  B\n>(\n  attributes: T,\n  map: (values: { [K in keyof T]?: ValueOfAttribute<T[K]> }) => B\n): Attribute<State, B> {\n  const ks = keys(attributes)\n  const isDynamic = ks.some(k => typeof attributes[k] === 'function')\n  if (isDynamic) {\n    return (state: State) => {\n      const o = ks.reduce((acc: T, k: keyof T) => {\n        acc[k] = resolveAttribute(attributes[k])(state) as T[typeof k]\n        return acc\n      }, {} as T)\n      return map(o)\n    }\n  } else {\n    return map(attributes as T)\n  }\n}\n\nexport function attributeToHandler<State, Value, Action>(\n  attr: Attribute<State, Value>,\n  handler: EventHandler<Value, Action>\n): EventHandler<State, Action> | undefined {\n  if (attr === undefined || handler === undefined) {\n    return () => {\n      return undefined\n    }\n  } else if (typeof attr === 'function') {\n    return (state: State, event: Event, element: Element) => {\n      const res = (attr as DerivedValue<State, Value>)(state)\n      if (res !== undefined) return handler(res, event, element)\n      else return undefined\n    }\n  } else {\n    return (_: State, event: Event, element: Element) => {\n      return handler(attr, event, element)\n    }\n  }\n}\n\nexport function resolveAttribute<State, Value>(attr: Attribute<State, Value>) {\n  if (typeof attr === 'function') {\n    return attr as DerivedValue<State, Value>\n  } else {\n    return (_: State): Value | undefined => attr\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nexport type Maybe<T> = Just<T> | Nothing\n\nexport type Nothing = undefined | null\nexport type Just<T> = T\n\nexport const nothing: Maybe<never> = undefined\nexport function just<T>(value: T): Maybe<T> {\n  return value\n}\n\nexport function isNothing<T>(maybe: Maybe<T>): maybe is Nothing {\n  return maybe == null\n}\nexport function isJust<T>(maybe: Maybe<T>): maybe is Just<T> {\n  return maybe != null\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\n/**\n * Utility functions to manipulate `Array` values.\n */\n\nimport { Maybe, nothing } from './maybe'\nimport { Ordering, Compare } from './ord'\nimport { Primitive } from './primitive'\nimport { keys } from './objects'\n\nexport function map<A, B>(arr: A[], f: (a: A) => B): B[] {\n  const length = arr.length\n  const buff = new Array(length)\n  for (let i = 0; i < length; i++) {\n    buff[i] = f(arr[i])\n  }\n  return buff\n}\n\nexport function flatMap<A, B>(arr: A[], f: (a: A) => B[]): B[] {\n  const buff = new Array()\n  for (const el of arr) {\n    buff.push(...f(el))\n  }\n  return buff\n}\n\nexport function head<A>(arr: A[]): Maybe<A> {\n  return arr.length > 0 ? arr[0] : nothing\n}\n\nexport function tail<A>(arr: A[]): A[] {\n  return arr.slice(1)\n}\n\nexport function equals<T>(\n  a: T[],\n  b: T[],\n  predicate: (a: T, b: T) => boolean\n): boolean {\n  if (a.length !== b.length) return false\n  else {\n    for (let i = 0; i < a.length; i++) {\n      if (!predicate(a[i], b[i])) return false\n    }\n    return true\n  }\n}\n\nexport function makeEquals<T>(predicate: (a: T, b: T) => boolean) {\n  return function (a: T[], b: T[]) {\n    return equals(a, b, predicate)\n  }\n}\n\nexport function isEmpty<T>(arr: T[]): arr is [] {\n  return arr.length === 0\n}\n\nexport function hasValues<T>(arr: T[]): arr is [T, ...T[]] {\n  return arr.length > 0\n}\n\nexport function filter<T>(arr: T[], predicate: (v: T) => boolean): T[] {\n  const buff = [] as T[]\n  for (const a of arr) if (predicate(a)) buff.push(a)\n  return buff\n}\n\nexport function flatten<T>(arr: T[][]): T[] {\n  return ([] as T[]).concat(...arr)\n}\n\nexport function foldLeft<T, B>(arr: T[], f: (acc: B, curr: T) => B, b: B): B {\n  for (const a of arr) {\n    b = f(b, a)\n  }\n  return b\n}\n\nexport function all<T>(arr: T[], predicate: (v: T) => boolean): boolean {\n  for (const a of arr) {\n    if (!predicate(a)) {\n      return false\n    }\n  }\n  return true\n}\n\nexport function any<T>(arr: T[], predicate: (v: T) => boolean): boolean {\n  for (const a of arr) {\n    if (predicate(a)) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function each<T>(arr: T[], f: (v: T) => void): void {\n  for (const a of arr) f(a)\n}\n\nexport function concat<A>(...arrs: A[][]): A[] {\n  return ([] as A[]).concat(...arrs)\n}\n\nexport function makeCompare<A>(comparef: Compare<A>, shorterFirst = true) {\n  return function (a: A[], b: A[]) {\n    if (a.length < b.length) {\n      return -1 * (shorterFirst ? 1 : -1)\n    } else if (a.length > b.length) {\n      return 1 * (shorterFirst ? 1 : -1)\n    }\n    for (let i = 0; i < a.length; i++) {\n      const ord = comparef(a[i], b[i])\n      if (ord !== 0) return ord\n    }\n    return 0\n  }\n}\n\nexport function sort<A>(compare: (a: A, b: A) => Ordering, arr: A[]): A[] {\n  return arr.slice().sort(compare)\n}\n\nexport function range<A>(length: number, f: (index: number) => A): A[] {\n  const buff = new Array(length) as A[]\n  for (let i = 0; i < length; i++) buff[i] = f(i)\n  return buff\n}\n\nexport function numbersRange(length: number, startAt = 0) {\n  return range(length, i => startAt + i)\n}\n\nexport function fill<A>(length: number, value: A): A[] {\n  return range(length, () => value)\n}\n\nexport function distinctPrimitive<T extends Primitive>(values: T[]): T[] {\n  return Array.from(new Set(values))\n}\n\nexport function distinctByPredicate<T>(\n  values: T[],\n  predicate: (a: T) => string\n): T[] {\n  const map = {} as Record<string, T>\n  values.forEach(v => {\n    map[predicate(v)] = v\n  })\n  return keys(map).map(k => map[k])\n}\n\nexport function remove<A>(\n  arr: A[],\n  item: A,\n  predicate?: (a: A) => boolean\n): boolean {\n  let index\n  if (predicate !== undefined) {\n    index = arr.findIndex(predicate)\n  } else {\n    index = arr.indexOf(item)\n  }\n  if (index < 0) {\n    return false\n  } else {\n    arr.splice(index, 1)\n    return true\n  }\n}\n\nexport function ofIterableIterator<A>(it: IterableIterator<A>): A[] {\n  const buff = [] as A[]\n  for (let r = it.next(); !r.done; r = it.next()) {\n    buff.push(r.value)\n  }\n  return buff\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nexport function strictEqual<A>(a: A, b: A): boolean {\n  return a === b || (a !== a && b !== b)\n}\n\nexport function deepEqual<A>(a: A, b: A): boolean {\n  if (strictEqual(a, b)) return true\n  if (a == null || b == null) return false\n  const aIsArr = Array.isArray(a)\n  const bIsArr = Array.isArray(b)\n\n  if (aIsArr !== bIsArr) return false\n  if (aIsArr) {\n    const aArr: never[] = a as any\n    const bArr: never[] = b as any\n    const aLength = aArr.length\n    if (aLength !== bArr.length) return false\n    for (let i = 0; i < aLength; i++) {\n      if (!deepEqual(aArr[i], bArr[i])) return false\n    }\n    return true\n  }\n\n  const aIsDate = a instanceof Date\n  const bIsDate = b instanceof Date\n  if (aIsDate !== bIsDate) return false\n  if (aIsDate) {\n    const aDate: Date = a as never\n    const bDate: Date = b as never\n    return +aDate === +bDate\n  }\n\n  const aIsSet = a instanceof Set\n  const bIsSet = b instanceof Set\n  if (aIsSet !== bIsSet) return false\n  if (aIsSet) {\n    const aSet: Set<any> = a as never\n    const bSet: Set<any> = b as never\n    if (aSet.size !== bSet.size) return false\n    const it = aSet.keys()\n    while (true) {\n      const curr = it.next()\n      if (curr.done) break\n      if (!bSet.has(curr.value)) return false\n    }\n    return true\n  }\n\n  const aIsMap = a instanceof Map\n  const bIsMap = b instanceof Map\n  if (aIsMap !== bIsMap) return false\n  if (aIsMap) {\n    const aMap: Map<any, any> = a as never\n    const bMap: Map<any, any> = b as never\n    const aMapLength = aMap.size\n    if (aMapLength !== bMap.size) return false\n    const it = aMap.keys()\n    while (true) {\n      const curr = it.next()\n      if (curr.done) break\n      if (!deepEqual(aMap.get(curr.value), bMap.get(curr.value))) return false\n    }\n    return true\n  }\n\n  const aIsObj = typeof a === 'object'\n  const bIsObj = typeof b === 'object'\n  if (aIsObj !== bIsObj) return false\n  if (aIsObj) {\n    const aObj: any = a\n    const bObj: any = b\n    const aFields = Object.keys(aObj)\n    const bFields = Object.keys(bObj)\n    const aLength = aFields.length\n\n    if (aLength !== bFields.length) return false\n\n    for (let i = 0; i < aLength; i++) {\n      const field = aFields[i]\n      if (!bObj.hasOwnProperty(field)) return false\n      if (!deepEqual(aObj[field], bObj[field])) return false\n    }\n\n    return true\n  }\n\n  return false\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { map } from 'tempo-std/lib/arrays'\nimport { View } from 'tempo-core/lib/view'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\nimport { strictEqual } from 'tempo-std/lib/equals'\n\nexport interface ComponentView<State, Action, Query>\n  extends View<State, Query> {\n  dispatch: (action: Action) => void\n  state: State\n}\n\nexport class ComponentTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly children: DOMTemplate<State, Action, Query>[]\n  constructor(\n    readonly delayed: boolean,\n    readonly reducer: (state: State, action: Action) => State,\n    readonly equal: undefined | ((a: State, b: State) => boolean),\n    children: (\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(\n    ctx: DOMContext<Action>,\n    state: State\n  ): ComponentView<State, Action, Query> {\n    const equals = this.equal ?? strictEqual\n    let update: (state: State) => void\n    if (this.delayed) {\n      let shouldRender = true\n      update = (state: State) => {\n        view.state = state\n        if (shouldRender) {\n          shouldRender = false\n          setTimeout(() => {\n            view.change(view.state)\n            shouldRender = true\n          })\n        }\n      }\n    } else {\n      update = (state: State) => {\n        view.state = state\n        view.change(state)\n      }\n    }\n\n    const innerDispatch = (action: Action) => {\n      const newState = this.reducer(view.state, action)\n      if (!equals(newState, view.state)) {\n        // view.state = newState\n        update(newState)\n      }\n      ctx.dispatch(action)\n    }\n    const newCtx = ctx.withDispatch(innerDispatch)\n    const views = map(this.children, child => child.render(newCtx, state))\n    const view = {\n      change: (state: State) => {\n        view.state = state\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      },\n      state,\n      dispatch: (action: Action) => {\n        innerDispatch(action)\n      }\n    }\n    return view\n  }\n}\n","import { DOMContext } from './context'\n\nexport interface Lifecycle<State> {\n  beforeChange(state: State): void\n  afterChange(state: State): void\n  beforeDestroy(): void\n}\n\nexport type MakeLifecycle<State, Action> = (\n  state: State,\n  element: HTMLElement,\n  ctx: DOMContext<Action>\n) => Lifecycle<State>\n\nexport function compose<State, Action>(\n  a: MakeLifecycle<State, Action>,\n  b: MakeLifecycle<State, Action>\n): MakeLifecycle<State, Action> {\n  return (state: State, element: HTMLElement, ctx: DOMContext<Action>) => {\n    const al = a(state, element, ctx)\n    const bl = b(state, element, ctx)\n    return {\n      beforeChange(state: State) {\n        al.beforeChange(state)\n        bl.beforeChange(state)\n      },\n      afterChange(state: State) {\n        al.afterChange(state)\n        bl.afterChange(state)\n      },\n      beforeDestroy() {\n        al.beforeDestroy()\n        bl.beforeDestroy()\n      }\n    }\n  }\n}\n\nexport function makeEmptyLifecycle<State, Action, HTMLElement>(\n  state: State,\n  element: HTMLElement,\n  ctx: DOMContext<Action>\n) {\n  return {\n    beforeChange(state: State) {},\n    afterChange(state: State) {},\n    beforeDestroy() {}\n  }\n}\n\nexport function focusElement<State, Action, HTMLElement>(\n  state: State,\n  element: HTMLElement,\n  ctx: DOMContext<Action>\n) {\n  ;((element as unknown) as HTMLInputElement).focus() // TODO\n  return {\n    beforeChange(state: State) {},\n    afterChange(state: State) {},\n    beforeDestroy() {}\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate } from '../template'\nimport { DOMContext } from '../context'\nimport { View } from 'tempo-core/lib/view'\nimport { removeNode, setElAttribute, setElStyle } from './dom'\nimport { EventHandler } from '../value'\nimport { map } from 'tempo-std/lib/arrays'\n\nimport { MakeLifecycle } from '../lifecycle'\nimport { DerivedValue } from 'tempo-core/lib/value'\n\nexport class DOMElement<State, Action, Query = unknown>\n  implements DOMTemplate<State, Action, Query> {\n  constructor(\n    public createElement: (doc: Document) => HTMLElement,\n    public literalAttrs: { name: string; value: string }[],\n    public derivedAttrs: {\n      name: string\n      resolve: DerivedValue<State, string | undefined>\n    }[],\n    public literalStyles: { name: string; value: string }[],\n    public derivedStyles: {\n      name: string\n      resolve: DerivedValue<State, string | undefined>\n    }[],\n    public handlers: {\n      name: string\n      callback: EventHandler<State, Action>\n    }[],\n    public makeLifecycle: MakeLifecycle<State, Action>,\n    public respond: (\n      query: Query,\n      el: HTMLElement,\n      ctx: DOMContext<Action>\n    ) => void,\n    public children: DOMTemplate<State, Action, Query>[]\n  ) {}\n\n  render(ctx: DOMContext<Action>, state: State): View<State, Query> {\n    const { respond } = this\n    let localState = state\n    const el = this.createElement(ctx.doc)\n\n    for (const att of this.literalAttrs) setElAttribute(el, att.name, att.value)\n    for (const att of this.derivedAttrs) {\n      setElAttribute(el, att.name, att.resolve(localState))\n    }\n\n    for (const stl of this.literalStyles) setElStyle(el, stl.name, stl.value)\n    for (const stl of this.derivedStyles) {\n      setElStyle(el, stl.name, stl.resolve(localState))\n    }\n\n    for (const handler of this.handlers) {\n      el.addEventListener(\n        handler.name,\n        (event: Event) => {\n          const action = handler.callback(localState, event, el)\n          if (action !== undefined) {\n            ctx.dispatch(action)\n          }\n        },\n        false\n      )\n    }\n\n    // children\n    const appendChild = (n: Node) => el.appendChild(n)\n    const newCtx = ctx.withAppend(appendChild)\n    const views = map(this.children, child => child.render(newCtx, localState))\n\n    ctx.append(el)\n\n    const lifecycle = this.makeLifecycle(localState, el, ctx)\n\n    return {\n      change: (state: State) => {\n        localState = state\n        lifecycle.beforeChange(localState)\n\n        for (const att of this.derivedAttrs) {\n          setElAttribute(el, att.name, att.resolve(localState))\n        }\n        for (const stl of this.derivedStyles) {\n          setElStyle(el, stl.name, stl.resolve(localState))\n        }\n        for (const view of views) {\n          view.change(localState)\n        }\n\n        lifecycle.afterChange(localState)\n      },\n      destroy: () => {\n        lifecycle.beforeDestroy()\n        removeNode(el)\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        respond(query, el, ctx)\n        for (const view of views) {\n          view.request(query)\n        }\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { View } from 'tempo-core/lib/view'\nimport { DOMContext } from '../context'\nimport { removeNode } from './dom'\nimport { map as mapArray } from 'tempo-std/lib/arrays'\nimport { Attribute, resolveAttribute } from '../value'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n// import { strictEqual } from 'tempo-std/lib/equals'\n\nexport class MapStateTemplate<OuterState, InnerState, Action, Query>\n  implements DOMTemplate<OuterState, Action, Query> {\n  readonly children: DOMTemplate<InnerState, Action, Query>[]\n  constructor(\n    readonly map: Attribute<OuterState, InnerState>,\n    readonly orElse: DOMTemplate<OuterState, Action, Query>,\n    readonly equals: undefined | ((a: InnerState, b: InnerState) => boolean),\n    children: (\n      | DOMChild<InnerState, Action, Query>\n      | IBuilder<InnerState, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: OuterState): View<OuterState, Query> {\n    const { children, map, orElse } = this\n    // const equals = this.equals ?? strictEqual\n\n    let views: View<InnerState | OuterState, Query>[] = []\n\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n\n    let current: InnerState | undefined = undefined\n    const next = resolveAttribute(map)(state)\n\n    if (next === undefined) {\n      views = [orElse.render(newCtx, state)]\n    } else {\n      current = next\n      views = mapArray(children, c => c.render(newCtx, next))\n    }\n\n    function destroy() {\n      for (const view of views) view.destroy()\n    }\n\n    return {\n      change: (state: OuterState) => {\n        const next = resolveAttribute(map)(state)\n        if (next !== undefined) {\n          if (current === undefined) {\n            destroy()\n            current = next\n            views = mapArray(children, c => c.render(newCtx, next))\n          } else {\n            // if (!equals(current, next)) { // TODO remporarely removed\n            current = next\n            for (const view of views) view.change(next)\n          }\n        } else {\n          if (current !== undefined) {\n            current = undefined\n            destroy()\n            views = [orElse.render(newCtx, state)]\n          } else {\n            for (const view of views) view.change(state)\n          }\n        }\n      },\n      destroy: () => {\n        destroy()\n        removeNode(ref)\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { map } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class FragmentTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly children: DOMTemplate<State, Action, Query>[]\n  constructor(\n    children: (\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: State): View<State, Query> {\n    const views = map(this.children, child => child.render(ctx, state))\n    return {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { View } from 'tempo-core/lib/view'\nimport { DOMContext } from '../context'\nimport { map as mapArray } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class MapActionTemplate<State, OuterAction, InnerAction, Query>\n  implements DOMTemplate<State, OuterAction, Query> {\n  readonly children: DOMTemplate<State, InnerAction, Query>[]\n  constructor(\n    readonly map: (value: InnerAction) => OuterAction | undefined,\n    children: (\n      | DOMChild<State, InnerAction, Query>\n      | IBuilder<State, InnerAction, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<OuterAction>, state: State): View<State, Query> {\n    const { children, map } = this\n    const newCtx = ctx.conditionalMapAction(map)\n    const views = mapArray(children, c => c.render(newCtx, state))\n    return {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n  }\n}\n","import { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { View } from 'tempo-core/lib/view'\nimport { map as mapArray } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class MapQueryTemplate<State, Action, OuterQuery, InnerQuery>\n  implements DOMTemplate<State, Action, OuterQuery> {\n  readonly children: DOMTemplate<State, Action, InnerQuery>[]\n  constructor(\n    readonly map: (value: OuterQuery) => InnerQuery | undefined,\n    children: (\n      | DOMChild<State, Action, InnerQuery>\n      | IBuilder<State, Action, InnerQuery>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: State): View<State, OuterQuery> {\n    const { children, map } = this\n    const views = mapArray(children, c => c.render(ctx, state))\n    return {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: OuterQuery) => {\n        const innerQuery = map(query)\n        if (innerQuery !== undefined) {\n          views.forEach(view => view.request(innerQuery))\n        }\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { DOMContext } from '../context'\nimport { DOMTemplate, DOMChild } from '../template'\nimport { removeNode } from './dom'\nimport { map } from 'tempo-std/lib/arrays'\nimport { Attribute, resolveAttribute } from '../value'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class UntilTemplate<OuterState, InnerState, Action, Query>\n  implements DOMTemplate<OuterState, Action, Query> {\n  readonly children: DOMTemplate<InnerState, Action, Query>[]\n  constructor(\n    readonly next: Attribute<{ state: OuterState; index: number }, InnerState>,\n    children: (\n      | DOMChild<InnerState, Action, Query>\n      | IBuilder<InnerState, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: OuterState): View<OuterState, Query> {\n    const { children } = this\n    const next = this.next\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n    let childrenViews: View<InnerState, Query>[][] = []\n    // TODO, when next is a static literal it can be optimized to only render once\n    const view = {\n      change: (state: OuterState) => {\n        const currentLength = childrenViews.length\n        let index = 0\n        while (true) {\n          const value = resolveAttribute(next)({ state, index })\n          if (value === undefined) break\n          if (index < currentLength) {\n            // replace existing\n            const filteredViews = childrenViews[index]\n            for (const view of filteredViews) view.change(value!)\n          } else {\n            // add node\n            childrenViews.push(map(children, el => el.render(newCtx, value!)))\n          }\n          index++\n        }\n        let i = index\n        // remove extra nodes\n        while (i < currentLength) {\n          for (const c of childrenViews[i]) c.destroy()\n          i++\n        }\n        childrenViews = childrenViews.slice(0, index)\n      },\n      destroy: () => {\n        removeNode(ref)\n        for (const childViews of childrenViews)\n          for (const view of childViews) view.destroy()\n        childrenViews = []\n      },\n      request: (query: Query) => {\n        for (const childViews of childrenViews)\n          for (const view of childViews) view.request(query)\n      }\n    }\n    view.change(state)\n    return view\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { map } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport type SimpleComponent<State, Query> = DOMTemplate<State, State, Query>\n\nexport class SimpleComponentTemplate<State, Query>\n  implements SimpleComponent<State, Query> {\n  readonly children: DOMTemplate<State, State, Query>[]\n  constructor(\n    readonly delayed: boolean,\n    children: (DOMChild<State, State, Query> | IBuilder<State, State, Query>)[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<State>, state: State) {\n    let update: (state: State) => void\n    if (this.delayed) {\n      let shouldRender = true\n      update = (state: State) => {\n        if (shouldRender) {\n          shouldRender = false\n          setTimeout(() => {\n            view.change(state)\n            shouldRender = true\n          })\n        }\n      }\n    } else {\n      update = (state: State) => {\n        view.change(state)\n      }\n    }\n\n    const newCtx = ctx.withInterceptDispatch(update)\n    const views = map(this.children, child => child.render(newCtx, state))\n\n    const view = {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n    return view\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { map } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class PortalTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly children: DOMTemplate<State, Action, Query>[]\n  constructor(\n    readonly append: (doc: Document, node: Node) => void,\n    children: (\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: State) {\n    const append = (node: Node) => this.append(ctx.doc, node)\n    const newCtx = ctx.withAppend(append)\n    const views = map(this.children, child => child.render(newCtx, state))\n    return {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { DOMContext } from '../context'\nimport { DOMTemplate } from '../template'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class LazyTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  constructor(\n    readonly f: () =>\n      | DOMTemplate<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  ) {}\n\n  private template: DOMTemplate<State, Action, Query> | undefined\n  render(ctx: DOMContext<Action>, state: State): View<State, Query> {\n    if (this.template === undefined) {\n      this.template = childOrBuilderToTemplate(this.f())\n    }\n    return this.template.render(ctx, state)\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { removeNode } from './dom'\nimport { Attribute, resolveAttribute } from '../value'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class MatchBoolTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly trueTemplate: DOMTemplate<State, Action, Query>\n  readonly falseTemplate: DOMTemplate<State, Action, Query>\n  constructor(\n    readonly condition: Attribute<State, boolean>,\n    trueTemplate:\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>,\n    falseTemplate:\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  ) {\n    this.trueTemplate = childOrBuilderToTemplate(trueTemplate)\n    this.falseTemplate = childOrBuilderToTemplate(falseTemplate)\n  }\n  render(ctx: DOMContext<Action>, state: State) {\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n    const { trueTemplate, falseTemplate } = this\n    const condition = resolveAttribute(this.condition)\n    let lastEvaluation = condition(state)\n    let view = lastEvaluation\n      ? trueTemplate.render(newCtx, state)\n      : falseTemplate.render(newCtx, state)\n    return {\n      change: (state: State) => {\n        const newEvaluation = condition(state)\n        if (newEvaluation === lastEvaluation) {\n          view.change(state)\n        } else {\n          view.destroy()\n          lastEvaluation = newEvaluation\n          view = newEvaluation\n            ? trueTemplate.render(newCtx, state)\n            : falseTemplate.render(newCtx, state)\n        }\n      },\n      destroy: () => {\n        removeNode(ref)\n        view.destroy()\n      },\n      request: (query: Query) => {\n        view.request(query)\n      }\n    }\n  }\n}\n","export * from './impl/html'\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate } from '../template'\nimport { DOMContext } from '../context'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\nimport { MapState } from '../html'\n\nexport type ReleaseF<\n  StateA,\n  StateB,\n  StateC,\n  Action,\n  Query,\n  Builder extends IBuilder<StateC, Action, Query>\n> = (\n  merge: (a: StateA, b: StateB) => StateC,\n  init: (builder: Builder) => void\n) => DOMTemplate<StateB, Action, Query> | IBuilder<StateB, Action, Query>\nexport type HoldF<\n  StateA,\n  StateB,\n  StateC,\n  Action,\n  Query,\n  Builder extends IBuilder<StateC, Action, Query>\n> = (\n  releasef: ReleaseF<StateA, StateB, StateC, Action, Query, Builder>\n) => DOMTemplate<StateA, Action, Query> | IBuilder<StateA, Action, Query>\n\nexport class HoldStateTemplate<\n  StateA,\n  StateB,\n  StateC,\n  Action,\n  Query,\n  Builder extends IBuilder<StateC, Action, Query>\n> implements DOMTemplate<StateA, Action, Query> {\n  private template!: DOMTemplate<StateA, Action, Query>\n  constructor(\n    readonly holdf: HoldF<StateA, StateB, StateC, Action, Query, Builder>,\n    readonly builder: Builder\n  ) {}\n  render(ctx: DOMContext<Action>, state: StateA) {\n    let localState = state\n    if (this.template === undefined) {\n      this.template = childOrBuilderToTemplate(\n        this.holdf((merge, init) => {\n          init(this.builder)\n          return MapState<StateB, StateC, Action, Query>(\n            (b: StateB) => merge(localState, b),\n            $ => $.Append(this.builder)\n          )\n        })\n      )\n    }\n\n    const view = this.template.render(ctx, localState)\n    return {\n      change(state: StateA) {\n        localState = state\n        view.change(localState)\n      },\n      request(query: Query) {\n        view.request(query)\n      },\n      destroy() {\n        view.destroy\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { ComponentTemplate } from './component'\nimport { DOMTemplate } from '../template'\nimport { DOMContext } from '../context'\nimport { Attribute, resolveAttribute } from '../value'\n\nexport class AdapterTemplate<\n  OuterState,\n  InnerState,\n  OuterAction,\n  InnerAction,\n  Query\n> implements DOMTemplate<OuterState, OuterAction, Query> {\n  constructor(\n    readonly bootstrapState: (outer: OuterState) => InnerState,\n    readonly mergeStates: Attribute<\n      { outerState: OuterState; innerState: InnerState },\n      InnerState\n    >,\n    readonly propagate: (\n      args: PropagateArg<OuterState, InnerState, OuterAction, InnerAction>\n    ) => void,\n    readonly child: ComponentTemplate<InnerState, InnerAction, Query>\n  ) {}\n\n  render(\n    ctx: DOMContext<OuterAction>,\n    outerState: OuterState\n  ): View<OuterState, Query> {\n    let innerState = this.bootstrapState(outerState)\n    innerState =\n      resolveAttribute(this.mergeStates)({\n        outerState,\n        innerState\n      }) ?? innerState\n\n    const newCtx = ctx.withDispatch((action: InnerAction) =>\n      dispatchPropagate(viewComponent.state, action)\n    )\n\n    const viewComponent = this.child.render(newCtx, innerState)\n\n    const dispatchPropagate = (innerState: InnerState, action: InnerAction) => {\n      this.propagate({\n        action,\n        innerState,\n        outerState,\n        dispatchInner: (action: InnerAction) => viewComponent.dispatch(action),\n        dispatchOuter: (action: OuterAction) => ctx.dispatch(action)\n      })\n    }\n\n    return {\n      change: (outerState: OuterState) => {\n        const newState = resolveAttribute(this.mergeStates)({\n          outerState,\n          innerState: viewComponent.state\n        })\n        if (newState !== undefined) {\n          viewComponent.change(newState)\n        }\n      },\n      destroy: () => {\n        viewComponent.destroy()\n      },\n      request: (query: Query) => {\n        viewComponent.request(query)\n      }\n    }\n  }\n}\n\nexport interface PropagateArg<\n  OuterState,\n  InnerState,\n  OuterAction,\n  InnerAction\n> {\n  action: InnerAction\n  innerState: InnerState\n  outerState: OuterState\n  dispatchInner: (action: InnerAction) => void\n  dispatchOuter: (action: OuterAction) => void\n}\n","import { HoldF, HoldStateTemplate } from './hold_state'\nimport {\n  DOMBuilder,\n  IBuilder,\n  extractLiterals,\n  extractDerived,\n  booleanToString,\n  ListOrRecordValue,\n  listOrRecordToSpaceSeparated,\n  stylesToString,\n  numbersListToString,\n  numberPairsListToString\n} from './dom_builder'\nimport { DerivedOrLiteralValue, DerivedValue } from 'tempo-core/lib/value'\nimport {\n  Attribute,\n  resolveAttribute,\n  mapAttribute,\n  EventHandler,\n  EventHandlerTE\n} from '../value'\nimport { DOMContext } from '../context'\nimport { MakeLifecycle, makeEmptyLifecycle } from '../lifecycle'\nimport { makeCreateElementNS } from './dom'\nimport { keys } from 'tempo-std/lib/objects'\nimport { DOMElement } from './element'\nimport { FragmentTemplate as FragmentSVGTemplate } from './fragment'\nimport { PropagateArg, AdapterTemplate } from './adapter'\nimport { ComponentTemplate } from './component'\nimport { MapActionTemplate } from './map_action'\nimport { MapQueryTemplate } from './map_query'\nimport { DOMChild, DOMTemplate } from '../template'\nimport { MapStateTemplate } from './map_state'\nimport { PortalTemplate } from './portal'\nimport { SimpleComponentTemplate } from './simple_component'\nimport { UntilTemplate } from './until'\nimport { MatchBoolTemplate } from './match_bool_template'\nimport { LazyTemplate } from './lazy'\nimport { text } from './text'\n\nexport const SVG_NS = 'http://www.w3.org/2000/svg'\n\nexport class BaseSVGBuilder<State, Action, Query> extends DOMBuilder<\n  State,\n  Action,\n  Query\n> {\n  SvgEl(\n    init: (\n      builder: SVGElementBuilder<State, Action, Query, SVGElement>\n    ) => void = () => {}\n  ): this {\n    const builder = svgEl<State, Action, Query>(name)\n    init(builder)\n    this._children.push(builder.build())\n    return this\n  }\n\n  // transform\n  Adapter<StateB, ActionB>(props: {\n    bootstrapState: (outer: State) => StateB\n    mergeStates?: Attribute<\n      {\n        outerState: State\n        innerState: StateB\n      },\n      StateB\n    >\n    propagate?: (args: PropagateArg<State, StateB, Action, ActionB>) => void\n    child: ComponentTemplate<StateB, ActionB, Query>\n  }) {\n    return this.Append(\n      new AdapterTemplate(\n        props.bootstrapState,\n        props.mergeStates,\n        props.propagate || (() => undefined),\n        props.child\n      )\n    )\n  }\n\n  Component(\n    reducer: (state: State, action: Action) => State,\n    init: (builder: ComponentSVGBuilder<State, Action, Query>) => void\n  ) {\n    const builder = new ComponentSVGBuilder<State, Action, Query>(reducer)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  LocalAdapter(props: {\n    propagate?: (args: PropagateArg<State, State, Action, Action>) => void\n    child: ComponentTemplate<State, Action, Query>\n  }) {\n    return this.Append(\n      new AdapterTemplate(\n        state => state,\n        ({ outerState }) => outerState,\n        props.propagate || (() => undefined),\n        props.child\n      )\n    )\n  }\n\n  HoldState<StateB, StateC>(\n    holdf: HoldF<\n      State,\n      StateB,\n      StateC,\n      Action,\n      Query,\n      FragmentSVGBuilder<StateC, Action, Query>\n    >\n  ): this {\n    return this.Append(\n      new HoldStateTemplate(\n        holdf,\n        new FragmentSVGBuilder<StateC, Action, Query>()\n      )\n    )\n  }\n\n  MapState<StateB>(\n    map: (state: State) => StateB | undefined,\n    init: (builder: MapStateSVGBuilder<State, StateB, Action, Query>) => void\n  ) {\n    const builder = new MapStateSVGBuilder<State, StateB, Action, Query>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapField<Key extends keyof State>(\n    field: Key,\n    init: (\n      builder: MapStateSVGBuilder<State, State[Key], Action, Query>\n    ) => void\n  ) {\n    return this.MapState<State[Key]>((v: State): State[Key] => v[field], init)\n  }\n\n  MapStateAndKeep<StateB>(\n    map: (state: State) => StateB | undefined,\n    init: (\n      builder: MapStateSVGBuilder<State, [StateB, State], Action, Query>\n    ) => void\n  ) {\n    const builder = new MapStateSVGBuilder<\n      State,\n      [StateB, State],\n      Action,\n      Query\n    >((state: State) => {\n      const inner = resolveAttribute(map)(state)\n      if (inner !== undefined) {\n        return [inner, state]\n      } else {\n        return undefined\n      }\n    })\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapAction<ActionB>(\n    map: DerivedValue<ActionB, Action>,\n    init: (builder: MapActionSVGBuilder<State, Action, ActionB, Query>) => void\n  ) {\n    const builder = new MapActionSVGBuilder<State, Action, ActionB, Query>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapQuery<QueryB>(\n    map: DerivedValue<Query, QueryB>,\n    init: (builder: MapQuerySVGBuilder<State, Action, Query, QueryB>) => void\n  ) {\n    const builder = new MapQuerySVGBuilder<State, Action, Query, QueryB>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MatchBool(props: {\n    condition: Attribute<State, boolean>\n    true: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n    false: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  }): this {\n    return this.Append(\n      new MatchBoolTemplate<State, Action, Query>(\n        props.condition,\n        props.true,\n        props.false\n      )\n    )\n  }\n\n  Lazy(\n    lazyf: () =>\n      | DOMTemplate<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  ) {\n    return this.Append(new LazyTemplate(lazyf))\n  }\n\n  ForEach(\n    init: (\n      builder: UntilSVGBuilder<\n        State,\n        State extends any[] ? State[number] : never,\n        Action,\n        Query\n      >\n    ) => void\n  ): this {\n    return this.Until(\n      ({\n        state,\n        index\n      }: {\n        state: State\n        index: number\n      }): State extends any[] ? State[number] : never => (state as any)[index],\n      init\n    )\n  }\n\n  Fragment(init: (builder: FragmentSVGBuilder<State, Action, Query>) => void) {\n    const builder = new FragmentSVGBuilder<State, Action, Query>()\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  Iterate<Items extends any[]>(\n    map: DerivedValue<State, Items>,\n    init: (\n      builder: UntilSVGBuilder<\n        [Items, State],\n        [Items[number], State, number],\n        Action,\n        Query\n      >\n    ) => void\n  ) {\n    return this.MapState<[Items, State]>(\n      (outer: State): [Items, State] | undefined => {\n        const items = resolveAttribute(map)(outer)\n        return items !== undefined ? [items, outer] : undefined\n      },\n      $ => {\n        $.Until<[Items[number], State, number]>(\n          ({ state: [items, state], index }) =>\n            items[index] && [items[index], state, index],\n          init\n        )\n      }\n    )\n  }\n\n  Portal(\n    appendChild: (doc: Document, node: Node) => void,\n    init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new PortalSVGBuilder<State, Action, Query>(appendChild)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  PortalWithSelector(\n    selector: string,\n    init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => {\n      const el = doc.querySelector(selector)\n      if (!el) {\n        throw new Error(`selector doesn't match any element: \"${selector}\"`)\n      }\n      el.appendChild(node)\n    }, init)\n  }\n\n  HeadPortal(\n    init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => doc.head.appendChild(node), init)\n  }\n\n  BodyPortal(\n    init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => doc.body.appendChild(node), init)\n  }\n\n  // SimpleComponent(\n  //   init: (builder: SimpleComponentBuilder<State, Query>) => void\n  // ) {\n  //   const builder = new SimpleComponentBuilder<State, Query>()\n  //   init(builder)\n  //   return this.append(builder.build())\n  // }\n\n  Unless(\n    condition: DerivedValue<State, boolean>,\n    init: (builder: MapStateSVGBuilder<State, State, Action, Query>) => void\n  ) {\n    return this.When(s => !condition(s), init)\n  }\n\n  Until<StateB>(\n    next: DerivedValue<{ state: State; index: number }, StateB>,\n    init: (builder: UntilSVGBuilder<State, StateB, Action, Query>) => void\n  ) {\n    const builder = new UntilSVGBuilder<State, StateB, Action, Query>(next)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  When(\n    condition: DerivedValue<State, boolean>,\n    init: (builder: MapStateSVGBuilder<State, State, Action, Query>) => void\n  ) {\n    const builder = new MapStateSVGBuilder<State, State, Action, Query>(s => {\n      if (condition(s)) {\n        return s\n      } else {\n        return undefined\n      }\n    })\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  // derived children\n  A(\n    init?: (builder: SVGAnchorElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGAnchorElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  CIRCLE(\n    init?: (builder: SVGCircleElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGCircleElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  CLIP_PATH(\n    init?: (\n      builder: SVGElementBuilder<State, Action, Query, SVGClipPathElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGElementBuilder<State, Action, Query, SVGClipPathElement>(\n        'clipPath'\n      ),\n      init,\n      this\n    )\n  }\n  DEFS(\n    init?: (\n      builder: SVGElementBuilder<State, Action, Query, SVGDefsElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGElementBuilder<State, Action, Query, SVGDefsElement>('defs'),\n      init,\n      this\n    )\n  }\n  DESC(\n    init?: (\n      builder: SVGElementBuilder<State, Action, Query, SVGDescElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGElementBuilder<State, Action, Query, SVGDescElement>('desc'),\n      init,\n      this\n    )\n  }\n  ELLIPSE(\n    init?: (builder: SVGEllipseElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGEllipseElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_BLEND(\n    init?: (builder: SVGFEBlendElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEBlendElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_COLOR_MATRIX(\n    init?: (\n      builder: SVGFEColorMatrixElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEColorMatrixElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_COMPONENT_TRANSFER(\n    init?: (\n      builder: SVGFEComponentTransferElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEComponentTransferElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_COMPOSITE(\n    init?: (builder: SVGFeCompositeElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFeCompositeElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_CONVOLVE_MATRIX(\n    init?: (\n      builder: SVGFEConvolveMatrixElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEConvolveMatrixElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_DIFFUSE_LIGHTING(\n    init?: (\n      builder: SVGFEDiffuseLightingElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEDiffuseLightingElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_DISPLACEMENT_MAP(\n    init?: (\n      builder: SVGFEDisplacementMapElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEDisplacementMapElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_DISTANT_LIGHT(\n    init?: (\n      builder: SVGFEDistantLightElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEDistantLightElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FLOOD(\n    init?: (builder: SVGFEFloodElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFloodElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FUNC_A(\n    init?: (builder: SVGFEFuncAElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFuncAElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FUNC_B(\n    init?: (builder: SVGFEFuncBElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFuncBElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FUNC_G(\n    init?: (builder: SVGFEFuncGElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFuncGElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FUNC_R(\n    init?: (builder: SVGFEFuncRElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFuncRElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_GAUSSIAN_BLUR(\n    init?: (\n      builder: SVGFEGaussianBlurElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEGaussianBlurElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_IMAGE(\n    init?: (builder: SVGFEImageElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEImageElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_MERGE(\n    init?: (builder: SVGFEMergeElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEMergeElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_MERGE_NODE(\n    init?: (builder: SVGFEMergeNodeElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEMergeNodeElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_MORPHOLOGY(\n    init?: (\n      builder: SVGFEMorphologyElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEMorphologyElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_OFFSET(\n    init?: (builder: SVGFEOffsetElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEOffsetElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_POINT_LIGHT(\n    init?: (\n      builder: SVGFEPointLightElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEPointLightElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_SPECULAR_LIGHTING(\n    init?: (\n      builder: SVGFESpecularLightingElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFESpecularLightingElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_SPOTLIGHT(\n    init?: (builder: SVGFESpotLightElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFESpotLightElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_TILE(\n    init?: (builder: SVGFETileElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFETileElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_TURBULENCE(\n    init?: (\n      builder: SVGFETurbulenceElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFETurbulenceElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FILTER(\n    init?: (builder: SVGFilterElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFilterElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FOREIGN_OBJECT(\n    init?: (\n      builder: SVGForeignObjectElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGForeignObjectElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  G(init?: (builder: SVGGElementBuilder<State, Action, Query>) => void): this {\n    return initBuilder(\n      new SVGGElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  IMAGE(\n    init?: (builder: SVGImageElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGImageElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  LINE(\n    init?: (builder: SVGLineElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGLineElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  LINEAR_GRADIENT(\n    init?: (\n      builder: SVGLinearGradientElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGLinearGradientElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  MARKER(\n    init?: (builder: SVGMarkerElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGMarkerElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  MASK(\n    init?: (builder: SVGMaskElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGMaskElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  METADATA(\n    init?: (builder: SVGMetadataElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGMetadataElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  PATH(\n    init?: (builder: SVGPathElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGPathElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  PATTERN(\n    init?: (builder: SVGPatternElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGPatternElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  POLYGON(\n    init?: (builder: SVGPolygonElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGPolygonElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  POLYLINE(\n    init?: (builder: SVGPolylineElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGPolylineElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  RADIALGRADIENT(\n    init?: (\n      builder: SVGRadialGradientElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGRadialGradientElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  RECT(\n    init?: (builder: SVGRectElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGRectElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  SCRIPT(\n    init?: (builder: SVGScriptElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGScriptElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  STOP(\n    init?: (builder: SVGStopElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGStopElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  STYLE(\n    init?: (builder: SVGStyleElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGStyleElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  SVG(\n    init?: (builder: SVGSVGElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGSVGElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  SWITCH(\n    init?: (builder: SVGSwitchElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGSwitchElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  SYMBOL(\n    init?: (builder: SVGSymbolElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGSymbolElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TEXT(\n    init?: (builder: SVGTextElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGTextElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TEXT_PATH(\n    init?: (builder: SVGTextPathElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGTextPathElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TITLE(\n    init?: (builder: SVGTitleElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGTitleElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TSPAN(\n    init?: (builder: SVGTSpanElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGTSpanElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  USE(\n    init?: (builder: SVGUseElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGUseElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  VIEW(\n    init?: (builder: SVGViewElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGViewElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n}\n\n// dom generic\nexport function svgEl<State, Action, Query, El extends SVGElement = SVGElement>(\n  tagName: string\n) {\n  return new SVGElementBuilder<State, Action, Query, El>(tagName)\n}\n\nexport class SVGElementBuilder<State, Action, Query, El extends SVGElement>\n  extends BaseSVGBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _attributes: Record<string, DerivedOrLiteralValue<State, string>> = {}\n  private _styles: Record<string, DerivedOrLiteralValue<State, string>> = {}\n  private _handlers: Record<string, EventHandler<State, Action>> = {}\n  private _lifecycle: MakeLifecycle<State, Action> | undefined\n  private _respond:\n    | ((query: Query, el: El, ctx: DOMContext<Action>) => void)\n    | undefined\n\n  constructor(public tagName: string) {\n    super()\n  }\n\n  build(): DOMElement<State, Action, Query> {\n    return new DOMElement<State, Action, Query>(\n      makeCreateElementNS(SVG_NS, this.tagName),\n      extractLiterals(this._attributes),\n      extractDerived(this._attributes),\n      extractLiterals(this._styles),\n      extractDerived(this._styles),\n      keys(this._handlers).map(name => ({\n        name,\n        callback: this._handlers[name]\n      })),\n      this._lifecycle ?? makeEmptyLifecycle,\n      (this._respond as (\n        query: Query,\n        el: any,\n        ctx: DOMContext<Action>\n      ) => {}) ?? ((query: Query, el: any, ctx: DOMContext<Action>) => {}), // TODO better typing required\n      this._children\n    )\n  }\n\n  // attributes, styles and handlers\n  attr(name: string, value: Attribute<State, string>): this {\n    if (value != null) {\n      this._attributes[name] = value as DerivedOrLiteralValue<State, string>\n    }\n    return this\n  }\n  style(name: string, value: Attribute<State, string>): this {\n    if (value != null) {\n      this._styles[name] = value as DerivedOrLiteralValue<State, string>\n    }\n    return this\n  }\n  handle(name: string, callback: EventHandler<State, Action> | undefined) {\n    if (callback != null) {\n      this._handlers[name] = callback\n    }\n    return this\n  }\n  Lifecycle(makeLifecycle: MakeLifecycle<State, Action>): this {\n    this._lifecycle = makeLifecycle\n    return this\n  }\n  Respond(\n    response: (query: Query, el: El, ctx: DOMContext<Action>) => void\n  ): this {\n    this._respond = response\n    return this\n  }\n\n  // attribute shortcuts\n  aria(name: string, value: Attribute<State, string>) {\n    return this.attr(`aria-${name}`, value)\n  }\n  class(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('class', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  data(name: string, value: Attribute<State, string>) {\n    return this.attr(`data-${name}`, value)\n  }\n  id(value: Attribute<State, string>) {\n    return this.attr('id', value)\n  }\n  lang(value: Attribute<State, string>) {\n    return this.attr('lang', value)\n  }\n  styles(value: Attribute<State, string | Record<string, string>>) {\n    return this.attr('style', mapAttribute(value, stylesToString))\n  }\n  systemLanguage(value: Attribute<State, string>) {\n    return this.attr('systemLanguage', value)\n  }\n  tabIndex(value: Attribute<State, number>) {\n    return this.attr('tabindex', mapAttribute(value, String))\n  }\n\n  // presentation attributes // TODO\n  // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/clip-path\n  alignmentBaseline(\n    value: Attribute<\n      State,\n      | 'baseline'\n      | 'text-before-edge'\n      | 'middle'\n      | 'central'\n      | 'text-after-edge'\n      | 'ideographic'\n      | 'alphabetic'\n      | 'hanging'\n      | 'mathematical'\n      | 'top'\n      | 'center'\n      | 'bottom'\n    >\n  ) {\n    return this.attr('alignment-baseline', value)\n  }\n  baselineShift(value: Attribute<State, string>) {\n    return this.attr('baseline-shift', value)\n  }\n  clipPath(value: Attribute<State, string>) {\n    return this.attr('clip-path', value)\n  }\n  clipRule(value: Attribute<State, 'nonzero' | 'evenodd'>) {\n    return this.attr('clip-rule', value)\n  }\n  color(value: Attribute<State, string>) {\n    return this.attr('color', value)\n  }\n  colorInterpolation(value: Attribute<State, 'auto' | 'sRGB' | 'linearRGB'>) {\n    return this.attr('color-interpolation', value)\n  }\n  colorInterpolationFilters(\n    value: Attribute<State, 'auto' | 'sRGB' | 'linearRGB'>\n  ) {\n    return this.attr('color-interpolation-filters', value)\n  }\n  cursor(value: Attribute<State, string>) {\n    return this.attr('cursor', value)\n  }\n  direction(value: Attribute<State, 'ltr' | 'rtl'>) {\n    return this.attr('direction', value)\n  }\n  display(value: Attribute<State, string>) {\n    return this.attr('display', value)\n  }\n  dominantBaseline(\n    value: Attribute<\n      State,\n      | 'auto'\n      | 'text-bottom'\n      | 'alphabetic'\n      | 'ideographic'\n      | 'middle'\n      | 'central'\n      | 'mathematical'\n      | 'hanging'\n      | 'text-top'\n    >\n  ) {\n    return this.attr('dominant-baseline', value)\n  }\n\n  fill(value: Attribute<State, string>) {\n    return this.attr('fill', value)\n  }\n  fillOpacity(value: Attribute<State, number | string>): this {\n    return this.attr('fill-opacity', mapAttribute(value, String))\n  }\n  fillRule(value: Attribute<State, 'nonzero' | 'evenodd'>): this {\n    return this.attr('fill-rule', value)\n  }\n  filter(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr(\n      'filter',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  floodColor(value: Attribute<State, string>) {\n    return this.attr('flood-color', value)\n  }\n  floodOpacity(value: Attribute<State, number | string>): this {\n    return this.attr('flood-opacity', mapAttribute(value, String))\n  }\n  fontFamily(value: Attribute<State, string>) {\n    return this.attr('font-family', value)\n  }\n  fontSize(value: Attribute<State, number | string>): this {\n    return this.attr('font-size', mapAttribute(value, String))\n  }\n  fontSizeAdjust(value: Attribute<State, number | string>): this {\n    return this.attr('font-size-adjust', mapAttribute(value, String))\n  }\n  fontStretch(value: Attribute<State, string>) {\n    return this.attr('font-stretch', value)\n  }\n  fontStyle(value: Attribute<State, 'normal' | 'italic' | 'oblique'>) {\n    return this.attr('font-style', value)\n  }\n  fontVariant(value: Attribute<State, string>) {\n    return this.attr('font-variant', value)\n  }\n  fontWeight(\n    value: Attribute<State, number | 'normal' | 'bold' | 'bolder' | 'lighter'>\n  ) {\n    return this.attr('font-weight', mapAttribute(value, String))\n  }\n  imageRendering(\n    value: Attribute<State, 'auto' | 'optimizeSpeed' | 'optimizeQuality'>\n  ) {\n    return this.attr('image-rendering', value)\n  }\n  letterSpacing(value: Attribute<State, number | string>): this {\n    return this.attr('letter-spacing', mapAttribute(value, String))\n  }\n  lightingColor(value: Attribute<State, string>) {\n    return this.attr('lighting-color', value)\n  }\n  markerEnd(value: Attribute<State, string>) {\n    return this.attr('marker-end', value)\n  }\n  markerMid(value: Attribute<State, string>) {\n    return this.attr('marker-mid', value)\n  }\n  markerStart(value: Attribute<State, string>) {\n    return this.attr('marker-start', value)\n  }\n  mask(value: Attribute<State, string>) {\n    return this.attr('mask', value)\n  }\n  opacity(value: Attribute<State, number>) {\n    return this.attr('opacity', mapAttribute(value, String))\n  }\n  overflow(value: Attribute<State, 'visible' | 'hidden' | 'scroll' | 'auto'>) {\n    return this.attr('overflow', value)\n  }\n  pointerEvents(\n    value: Attribute<\n      State,\n      | 'bounding-box'\n      | 'visiblePainted'\n      | 'visibleFill'\n      | 'visibleStroke'\n      | 'visible'\n      | 'painted'\n      | 'fill'\n      | 'stroke'\n      | 'all'\n      | 'none'\n    >\n  ) {\n    return this.attr('pointer-events', value)\n  }\n  shapeRendering(\n    value: Attribute<\n      State,\n      'auto' | 'optimizeSpeed' | 'crispEdges' | 'geometricPrecision'\n    >\n  ) {\n    return this.attr('shape-rendering', value)\n  }\n  stopColor(value: Attribute<State, string>) {\n    return this.attr('stop-color', value)\n  }\n  stopOpacity(value: Attribute<State, number | string>) {\n    return this.attr('stop-opacity', mapAttribute(value, String))\n  }\n  stroke(value: Attribute<State, string>) {\n    return this.attr('stroke', value)\n  }\n  strokeDashArray(value: Attribute<State, string>) {\n    return this.attr('stroke-dasharray', value)\n  }\n  strokeDashoffset(value: Attribute<State, number | string>) {\n    return this.attr('stroke-dashoffset', mapAttribute(value, String))\n  }\n  strokeLineCap(value: Attribute<State, 'butt' | 'round' | 'square'>) {\n    return this.attr('stroke-linecap', value)\n  }\n  strokeLineJoin(\n    value: Attribute<State, 'arcs' | 'bevel |miter' | 'miter-clip' | 'round'>\n  ) {\n    return this.attr('stroke-linejoin', value)\n  }\n  strokeMiterLimit(value: Attribute<State, number>) {\n    return this.attr('stroke-miterlimit', mapAttribute(value, String))\n  }\n  strokeOpacity(value: Attribute<State, number | string>): this {\n    return this.attr('stroke-opacity', mapAttribute(value, String))\n  }\n  strokeWidth(value: Attribute<State, number | string>): this {\n    return this.attr('stroke-width', mapAttribute(value, String))\n  }\n  textAnchor(value: Attribute<State, 'start' | 'middle' | 'end'>) {\n    return this.attr('text-anchor', value)\n  }\n  textDecoration(value: Attribute<State, string>) {\n    return this.attr('text-decoration', value)\n  }\n  textRendering(\n    value: Attribute<\n      State,\n      'auto' | 'optimizeSpeed' | 'optimizeLegibility' | 'geometricPrecision'\n    >\n  ) {\n    return this.attr('text-rendering', value)\n  }\n  transform(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'transform',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  unicodeBidi(\n    value: Attribute<\n      State,\n      | 'normal'\n      | 'embed'\n      | 'isolate'\n      | 'bidi-override'\n      | 'isolate-override'\n      | 'plaintext'\n    >\n  ) {\n    return this.attr('unicode-bidi', value)\n  }\n  vectorEffect(\n    value: Attribute<\n      State,\n      | 'none'\n      | 'non-scaling-stroke'\n      | 'non-scaling-size'\n      | 'non-rotation'\n      | 'fixed-position'\n    >\n  ) {\n    return this.attr('vector-effect', value)\n  }\n  visibility(value: Attribute<State, 'visible' | 'hidden' | 'collapse'>) {\n    return this.attr('visibility', value)\n  }\n  wordSpacing(value: Attribute<State, number | string>) {\n    return this.attr('word-spacing', mapAttribute(value, String))\n  }\n  writingMode(\n    value: Attribute<State, 'horizontal-tb' | 'vertical-rl' | 'vertical-lr'>\n  ) {\n    return this.attr('writing-mode', value)\n  }\n\n  // aria\n  ariaActiveDescendant(value: Attribute<State, string>) {\n    return this.attr('aria-activedescendant', value)\n  }\n  ariaAtomic(value: Attribute<State, boolean>) {\n    return this.attr('aria-atomic', mapAttribute(value, booleanToString))\n  }\n  ariaAutocomplete(\n    value: Attribute<State, 'inline' | 'list' | 'both' | 'none'>\n  ) {\n    return this.attr('aria-autocomplete', value)\n  }\n  ariaBusy(value: Attribute<State, boolean>) {\n    return this.attr('aria-busy', mapAttribute(value, booleanToString))\n  }\n  ariaChecked(\n    value: Attribute<State, 'true' | 'false' | 'mixed' | true | false>\n  ) {\n    return this.attr(\n      'aria-checked',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaColCount(value: Attribute<State, number>) {\n    return this.attr('aria-colcount', mapAttribute(value, String))\n  }\n  ariaColIndex(value: Attribute<State, number>) {\n    return this.attr('aria-colindex', mapAttribute(value, String))\n  }\n  ariaColSpan(value: Attribute<State, number>) {\n    return this.attr('aria-colspan', mapAttribute(value, String))\n  }\n  ariaControls(value: Attribute<State, string>) {\n    return this.attr('aria-controls', value)\n  }\n  ariaCurrent(\n    value: Attribute<\n      State,\n      | 'page'\n      | 'step'\n      | 'location'\n      | 'date'\n      | 'time'\n      | 'true'\n      | 'false'\n      | true\n      | false\n    >\n  ) {\n    return this.attr(\n      'aria-current',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaDescribedBy(value: Attribute<State, string>) {\n    return this.attr('aria-describedby', value)\n  }\n  ariaDetails(value: Attribute<State, string>) {\n    return this.attr('aria-details', value)\n  }\n  ariaDisabled(value: Attribute<State, boolean>) {\n    return this.attr('aria-disabled', mapAttribute(value, booleanToString))\n  }\n  ariaDropEffect(\n    value: Attribute<\n      State,\n      'copy' | 'execute' | 'link' | 'move' | 'none' | 'popup'\n    >\n  ) {\n    return this.attr('aria-dropeffect', value)\n  }\n  ariaErrorMessage(\n    value: Attribute<\n      State,\n      'grammar' | 'false' | false | 'spelling' | 'true' | true\n    >\n  ) {\n    return this.attr(\n      'aria-errormessage',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaExpanded(value: Attribute<State, boolean>) {\n    return this.attr('aria-expanded', mapAttribute(value, booleanToString))\n  }\n  ariaFlowTo(value: Attribute<State, string>) {\n    return this.attr('aria-flowto', value)\n  }\n  ariaGrabbed(value: Attribute<State, boolean>) {\n    return this.attr('aria-grabbed', mapAttribute(value, booleanToString))\n  }\n  ariaHasPopup(\n    value: Attribute<\n      State,\n      | 'true'\n      | 'false'\n      | 'menu'\n      | 'listbox'\n      | 'tree'\n      | 'grid'\n      | 'dialog'\n      | true\n      | false\n    >\n  ) {\n    return this.attr(\n      'aria-haspopup',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaHidden(value: Attribute<State, boolean>) {\n    return this.attr('aria-hidden', mapAttribute(value, booleanToString))\n  }\n  ariaInvalid(value: Attribute<State, string>) {\n    return this.attr('aria-invalid', value)\n  }\n  ariaKeyShortcuts(value: Attribute<State, string>) {\n    return this.attr('aria-keyshortcuts', value)\n  }\n  ariaLabel(value: Attribute<State, string>) {\n    return this.attr('aria-label', value)\n  }\n  ariaLabelledBy(value: Attribute<State, string>) {\n    return this.attr('aria-labelledby', value)\n  }\n  ariaLevel(value: Attribute<State, number>) {\n    return this.attr('aria-level', mapAttribute(value, String))\n  }\n  ariaLive(value: Attribute<State, 'assertive' | 'off' | 'polite'>) {\n    return this.attr('aria-live', value)\n  }\n  ariaModal(value: Attribute<State, boolean>) {\n    return this.attr('aria-modal', mapAttribute(value, booleanToString))\n  }\n  ariaMultiLine(value: Attribute<State, boolean>) {\n    return this.attr('aria-multiline', mapAttribute(value, booleanToString))\n  }\n  ariaMultiSelectable(value: Attribute<State, boolean>) {\n    return this.attr(\n      'aria-multiselectable',\n      mapAttribute(value, booleanToString)\n    )\n  }\n  ariaOrientation(value: Attribute<State, 'horizontal' | 'vertical'>) {\n    return this.attr('aria-orientation', value)\n  }\n  ariaOwns(value: Attribute<State, string>) {\n    return this.attr('aria-owns', value)\n  }\n  ariaPlaceHolder(value: Attribute<State, string>) {\n    return this.attr('aria-placeholder', value)\n  }\n  ariaPointSet(value: Attribute<State, number>) {\n    return this.attr('aria-pointset', mapAttribute(value, String))\n  }\n  ariaPosInSet(value: Attribute<State, string>) {\n    return this.attr('aria-posinset', value)\n  }\n  ariaPressed(\n    value: Attribute<State, 'true' | 'false' | 'mixed' | true | false>\n  ) {\n    return this.attr(\n      'aria-pressed',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaReadonly(value: Attribute<State, boolean>) {\n    return this.attr('aria-readonly', mapAttribute(value, booleanToString))\n  }\n  ariaRequired(value: Attribute<State, boolean>) {\n    return this.attr('aria-required', mapAttribute(value, booleanToString))\n  }\n  ariaRelevant(\n    value: Attribute<\n      State,\n      'addition' | 'additions text' | 'all' | 'removals' | 'text'\n    >\n  ) {\n    return this.attr('aria-relevant', value)\n  }\n  ariaRoleDescription(value: Attribute<State, string>) {\n    return this.attr('aria-roledescription', value)\n  }\n  ariaRowCount(value: Attribute<State, number>) {\n    return this.attr('aria-rowcount', mapAttribute(value, String))\n  }\n  ariaRowIndex(value: Attribute<State, number>) {\n    return this.attr('aria-rowindex', mapAttribute(value, String))\n  }\n  ariaRowSpan(value: Attribute<State, number>) {\n    return this.attr('aria-rowspan', mapAttribute(value, String))\n  }\n  ariaSelected(value: Attribute<State, boolean>) {\n    return this.attr('aria-selected', mapAttribute(value, booleanToString))\n  }\n  ariaSetSize(value: Attribute<State, number>) {\n    return this.attr('aria-setsize', mapAttribute(value, String))\n  }\n  ariaSort(\n    value: Attribute<State, 'ascending' | 'descending' | 'none' | 'other'>\n  ) {\n    return this.attr('aria-sort', value)\n  }\n  ariaValueMax(value: Attribute<State, number>) {\n    return this.attr('aria-valuemax', mapAttribute(value, String))\n  }\n  ariaValueMin(value: Attribute<State, number>) {\n    return this.attr('aria-valuemin', mapAttribute(value, String))\n  }\n  ariaValueNow(value: Attribute<State, number>) {\n    return this.attr('aria-valuenow', mapAttribute(value, String))\n  }\n  ariaValueText(value: Attribute<State, string>) {\n    return this.attr('aria-valuetext', value)\n  }\n\n  // event shortcuts\n  onAbort(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('abort', handler as EventHandler<State, Action>)\n  }\n  onAutoComplete(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('autocomplete', handler as EventHandler<State, Action>)\n  }\n  onAutoCompleteError(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle(\n      'autocompleteerror',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onBlur(handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined) {\n    return this.handle('blur', handler as EventHandler<State, Action>)\n  }\n  onCancel(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('cancel', handler as EventHandler<State, Action>)\n  }\n  onChange(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('change', handler as EventHandler<State, Action>)\n  }\n  onClick(handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined) {\n    return this.handle('click', handler as EventHandler<State, Action>)\n  }\n  onCompositionEnd(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle('compositionend', handler as EventHandler<State, Action>)\n  }\n  onCompositionStart(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle(\n      'compositionstart',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onCompositionUpdate(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle(\n      'compositionupdate',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onContextMenu(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('contextmenu', handler as EventHandler<State, Action>)\n  }\n  onDblClick(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('dblclick', handler as EventHandler<State, Action>)\n  }\n  onDrag(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('drag', handler as EventHandler<State, Action>)\n  }\n  onDragEnd(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('dragend', handler as EventHandler<State, Action>)\n  }\n  onDragEnter(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragenter', handler as EventHandler<State, Action>)\n  }\n  onDragExit(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragexit', handler as EventHandler<State, Action>)\n  }\n  onDragLeave(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragleave', handler as EventHandler<State, Action>)\n  }\n  onDragOver(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragover', handler as EventHandler<State, Action>)\n  }\n  onDragStart(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragstart', handler as EventHandler<State, Action>)\n  }\n  onDrop(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('drop', handler as EventHandler<State, Action>)\n  }\n  onError(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('error', handler as EventHandler<State, Action>)\n  }\n  onFocus(handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined) {\n    return this.handle('focus', handler as EventHandler<State, Action>)\n  }\n  onFocusIn(\n    handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined\n  ) {\n    return this.handle('focusin', handler as EventHandler<State, Action>)\n  }\n  onFocusOut(\n    handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined\n  ) {\n    return this.handle('focusout', handler as EventHandler<State, Action>)\n  }\n  onInput(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('input', handler as EventHandler<State, Action>)\n  }\n  onInvalid(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('invalid', handler as EventHandler<State, Action>)\n  }\n  onKeyDown(\n    handler: EventHandlerTE<State, Action, KeyboardEvent, El> | undefined\n  ) {\n    return this.handle('keydown', handler as EventHandler<State, Action>)\n  }\n  onKeyUp(\n    handler: EventHandlerTE<State, Action, KeyboardEvent, El> | undefined\n  ) {\n    return this.handle('keyup', handler as EventHandler<State, Action>)\n  }\n  onLoad(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('load', handler as EventHandler<State, Action>)\n  }\n  onMouseDown(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mousedown', handler as EventHandler<State, Action>)\n  }\n  onMouseEnter(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseenter', handler as EventHandler<State, Action>)\n  }\n  onMouseLeave(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseleave', handler as EventHandler<State, Action>)\n  }\n  onMouseMove(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mousemove', handler as EventHandler<State, Action>)\n  }\n  onMouseOut(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseout', handler as EventHandler<State, Action>)\n  }\n  onMouseOver(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseover', handler as EventHandler<State, Action>)\n  }\n  onMouseUp(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseup', handler as EventHandler<State, Action>)\n  }\n  onReset(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('reset', handler as EventHandler<State, Action>)\n  }\n  onScroll(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('scroll', handler as EventHandler<State, Action>)\n  }\n  onSelect(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('select', handler as EventHandler<State, Action>)\n  }\n  onShow(handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined) {\n    return this.handle('show', handler as EventHandler<State, Action>)\n  }\n  onSubmit(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('submit', handler as EventHandler<State, Action>)\n  }\n  onTouchCancel(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchcancel', handler as EventHandler<State, Action>)\n  }\n  onTouchEnd(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchend', handler as EventHandler<State, Action>)\n  }\n  onTouchMove(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchmove', handler as EventHandler<State, Action>)\n  }\n  onTouchStart(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchstart', handler as EventHandler<State, Action>)\n  }\n  onWheel(handler: EventHandlerTE<State, Action, WheelEvent, El> | undefined) {\n    return this.handle('wheel', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class SVGGraphicsElementBuilder<\n  State,\n  Action,\n  Query,\n  El extends SVGGraphicsElement\n> extends SVGElementBuilder<State, Action, Query, El> {}\n\nexport class ComponentSVGBuilder<State, Action, Query>\n  extends BaseSVGBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _delayed = false\n  private _equals: undefined | ((a: State, b: State) => boolean)\n  constructor(readonly reducer: (state: State, action: Action) => State) {\n    super()\n  }\n  Equals(equals: undefined | ((a: State, b: State) => boolean)) {\n    if (equals !== undefined) {\n      this._equals = equals\n    }\n    return this\n  }\n  Delayed(delayed: undefined | boolean) {\n    if (delayed !== undefined) {\n      this._delayed = delayed\n    }\n    return this\n  }\n  build() {\n    return new ComponentTemplate<State, Action, Query>(\n      this._delayed,\n      this.reducer,\n      this._equals,\n      this._children\n    )\n  }\n}\n\nexport class FragmentSVGBuilder<State, Action, Query>\n  extends BaseSVGBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  build() {\n    return new FragmentSVGTemplate<State, Action, Query>(this._children)\n  }\n}\n\nexport class MapActionSVGBuilder<State, Action, ActionB, Query>\n  extends BaseSVGBuilder<State, ActionB, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(protected map: DerivedValue<ActionB, Action>) {\n    super()\n  }\n  build() {\n    return new MapActionTemplate<State, Action, ActionB, Query>(\n      this.map,\n      this._children\n    )\n  }\n}\n\nexport class MapQuerySVGBuilder<State, Action, Query, QueryB>\n  extends BaseSVGBuilder<State, Action, QueryB>\n  implements IBuilder<State, Action, Query> {\n  constructor(protected map: DerivedValue<Query, QueryB>) {\n    super()\n  }\n  build() {\n    return new MapQueryTemplate<State, Action, Query, QueryB>(\n      this.map,\n      this._children\n    )\n  }\n}\n\nexport class MapStateSVGBuilder<State, StateB, Action, Query>\n  extends BaseSVGBuilder<StateB, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _orElse: FragmentSVGBuilder<State, Action, Query> | undefined\n  private _equals: undefined | ((a: StateB, b: StateB) => boolean)\n  constructor(protected map: Attribute<State, StateB>) {\n    super()\n  }\n  Equals(equals: undefined | ((a: StateB, b: StateB) => boolean)) {\n    if (equals !== undefined) {\n      this._equals = equals\n    }\n    return this\n  }\n  OrElse(init: (builder: FragmentSVGBuilder<State, Action, Query>) => void) {\n    this._orElse = new FragmentSVGBuilder<State, Action, Query>()\n    init(this._orElse!)\n    return this\n  }\n  build() {\n    return new MapStateTemplate<State, StateB, Action, Query>(\n      this.map,\n      (this._orElse && this._orElse.build()) ?? text(''),\n      this._equals,\n      this._children\n    )\n  }\n}\n\nexport class PortalSVGBuilder<State, Action, Query>\n  extends BaseSVGBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(readonly appendChild: (doc: Document, node: Node) => void) {\n    super()\n  }\n  build() {\n    return new PortalTemplate<State, Action, Query>(\n      this.appendChild,\n      this._children\n    )\n  }\n}\n\nexport class SimpleComponentSVGBuilder<State, Query>\n  extends BaseSVGBuilder<State, State, Query>\n  implements IBuilder<State, State, Query> {\n  public _delayed = false\n  constructor() {\n    super()\n  }\n  Delayed(delayed: undefined | boolean) {\n    if (delayed !== undefined) {\n      this._delayed = delayed\n    }\n    return this\n  }\n  build() {\n    return new SimpleComponentTemplate<State, Query>(\n      this._delayed,\n      this._children\n    )\n  }\n}\n\nexport class UntilSVGBuilder<State, StateB, Action, Query>\n  extends BaseSVGBuilder<StateB, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(\n    readonly next: DerivedOrLiteralValue<\n      { state: State; index: number },\n      StateB\n    >\n  ) {\n    super()\n  }\n  build() {\n    return new UntilTemplate<State, StateB, Action, Query>(\n      this.next,\n      this._children\n    )\n  }\n}\n\nfunction initBuilder<\n  T extends IBuilder<any, any, any>,\n  P extends BaseSVGBuilder<any, any, any>\n>(builder: T, init: undefined | ((builder: T) => void), parent: P): P {\n  init && init(builder)\n  return parent.Append(builder.build())\n}\n\nexport class SVGAnchorElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGAElement> {\n  constructor() {\n    super('a')\n  }\n  // download(filename: Attribute<State, string>): this {\n  //   return this.attr('download', filename)\n  // }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  hreflang(lang: Attribute<State, string>): this {\n    return this.attr('hreflang', lang)\n  }\n  // ping(url: Attribute<State, ListValue<string>>): this {\n  //   return this.attr('ping', mapAttribute(url, spaceSeparatedToString))\n  // }\n  // rel(value: Attribute<State, ListValue<string>>): this {\n  //   return this.attr('rel', mapAttribute(value, spaceSeparatedToString))\n  // }\n  target(name: Attribute<State, string>): this {\n    return this.attr('target', name)\n  }\n  type(name: Attribute<State, string>): this {\n    return this.attr('type', name)\n  }\n}\n\nexport class SVGCircleElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGCircleElement> {\n  constructor() {\n    super('circle')\n  }\n  cx(value: Attribute<State, number | string>): this {\n    return this.attr('cx', mapAttribute(value, String))\n  }\n  cy(value: Attribute<State, number | string>): this {\n    return this.attr('cy', mapAttribute(value, String))\n  }\n  r(value: Attribute<State, number | string>): this {\n    return this.attr('r', mapAttribute(value, String))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\n\nexport class SVGEllipseElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGEllipseElement> {\n  constructor() {\n    super('ellipse')\n  }\n  cx(value: Attribute<State, number | string>): this {\n    return this.attr('cx', mapAttribute(value, String))\n  }\n  cy(value: Attribute<State, number | string>): this {\n    return this.attr('cy', mapAttribute(value, String))\n  }\n  rx(value: Attribute<State, number | string>): this {\n    return this.attr('rx', mapAttribute(value, String))\n  }\n  ry(value: Attribute<State, number | string>): this {\n    return this.attr('ry', mapAttribute(value, String))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\n\nexport type BlendMode =\n  | 'normal'\n  | 'multiply'\n  | 'screen'\n  | 'overlay'\n  | 'darken'\n  | 'lighten'\n  | 'color-dodge'\n  | 'color-burn'\n  | 'hard-light'\n  | 'soft-light'\n  | 'difference'\n  | 'exclusion'\n  | 'hue'\n  | 'saturation'\n  | 'color'\n  | 'luminosity'\n\nexport class SVGFEBlendElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEBlendElement> {\n  constructor() {\n    super('feBlend')\n  }\n  in1(value: Attribute<State, string>): this {\n    return this.attr('in1', value)\n  }\n  in2(value: Attribute<State, string>): this {\n    return this.attr('in2', value)\n  }\n  mode(value: Attribute<State, BlendMode>): this {\n    return this.attr('mode', value)\n  }\n}\n\nexport class SVGFEColorMatrixElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEColorMatrixElement> {\n  constructor() {\n    super('feColorMatrix')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  type(\n    value: Attribute<\n      State,\n      'matrix' | 'saturate' | 'hueRotate' | 'luminanceToAlpha'\n    >\n  ): this {\n    return this.attr('type', value)\n  }\n  values(\n    value: Attribute<\n      State,\n      | number\n      | [\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number\n        ]\n    >\n  ): this {\n    return this.attr(\n      'mode',\n      mapAttribute(value, v => (Array.isArray(v) ? v.join(' ') : String(v)))\n    )\n  }\n}\n\nexport class SVGFEComponentTransferElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEColorMatrixElement> {\n  constructor() {\n    super('feComponentTransfer')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n}\n\nexport class SVGFeCompositeElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEColorMatrixElement> {\n  constructor() {\n    super('feComposite')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  in2(value: Attribute<State, string>): this {\n    return this.attr('in2', value)\n  }\n  operator(\n    value: Attribute<\n      State,\n      'over' | 'in' | 'out' | 'atop' | 'xor' | 'lighter' | 'arithmetic'\n    >\n  ): this {\n    return this.attr('operator', value)\n  }\n  k1(value: Attribute<State, number>): this {\n    return this.attr('k1', mapAttribute(value, String))\n  }\n  k2(value: Attribute<State, number>): this {\n    return this.attr('k2', mapAttribute(value, String))\n  }\n  k3(value: Attribute<State, number>): this {\n    return this.attr('k3', mapAttribute(value, String))\n  }\n  k4(value: Attribute<State, number>): this {\n    return this.attr('k4', mapAttribute(value, String))\n  }\n}\n\nexport class SVGFEConvolveMatrixElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEConvolveMatrixElement> {\n  constructor() {\n    super('feConvolveMatrix')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  order(value: Attribute<State, number | string>): this {\n    return this.attr('order', mapAttribute(value, String))\n  }\n  kernelMatrix(value: Attribute<State, number[]>): this {\n    return this.attr('kernelMatrix', mapAttribute(value, numbersListToString))\n  }\n  divisor(value: Attribute<State, number>): this {\n    return this.attr('divisor', mapAttribute(value, String))\n  }\n  bias(value: Attribute<State, number>): this {\n    return this.attr('bias', mapAttribute(value, String))\n  }\n  targetX(value: Attribute<State, number>): this {\n    return this.attr('targetX', mapAttribute(value, String))\n  }\n  targetY(value: Attribute<State, number>): this {\n    return this.attr('targetY', mapAttribute(value, String))\n  }\n  edgeMode(value: Attribute<State, 'duplicate' | 'wrap' | 'none'>): this {\n    return this.attr('edgeMode', value)\n  }\n  preserveAlpha(value: Attribute<State, boolean>): this {\n    return this.attr('preserveAlpha', mapAttribute(value, booleanToString))\n  }\n}\n\nexport class SVGFEDiffuseLightingElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEColorMatrixElement> {\n  constructor() {\n    super('feDiffuseLighting')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  surfaceScale(value: Attribute<State, number>): this {\n    return this.attr('surfaceScale', mapAttribute(value, String))\n  }\n  diffuseConstant(value: Attribute<State, number>): this {\n    return this.attr('diffuseConstant', mapAttribute(value, String))\n  }\n}\n\nexport class SVGFEDisplacementMapElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEDisplacementMapElement> {\n  constructor() {\n    super('feDisplacementMap')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  in2(value: Attribute<State, string>): this {\n    return this.attr('in2', value)\n  }\n  scale(value: Attribute<State, number>): this {\n    return this.attr('scale', mapAttribute(value, String))\n  }\n  xChannelSelector(value: Attribute<State, 'R' | 'G' | 'B' | 'A'>): this {\n    return this.attr('xChannelSelector', value)\n  }\n  yChannelSelector(value: Attribute<State, 'R' | 'G' | 'B' | 'A'>): this {\n    return this.attr('yChannelSelector', value)\n  }\n}\n\nexport class SVGFEDistantLightElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEDistantLightElement> {\n  constructor() {\n    super('feDistantLight')\n  }\n  azimuth(value: Attribute<State, number>): this {\n    return this.attr('azimuth', mapAttribute(value, String))\n  }\n  elevation(value: Attribute<State, number>): this {\n    return this.attr('elevation', mapAttribute(value, String))\n  }\n}\nexport class SVGFEFloodElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFloodElement> {\n  constructor() {\n    super('feFlood')\n  }\n  floodColor(value: Attribute<State, string>): this {\n    return this.attr('flood-color', value)\n  }\n  floodOpacity(value: Attribute<State, number | string>): this {\n    return this.attr('flood-opacity', mapAttribute(value, String))\n  }\n}\nexport class SVGFEFuncAElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFuncAElement> {\n  constructor() {\n    super('feFuncA')\n  }\n}\nexport class SVGFEFuncBElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFuncBElement> {\n  constructor() {\n    super('feFuncB')\n  }\n}\nexport class SVGFEFuncGElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFuncGElement> {\n  constructor() {\n    super('feFuncG')\n  }\n}\nexport class SVGFEFuncRElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFuncRElement> {\n  constructor() {\n    super('feFuncR')\n  }\n}\nexport class SVGFEGaussianBlurElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEGaussianBlurElement> {\n  constructor() {\n    super('feGaussianBlur')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  stdDeviation(value: Attribute<State, number | string>): this {\n    return this.attr('stdDeviation', mapAttribute(value, String))\n  }\n  edgeMode(value: Attribute<State, 'duplicate' | 'wrap' | 'none'>): this {\n    return this.attr('edgeMode', value)\n  }\n}\nexport class SVGFEImageElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEImageElement> {\n  constructor() {\n    super('feImage')\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n}\nexport class SVGFEMergeElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEMergeElement> {\n  constructor() {\n    super('feMerge')\n  }\n}\nexport class SVGFEMergeNodeElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEMergeNodeElement> {\n  constructor() {\n    super('feMergeNode')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n}\nexport class SVGFEMorphologyElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEMorphologyElement> {\n  constructor() {\n    super('feMorphology')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  operator(\n    value: Attribute<\n      State,\n      'over' | 'in' | 'out' | 'atop' | 'xor' | 'lighter' | 'arithmetic'\n    >\n  ): this {\n    return this.attr('operator', value)\n  }\n  radius(value: Attribute<State, number | string>): this {\n    return this.attr('radius', mapAttribute(value, String))\n  }\n}\nexport class SVGFEOffsetElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEOffsetElement> {\n  constructor() {\n    super('feOffset')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  dx(value: Attribute<State, number>): this {\n    return this.attr('dx', mapAttribute(value, String))\n  }\n  dy(value: Attribute<State, number>): this {\n    return this.attr('dy', mapAttribute(value, String))\n  }\n}\nexport class SVGFEPointLightElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEPointLightElement> {\n  constructor() {\n    super('fePointLight')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  z(value: Attribute<State, number | string>): this {\n    return this.attr('z', mapAttribute(value, String))\n  }\n}\nexport class SVGFESpecularLightingElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<\n  State,\n  Action,\n  Query,\n  SVGFESpecularLightingElement\n> {\n  constructor() {\n    super('feSpecularLighting')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  surfaceScale(value: Attribute<State, number>): this {\n    return this.attr('surfaceScale', mapAttribute(value, String))\n  }\n  specularConstant(value: Attribute<State, number>): this {\n    return this.attr('specularConstant', mapAttribute(value, String))\n  }\n  specularExponent(value: Attribute<State, number>): this {\n    return this.attr('specularExponent', mapAttribute(value, String))\n  }\n}\nexport class SVGFESpotLightElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFESpotLightElement> {\n  constructor() {\n    super('feSpotLight')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  z(value: Attribute<State, number | string>): this {\n    return this.attr('z', mapAttribute(value, String))\n  }\n  pointsAtX(value: Attribute<State, number | string>): this {\n    return this.attr('pointsAtX', mapAttribute(value, String))\n  }\n  pointsAtY(value: Attribute<State, number | string>): this {\n    return this.attr('pointsAtY', mapAttribute(value, String))\n  }\n  pointsAtZ(value: Attribute<State, number | string>): this {\n    return this.attr('pointsAtZ', mapAttribute(value, String))\n  }\n  specularComponent(value: Attribute<State, number | string>): this {\n    return this.attr('specularComponent', mapAttribute(value, String))\n  }\n  limitingConeAngle(value: Attribute<State, number | string>): this {\n    return this.attr('limitingConeAngle', mapAttribute(value, String))\n  }\n}\nexport class SVGFETileElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFETileElement> {\n  constructor() {\n    super('feTile')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n}\nexport class SVGFETurbulenceElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFETurbulenceElement> {\n  constructor() {\n    super('feTurbulence')\n  }\n  baseFrequency(value: Attribute<State, number | string>): this {\n    return this.attr('baseFrequency', mapAttribute(value, String))\n  }\n  numOctaves(value: Attribute<State, number>): this {\n    return this.attr('numOctaves', mapAttribute(value, String))\n  }\n  seed(value: Attribute<State, number>): this {\n    return this.attr('seed', mapAttribute(value, String))\n  }\n  stitchTiles(value: Attribute<State, 'noStitch' | 'stitch'>): this {\n    return this.attr('stitchTiles', value)\n  }\n  type(value: Attribute<State, 'fractalNoise' | 'turbulence'>): this {\n    return this.attr('type', value)\n  }\n}\n\nexport class SVGFilterElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFilterElement> {\n  constructor() {\n    super('filter')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n  filterUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('filterUnits', value)\n  }\n  primitiveUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('primitiveUnits', value)\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n}\nexport class SVGForeignObjectElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGForeignObjectElement> {\n  constructor() {\n    super('foreignObject')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\nexport class SVGGElementBuilder<State, Action, Query> extends SVGElementBuilder<\n  State,\n  Action,\n  Query,\n  SVGGElement\n> {\n  constructor() {\n    super('g')\n  }\n}\nexport class SVGImageElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGImageElement> {\n  constructor() {\n    super('image')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n}\nexport class SVGLineElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGLineElement> {\n  constructor() {\n    super('line')\n  }\n  x1(value: Attribute<State, number | string>): this {\n    return this.attr('x1', mapAttribute(value, String))\n  }\n  y1(value: Attribute<State, number | string>): this {\n    return this.attr('y1', mapAttribute(value, String))\n  }\n  x2(value: Attribute<State, number | string>): this {\n    return this.attr('x2', mapAttribute(value, String))\n  }\n  y2(value: Attribute<State, number | string>): this {\n    return this.attr('y2', mapAttribute(value, String))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\nexport class SVGLinearGradientElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGLinearGradientElement> {\n  constructor() {\n    super('linearGradient')\n  }\n  gradientUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('gradientUnits', value)\n  }\n  gradientTransform(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr(\n      'gradientTransform',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n  spreadMethod(value: Attribute<State, 'pad' | 'reflect' | 'repeat'>): this {\n    return this.attr('spreadMethod', value)\n  }\n  x1(value: Attribute<State, number | string>): this {\n    return this.attr('x1', mapAttribute(value, String))\n  }\n  y1(value: Attribute<State, number | string>): this {\n    return this.attr('y1', mapAttribute(value, String))\n  }\n  x2(value: Attribute<State, number | string>): this {\n    return this.attr('x2', mapAttribute(value, String))\n  }\n  y2(value: Attribute<State, number | string>): this {\n    return this.attr('y2', mapAttribute(value, String))\n  }\n}\nexport class SVGMarkerElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGMarkerElement> {\n  constructor() {\n    super('marker')\n  }\n  markerHeight(value: Attribute<State, number | string>): this {\n    return this.attr('markerHeight', mapAttribute(value, String))\n  }\n  markerUnits(value: Attribute<State, 'userSpaceOnUse' | 'strokeWidth'>): this {\n    return this.attr('markerUnits', value)\n  }\n  markerWidth(value: Attribute<State, number | string>): this {\n    return this.attr('markerWidth', mapAttribute(value, String))\n  }\n  orient(value: Attribute<State, string>): this {\n    return this.attr('orient', value)\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n  refX(value: Attribute<State, string>): this {\n    return this.attr('refX', value)\n  }\n  refY(value: Attribute<State, string>): this {\n    return this.attr('refY', value)\n  }\n  viewBox(value: Attribute<State, [number, number, number, number]>): this {\n    return this.attr('viewBox', mapAttribute(value, numbersListToString))\n  }\n}\nexport class SVGMaskElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGMaskElement> {\n  constructor() {\n    super('mask')\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  maskContentUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('maskContentUnits', value)\n  }\n  maskUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('maskUnits', value)\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\nexport class SVGMetadataElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGMetadataElement> {\n  constructor() {\n    super('metadata')\n  }\n}\nexport class SVGPathElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGPathElement> {\n  constructor() {\n    super('path')\n  }\n  d(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr('d', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\nexport class SVGPatternElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGPatternElement> {\n  constructor() {\n    super('pattern')\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n  patternContentUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('patternContentUnits', value)\n  }\n  patternTransform(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr(\n      'patternTransform',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  patternUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('patternUnits', value)\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n  viewBox(value: Attribute<State, [number, number, number, number]>): this {\n    return this.attr('viewBox', mapAttribute(value, numbersListToString))\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\nexport class SVGPolygonElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGPolygonElement> {\n  constructor() {\n    super('polygon')\n  }\n  points(value: Attribute<State, [number, number][]>): this {\n    return this.attr('points', mapAttribute(value, numberPairsListToString))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\nexport class SVGPolylineElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGPolylineElement> {\n  constructor() {\n    super('polyline')\n  }\n  points(value: Attribute<State, [number, number][]>): this {\n    return this.attr('points', mapAttribute(value, numberPairsListToString))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\nexport class SVGRadialGradientElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGRadialGradientElement> {\n  constructor() {\n    super('radialGradient')\n  }\n  cx(value: Attribute<State, number | string>): this {\n    return this.attr('cx', mapAttribute(value, String))\n  }\n  cy(value: Attribute<State, number | string>): this {\n    return this.attr('cy', mapAttribute(value, String))\n  }\n  fr(value: Attribute<State, number | string>): this {\n    return this.attr('fr', mapAttribute(value, String))\n  }\n  fx(value: Attribute<State, number | string>): this {\n    return this.attr('fx', mapAttribute(value, String))\n  }\n  fy(value: Attribute<State, number | string>): this {\n    return this.attr('fy', mapAttribute(value, String))\n  }\n  gradientUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('gradientUnits', value)\n  }\n  gradientTransform(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr(\n      'gradientTransform',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  r(value: Attribute<State, number | string>): this {\n    return this.attr('r', mapAttribute(value, String))\n  }\n  spreadMethod(value: Attribute<State, 'pad' | 'reflect' | 'repeat'>): this {\n    return this.attr('spreadMethod', value)\n  }\n}\nexport class SVGScriptElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGScriptElement> {\n  constructor() {\n    super('script')\n  }\n  crossorigin(value: Attribute<State, string>): this {\n    return this.attr('crossorigin', value)\n  }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  type(value: Attribute<State, string>): this {\n    return this.attr('type', value)\n  }\n}\nexport class SVGStopElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGStopElement> {\n  constructor() {\n    super('stop')\n  }\n  offset(value: Attribute<State, number | string>): this {\n    return this.attr('offset', mapAttribute(value, String))\n  }\n  stopColor(value: Attribute<State, string>): this {\n    return this.attr('stop-color', value)\n  }\n  stopOpacity(value: Attribute<State, number>): this {\n    return this.attr('stop-opacity', mapAttribute(value, String))\n  }\n}\nexport class SVGStyleElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGStyleElement> {\n  constructor() {\n    super('style')\n  }\n  type(value: Attribute<State, string>): this {\n    return this.attr('type', value)\n  }\n  media(value: Attribute<State, string>): this {\n    return this.attr('media', value)\n  }\n  title(value: Attribute<State, string>): this {\n    return this.attr('title', value)\n  }\n}\nexport class SVGSVGElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGGraphicsElementBuilder<State, Action, Query, SVGSVGElement> {\n  constructor() {\n    super('svg')\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n  viewBox(value: Attribute<State, [number, number, number, number]>): this {\n    return this.attr('viewBox', mapAttribute(value, numbersListToString))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n}\nexport class SVGSwitchElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGSwitchElement> {\n  constructor() {\n    super('switch')\n  }\n}\nexport class SVGSymbolElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGSymbolElement> {\n  constructor() {\n    super('symbol')\n  }\n}\nexport class SVGTextElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGTextElement> {\n  constructor() {\n    super('text')\n  }\n  x(value: Attribute<State, number>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  dx(value: Attribute<State, number>): this {\n    return this.attr('dx', mapAttribute(value, String))\n  }\n  dy(value: Attribute<State, number>): this {\n    return this.attr('dy', mapAttribute(value, String))\n  }\n  rotate(value: Attribute<State, number[]>): this {\n    return this.attr('rotate', mapAttribute(value, numbersListToString))\n  }\n  lengthAdjust(value: Attribute<State, 'spacing' | 'spacingAndGlyphs'>): this {\n    return this.attr('lengthAdjust', value)\n  }\n  textLength(value: Attribute<State, number | string>): this {\n    return this.attr('textLength', mapAttribute(value, String))\n  }\n  text(value: DerivedOrLiteralValue<State, string>): this {\n    this._children.push(text(value))\n    return this\n  }\n}\nexport class SVGTextPathElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGTextPathElement> {\n  constructor() {\n    super('textPath')\n  }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  lengthAdjust(value: Attribute<State, 'spacing' | 'spacingAndGlyphs'>): this {\n    return this.attr('lengthAdjust', value)\n  }\n  method(value: Attribute<State, 'align' | 'stretch'>): this {\n    return this.attr('method', value)\n  }\n  path(value: Attribute<State, string>): this {\n    return this.attr('path', value)\n  }\n  side(value: Attribute<State, 'left' | 'right'>): this {\n    return this.attr('side', value)\n  }\n  spacing(value: Attribute<State, 'auto' | 'exact'>): this {\n    return this.attr('spacing', value)\n  }\n  start(value: Attribute<State, number | string>): this {\n    return this.attr('start', mapAttribute(value, String))\n  }\n  offset(value: Attribute<State, number | string>): this {\n    return this.attr('offset', mapAttribute(value, String))\n  }\n  text(value: DerivedOrLiteralValue<State, string>): this {\n    this._children.push(text(value))\n    return this\n  }\n  textLength(value: Attribute<State, number | string>): this {\n    return this.attr('textLength', mapAttribute(value, String))\n  }\n}\nexport class SVGTitleElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGTitleElement> {\n  constructor() {\n    super('title')\n  }\n}\nexport class SVGTSpanElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGTSpanElement> {\n  constructor() {\n    super('tSpan')\n  }\n  x(value: Attribute<State, number>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  dx(value: Attribute<State, number>): this {\n    return this.attr('dx', mapAttribute(value, String))\n  }\n  dy(value: Attribute<State, number>): this {\n    return this.attr('dy', mapAttribute(value, String))\n  }\n  rotate(value: Attribute<State, number[]>): this {\n    return this.attr('rotate', mapAttribute(value, numbersListToString))\n  }\n  lengthAdjust(value: Attribute<State, 'spacing' | 'spacingAndGlyphs'>): this {\n    return this.attr('lengthAdjust', value)\n  }\n  textLength(value: Attribute<State, number | string>): this {\n    return this.attr('textLength', mapAttribute(value, String))\n  }\n  text(value: DerivedOrLiteralValue<State, string>): this {\n    this._children.push(text(value))\n    return this\n  }\n}\nexport class SVGUseElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGUseElement> {\n  constructor() {\n    super('use')\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n  x(value: Attribute<State, number>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\nexport class SVGViewElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGViewElement> {\n  constructor() {\n    super('view')\n  }\n}\n\nexport class SVGRectElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGRectElement> {\n  constructor() {\n    super('rect')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  rx(value: Attribute<State, number | string>): this {\n    return this.attr('rx', mapAttribute(value, String))\n  }\n  ry(value: Attribute<State, number | string>): this {\n    return this.attr('ry', mapAttribute(value, String))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\n","import { DOMTemplate, DOMChild } from '../template'\nimport { makeCreateElement } from './dom'\nimport { DerivedOrLiteralValue, DerivedValue } from 'tempo-core/lib/value'\nimport { text } from './text'\nimport {\n  Attribute,\n  mapAttribute,\n  EventHandlerTE,\n  EventHandler,\n  resolveAttribute\n} from '../value'\nimport { ComponentTemplate } from './component'\nimport { keys } from 'tempo-std/lib/objects'\nimport { DOMContext } from '../context'\nimport { makeEmptyLifecycle, MakeLifecycle } from '../lifecycle'\nimport { DOMElement } from './element'\nimport { MapStateTemplate } from './map_state'\nimport { FragmentTemplate } from './fragment'\nimport { MapActionTemplate } from './map_action'\nimport { MapQueryTemplate } from './map_query'\nimport { UntilTemplate } from './until'\nimport { SimpleComponentTemplate } from './simple_component'\nimport { PortalTemplate } from './portal'\nimport { LazyTemplate } from './lazy'\nimport { MatchBoolTemplate } from './match_bool_template'\nimport { HoldF, HoldStateTemplate } from './hold_state'\nimport {\n  IBuilder,\n  extractLiterals,\n  extractDerived,\n  ListOrRecordValue,\n  listOrRecordToSpaceSeparated,\n  toggleToString,\n  booleanToString,\n  stylesToString,\n  lostOrRecordToCommaSeparated,\n  DOMBuilder\n} from './dom_builder'\nimport { AdapterTemplate, PropagateArg } from './adapter'\nimport { SVGSVGElementBuilder } from './svg_builder'\n\nexport class BaseHTMLBuilder<State, Action, Query> extends DOMBuilder<\n  State,\n  Action,\n  Query\n> {\n  El(\n    init: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void = () => {}\n  ): this {\n    const builder = El<State, Action, Query>(name)\n    init(builder)\n    this._children.push(builder.build())\n    return this\n  }\n  text(value: DerivedOrLiteralValue<State, string>): this {\n    this._children.push(text(value))\n    return this\n  }\n\n  // transform\n  Adapter<StateB, ActionB>(props: {\n    bootstrapState: (outer: State) => StateB\n    mergeStates?: Attribute<\n      {\n        outerState: State\n        innerState: StateB\n      },\n      StateB\n    >\n    propagate?: (args: PropagateArg<State, StateB, Action, ActionB>) => void\n    child: ComponentTemplate<StateB, ActionB, Query>\n  }) {\n    return this.Append(\n      new AdapterTemplate(\n        props.bootstrapState,\n        props.mergeStates,\n        props.propagate || (() => undefined),\n        props.child\n      )\n    )\n  }\n\n  Component(\n    reducer: (state: State, action: Action) => State,\n    init: (builder: ComponentHTMLBuilder<State, Action, Query>) => void\n  ) {\n    const builder = new ComponentHTMLBuilder<State, Action, Query>(reducer)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  LocalAdapter(props: {\n    propagate?: (args: PropagateArg<State, State, Action, Action>) => void\n    child: ComponentTemplate<State, Action, Query>\n  }) {\n    return this.Append(\n      new AdapterTemplate(\n        state => state,\n        ({ outerState }) => outerState,\n        props.propagate || (() => undefined),\n        props.child\n      )\n    )\n  }\n\n  HoldState<StateB, StateC>(\n    holdf: HoldF<\n      State,\n      StateB,\n      StateC,\n      Action,\n      Query,\n      FragmentHTMLBuilder<StateC, Action, Query>\n    >\n  ): this {\n    return this.Append(\n      new HoldStateTemplate(\n        holdf,\n        new FragmentHTMLBuilder<StateC, Action, Query>()\n      )\n    )\n  }\n\n  MapState<StateB>(\n    map: (state: State) => StateB | undefined,\n    init: (builder: MapStateHTMLBuilder<State, StateB, Action, Query>) => void\n  ) {\n    const builder = new MapStateHTMLBuilder<State, StateB, Action, Query>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapField<Key extends keyof State>(\n    field: Key,\n    init: (\n      builder: MapStateHTMLBuilder<State, State[Key], Action, Query>\n    ) => void\n  ) {\n    return this.MapState<State[Key]>((v: State): State[Key] => v[field], init)\n  }\n\n  MapStateAndKeep<StateB>(\n    map: (state: State) => StateB | undefined,\n    init: (\n      builder: MapStateHTMLBuilder<State, [StateB, State], Action, Query>\n    ) => void\n  ) {\n    const builder = new MapStateHTMLBuilder<\n      State,\n      [StateB, State],\n      Action,\n      Query\n    >((state: State) => {\n      const inner = resolveAttribute(map)(state)\n      if (inner !== undefined) {\n        return [inner, state]\n      } else {\n        return undefined\n      }\n    })\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapAction<ActionB>(\n    map: DerivedValue<ActionB, Action>,\n    init: (builder: MapActionHTMLBuilder<State, Action, ActionB, Query>) => void\n  ) {\n    const builder = new MapActionHTMLBuilder<State, Action, ActionB, Query>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapQuery<QueryB>(\n    map: DerivedValue<Query, QueryB>,\n    init: (builder: MapQueryHTMLBuilder<State, Action, Query, QueryB>) => void\n  ) {\n    const builder = new MapQueryHTMLBuilder<State, Action, Query, QueryB>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MatchBool(props: {\n    condition: Attribute<State, boolean>\n    true: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n    false: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  }): this {\n    return this.Append(\n      new MatchBoolTemplate<State, Action, Query>(\n        props.condition,\n        props.true,\n        props.false\n      )\n    )\n  }\n\n  Lazy(\n    lazyf: () =>\n      | DOMTemplate<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  ) {\n    return this.Append(new LazyTemplate(lazyf))\n  }\n\n  ForEach(\n    init: (\n      builder: UntilHTMLBuilder<\n        State,\n        State extends any[] ? State[number] : never,\n        Action,\n        Query\n      >\n    ) => void\n  ): this {\n    return this.Until(\n      ({\n        state,\n        index\n      }: {\n        state: State\n        index: number\n      }): State extends any[] ? State[number] : never => (state as any)[index],\n      init\n    )\n  }\n\n  Fragment(init: (builder: FragmentHTMLBuilder<State, Action, Query>) => void) {\n    const builder = new FragmentHTMLBuilder<State, Action, Query>()\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  Iterate<Items extends any[]>(\n    map: DerivedValue<State, Items>,\n    init: (\n      builder: UntilHTMLBuilder<\n        [Items, State],\n        [Items[number], State, number],\n        Action,\n        Query\n      >\n    ) => void\n  ) {\n    return this.MapState<[Items, State]>(\n      (outer: State): [Items, State] | undefined => {\n        const items = resolveAttribute(map)(outer)\n        return items !== undefined ? [items, outer] : undefined\n      },\n      $ => {\n        $.Until<[Items[number], State, number]>(\n          ({ state: [items, state], index }) =>\n            items[index] && [items[index], state, index],\n          init\n        )\n      }\n    )\n  }\n\n  Portal(\n    appendChild: (doc: Document, node: Node) => void,\n    init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new PortalHTMLBuilder<State, Action, Query>(appendChild)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  PortalWithSelector(\n    selector: string,\n    init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => {\n      const el = doc.querySelector(selector)\n      if (!el) {\n        throw new Error(`selector doesn't match any element: \"${selector}\"`)\n      }\n      el.appendChild(node)\n    }, init)\n  }\n\n  HeadPortal(\n    init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => doc.head.appendChild(node), init)\n  }\n\n  BodyPortal(\n    init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => doc.body.appendChild(node), init)\n  }\n\n  // SimpleComponent(\n  //   init: (builder: SimpleComponentBuilder<State, Query>) => void\n  // ) {\n  //   const builder = new SimpleComponentBuilder<State, Query>()\n  //   init(builder)\n  //   return this.append(builder.build())\n  // }\n\n  Unless(\n    condition: DerivedValue<State, boolean>,\n    init: (builder: MapStateHTMLBuilder<State, State, Action, Query>) => void\n  ) {\n    return this.When(s => !condition(s), init)\n  }\n\n  Until<StateB>(\n    next: DerivedValue<{ state: State; index: number }, StateB>,\n    init: (builder: UntilHTMLBuilder<State, StateB, Action, Query>) => void\n  ) {\n    const builder = new UntilHTMLBuilder<State, StateB, Action, Query>(next)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  When(\n    condition: DerivedValue<State, boolean>,\n    init: (builder: MapStateHTMLBuilder<State, State, Action, Query>) => void\n  ) {\n    const builder = new MapStateHTMLBuilder<State, State, Action, Query>(s => {\n      if (condition(s)) {\n        return s\n      } else {\n        return undefined\n      }\n    })\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  // derived children\n  A(\n    init?: (builder: HTMLAnchorElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLAnchorElementBuilder<State, Action, Query>('a'),\n      init,\n      this\n    )\n  }\n  ABBR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('abbr'),\n      init,\n      this\n    )\n  }\n  ADDRESS(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('address'),\n      init,\n      this\n    )\n  }\n  AREA(\n    init?: (builder: HTMLAreaElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLAreaElementBuilder<State, Action, Query>('area'),\n      init,\n      this\n    )\n  }\n  ARTICLE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('article'),\n      init,\n      this\n    )\n  }\n  ASIDE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('aside'),\n      init,\n      this\n    )\n  }\n  AUDIO(\n    init?: (builder: HTMLAudioElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLAudioElementBuilder<State, Action, Query>('audio'),\n      init,\n      this\n    )\n  }\n  B(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('b'),\n      init,\n      this\n    )\n  }\n  BASE(\n    init?: (builder: HTMLBaseElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLBaseElementBuilder<State, Action, Query>('base'),\n      init,\n      this\n    )\n  }\n  BDI(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('bdi'),\n      init,\n      this\n    )\n  }\n  BDO(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('bdo'),\n      init,\n      this\n    )\n  }\n  BLOCKQUOTE(\n    init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLQuoteElementBuilder<State, Action, Query>('blockquote'),\n      init,\n      this\n    )\n  }\n  BODY(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLBodyElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLBodyElement>('body'),\n      init,\n      this\n    )\n  }\n  BR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLBRElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLBRElement>('br'),\n      init,\n      this\n    )\n  }\n  BUTTON(\n    init?: (builder: HTMLButtonElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLButtonElementBuilder<State, Action, Query>('button'),\n      init,\n      this\n    )\n  }\n  CANVAS(\n    init?: (builder: HTMLCanvasElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLCanvasElementBuilder<State, Action, Query>('canvas'),\n      init,\n      this\n    )\n  }\n  CAPTION(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableCaptionElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableCaptionElement>(\n        'caption'\n      ),\n      init,\n      this\n    )\n  }\n  CITE(\n    init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLQuoteElementBuilder<State, Action, Query>('cite'),\n      init,\n      this\n    )\n  }\n  CODE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('code'),\n      init,\n      this\n    )\n  }\n  COL(\n    init?: (builder: HTMLTableColElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTableColElementBuilder<State, Action, Query>('col'),\n      init,\n      this\n    )\n  }\n  COLGROUP(\n    init?: (builder: HTMLTableColElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTableColElementBuilder<State, Action, Query>('colgroup'),\n      init,\n      this\n    )\n  }\n  DATA(\n    init?: (builder: HTMLDataElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLDataElementBuilder<State, Action, Query>('data'),\n      init,\n      this\n    )\n  }\n  DATALIST(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLDataListElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLDataListElement>(\n        'datalist'\n      ),\n      init,\n      this\n    )\n  }\n  DD(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('dd'),\n      init,\n      this\n    )\n  }\n  DEL(\n    init?: (builder: HTMLModElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLModElementBuilder<State, Action, Query>('del'),\n      init,\n      this\n    )\n  }\n  DETAILS(\n    init?: (builder: HTMLDetailsElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLDetailsElementBuilder<State, Action, Query>('details'),\n      init,\n      this\n    )\n  }\n  DFN(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('dfn'),\n      init,\n      this\n    )\n  }\n  DIALOG(\n    init?: (builder: HTMLDialogElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLDialogElementBuilder<State, Action, Query>('dialog'),\n      init,\n      this\n    )\n  }\n  DIV(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLDivElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLDivElement>('div'),\n      init,\n      this\n    )\n  }\n  DL(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLDListElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLDListElement>('dl'),\n      init,\n      this\n    )\n  }\n  DT(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('dt'),\n      init,\n      this\n    )\n  }\n  EM(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('em'),\n      init,\n      this\n    )\n  }\n  EMBED(\n    init?: (builder: HTMLEmbedElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLEmbedElementBuilder<State, Action, Query>('embed'),\n      init,\n      this\n    )\n  }\n  FIELDSET(\n    init?: (builder: HTMLFieldSetElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLFieldSetElementBuilder<State, Action, Query>('fieldset'),\n      init,\n      this\n    )\n  }\n  FIG_CAPTION(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('figcaption'),\n      init,\n      this\n    )\n  }\n  FIGURE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('figure'),\n      init,\n      this\n    )\n  }\n  FOOTER(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('footer'),\n      init,\n      this\n    )\n  }\n  FORM(\n    init?: (builder: HTMLFormElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLFormElementBuilder<State, Action, Query>('form'),\n      init,\n      this\n    )\n  }\n  H1(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>('h1'),\n      init,\n      this\n    )\n  }\n  H2(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>('h2'),\n      init,\n      this\n    )\n  }\n  H3(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>('h3'),\n      init,\n      this\n    )\n  }\n  H4(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>('h4'),\n      init,\n      this\n    )\n  }\n  H5(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('h5'),\n      init,\n      this\n    )\n  }\n  H6(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('h6'),\n      init,\n      this\n    )\n  }\n  HEAD(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadElement>('head'),\n      init,\n      this\n    )\n  }\n  HEADER(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('header'),\n      init,\n      this\n    )\n  }\n  HGROUP(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('hgroup'),\n      init,\n      this\n    )\n  }\n  HR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHRElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHRElement>('hr'),\n      init,\n      this\n    )\n  }\n  HTML(\n    init?: (builder: HTMLHtmlElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLHtmlElementBuilder<State, Action, Query>('html'),\n      init,\n      this\n    )\n  }\n  I(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('i'),\n      init,\n      this\n    )\n  }\n  IFRAME(\n    init?: (builder: HTMLIFrameElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLIFrameElementBuilder<State, Action, Query>('iframe'),\n      init,\n      this\n    )\n  }\n  IMG(\n    init?: (builder: HTMLImageElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLImageElementBuilder<State, Action, Query>('img'),\n      init,\n      this\n    )\n  }\n  INPUT(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLInputElementBuilder<State, Action, Query>('input'),\n      init,\n      this\n    )\n  }\n\n  INPUT_BUTTON(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n    builder.type('button')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_CHECKBOX(\n    init?: (\n      builder: HTMLInputCheckedElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputCheckedElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('checkbox')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_COLOR(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n    builder.type('color')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_DATE(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('date')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_DATETIME_LOCAL(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('datetime-local')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_EMAIL(\n    init?: (builder: HTMLInputEmailElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputEmailElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('email')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_FILE(\n    init?: (builder: HTMLInputFileElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputFileElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('file')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_HIDDEN(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n    builder.type('hidden')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_IMAGE(\n    init?: (builder: HTMLInputImageElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputImageElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('image')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_MONTH(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('month')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_NUMBER(\n    init?: (\n      builder: HTMLInputNumberElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputNumberElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('number')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_PASSWORD(\n    init?: (\n      builder: HTMLInputPasswordElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputPasswordElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('password')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_RADIO(\n    init?: (\n      builder: HTMLInputCheckedElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputCheckedElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('radio')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_RANGE(\n    init?: (\n      builder: HTMLInputNumberElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputNumberElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('range')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_RESET(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n    builder.type('reset')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_SEARCH(\n    init?: (\n      builder: HTMLInputSearchElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputSearchElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('search')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_SUBMIT(\n    init?: (\n      builder: HTMLInputSubmitElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputSubmitElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('submit')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_TEL(\n    init?: (builder: HTMLInputTelElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputTelElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('tel')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_TEXT(\n    init?: (builder: InputTextElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new InputTextElementBuilder<State, Action, Query>('input')\n    builder.type('text')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_TIME(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('time')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_URL(\n    init?: (builder: HTMLInputUrlElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputUrlElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('url')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_WEEK(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('week')\n    return initBuilder(builder, init, this)\n  }\n\n  INS(\n    init?: (builder: HTMLModElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLModElementBuilder<State, Action, Query>('ins'),\n      init,\n      this\n    )\n  }\n  KBD(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('kbd'),\n      init,\n      this\n    )\n  }\n  LABEL(\n    init?: (builder: HTMLLabelElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLLabelElementBuilder<State, Action, Query>('label'),\n      init,\n      this\n    )\n  }\n  LEGEND(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLLegendElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLLegendElement>('legend'),\n      init,\n      this\n    )\n  }\n  LI(\n    init?: (builder: HTMLLIElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLLIElementBuilder<State, Action, Query>('li'),\n      init,\n      this\n    )\n  }\n  LINK(\n    init?: (builder: HTMLLinkElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLLinkElementBuilder<State, Action, Query>('link'),\n      init,\n      this\n    )\n  }\n  MAIN(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('main'),\n      init,\n      this\n    )\n  }\n  MAP(\n    init?: (builder: HTMLMapElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLMapElementBuilder<State, Action, Query>('map'),\n      init,\n      this\n    )\n  }\n  MARK(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('mark'),\n      init,\n      this\n    )\n  }\n  META(\n    init?: (builder: HTMLMetaElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLMetaElementBuilder<State, Action, Query>('meta'),\n      init,\n      this\n    )\n  }\n  METER(\n    init?: (builder: HTMLMeterElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLMeterElementBuilder<State, Action, Query>('meter'),\n      init,\n      this\n    )\n  }\n  NAV(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('nav'),\n      init,\n      this\n    )\n  }\n  NOSCRIPT(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('noscript'),\n      init,\n      this\n    )\n  }\n  OBJECT(\n    init?: (builder: HTMLObjectElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLObjectElementBuilder<State, Action, Query>('object'),\n      init,\n      this\n    )\n  }\n  OL(\n    init?: (builder: HTMLOListElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLOListElementBuilder<State, Action, Query>('ol'),\n      init,\n      this\n    )\n  }\n  OPTGROUP(\n    init?: (builder: HTMLOptGroupElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLOptGroupElementBuilder<State, Action, Query>('optgroup'),\n      init,\n      this\n    )\n  }\n  OPTION(\n    init?: (builder: HTMLOptionElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLOptionElementBuilder<State, Action, Query>('option'),\n      init,\n      this\n    )\n  }\n  OUTPUT(\n    init?: (builder: HTMLOutputElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLOutputElementBuilder<State, Action, Query>('output'),\n      init,\n      this\n    )\n  }\n  P(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLParagraphElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLParagraphElement>('p'),\n      init,\n      this\n    )\n  }\n  PARAM(\n    init?: (builder: HTMLParamElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLParamElementBuilder<State, Action, Query>('param'),\n      init,\n      this\n    )\n  }\n  PICTURE(\n    init?: (builder: HTMLPictureElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLPictureElementBuilder<State, Action, Query>('picture'),\n      init,\n      this\n    )\n  }\n  PRE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLPreElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLPreElement>('pre'),\n      init,\n      this\n    )\n  }\n  PROGRESS(\n    init?: (builder: HTMLProgressElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLProgressElementBuilder<State, Action, Query>('progress'),\n      init,\n      this\n    )\n  }\n  Q(\n    init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLQuoteElementBuilder<State, Action, Query>('q'),\n      init,\n      this\n    )\n  }\n  RP(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('rp'),\n      init,\n      this\n    )\n  }\n  RT(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('rt'),\n      init,\n      this\n    )\n  }\n  RUBY(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('ruby'),\n      init,\n      this\n    )\n  }\n  S(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('s'),\n      init,\n      this\n    )\n  }\n  SAMP(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('samp'),\n      init,\n      this\n    )\n  }\n  SCRIPT(\n    init?: (builder: HTMLScriptElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLScriptElementBuilder<State, Action, Query>('script'),\n      init,\n      this\n    )\n  }\n  SECTION(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('section'),\n      init,\n      this\n    )\n  }\n  SELECT(\n    init?: (builder: HTMLSelectElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLSelectElementBuilder<State, Action, Query>('select'),\n      init,\n      this\n    )\n  }\n  SLOT(\n    init?: (builder: HTMLSlotElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLSlotElementBuilder<State, Action, Query>('slot'),\n      init,\n      this\n    )\n  }\n  SMALL(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('small'),\n      init,\n      this\n    )\n  }\n  SOURCE(\n    init?: (builder: HTMLSourceElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLSourceElementBuilder<State, Action, Query>('source'),\n      init,\n      this\n    )\n  }\n  SPAN(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLSpanElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLSpanElement>('span'),\n      init,\n      this\n    )\n  }\n  STRONG(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('strong'),\n      init,\n      this\n    )\n  }\n  STYLE(\n    init?: (builder: HTMLStyleElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLStyleElementBuilder<State, Action, Query>('style'),\n      init,\n      this\n    )\n  }\n  SUB(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('sub'),\n      init,\n      this\n    )\n  }\n  SUMMARY(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('summary'),\n      init,\n      this\n    )\n  }\n  SUP(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('sup'),\n      init,\n      this\n    )\n  }\n  SVG(\n    init?: (builder: SVGSVGElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGSVGElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TABLE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableElement>('table'),\n      init,\n      this\n    )\n  }\n  TBODY(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>(\n        'tbody'\n      ),\n      init,\n      this\n    )\n  }\n  TD(\n    init?: (\n      builder: HTMLTableDataCellElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLTableDataCellElementBuilder<State, Action, Query>('td'),\n      init,\n      this\n    )\n  }\n  TEMPLATE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTemplateElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTemplateElement>(\n        'template'\n      ),\n      init,\n      this\n    )\n  }\n  TEXTAREA(\n    init?: (builder: HTMLTextAreaElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTextAreaElementBuilder<State, Action, Query>('textarea'),\n      init,\n      this\n    )\n  }\n  TFOOT(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>(\n        'tfoot'\n      ),\n      init,\n      this\n    )\n  }\n  TH(\n    init?: (\n      builder: HTMLTableHeaderCellElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLTableHeaderCellElementBuilder<State, Action, Query>('th'),\n      init,\n      this\n    )\n  }\n  THEAD(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('thead'),\n      init,\n      this\n    )\n  }\n  TIME(\n    init?: (builder: HTMLTimeElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTimeElementBuilder<State, Action, Query>('time'),\n      init,\n      this\n    )\n  }\n  TITLE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTitleElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTitleElement>('title'),\n      init,\n      this\n    )\n  }\n  TR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableRowElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableRowElement>('tr'),\n      init,\n      this\n    )\n  }\n  TRACK(\n    init?: (builder: HTMLTrackElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTrackElementBuilder<State, Action, Query>('track'),\n      init,\n      this\n    )\n  }\n  U(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('u'),\n      init,\n      this\n    )\n  }\n  UL(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLUListElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLUListElement>('ul'),\n      init,\n      this\n    )\n  }\n  VAR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('var'),\n      init,\n      this\n    )\n  }\n  VIDEO(\n    init?: (builder: HTMLVideoElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLVideoElementBuilder<State, Action, Query>('video'),\n      init,\n      this\n    )\n  }\n  WBR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('wbr'),\n      init,\n      this\n    )\n  }\n}\n\nexport type AriaRole =\n  | 'alert'\n  | 'alertdialog'\n  | 'application'\n  | 'article'\n  | 'banner'\n  | 'button'\n  | 'checkbox'\n  | 'cell'\n  | 'columnheader'\n  | 'combobox'\n  | 'complementary'\n  | 'contentinfo'\n  | 'definition'\n  | 'dialog'\n  | 'directory'\n  | 'document'\n  | 'feed'\n  | 'figure'\n  | 'form'\n  | 'grid'\n  | 'gridcell'\n  | 'group'\n  | 'heading'\n  | 'img'\n  | 'link'\n  | 'list'\n  | 'listbox'\n  | 'listitem'\n  | 'log'\n  | 'main'\n  | 'marquee'\n  | 'math'\n  | 'menu'\n  | 'menubar'\n  | 'menuitem'\n  | 'menuitemcheckbox'\n  | 'menuitemradio'\n  | 'navigation'\n  | 'none'\n  | 'note'\n  | 'option'\n  | 'presentation'\n  | 'progressbar'\n  | 'radio'\n  | 'radiogroup'\n  | 'region'\n  | 'row'\n  | 'rowgroup'\n  | 'rowheader'\n  | 'scrollbar'\n  | 'search'\n  | 'searchbox'\n  | 'separator'\n  | 'spinbutton'\n  | 'status'\n  | 'switch'\n  | 'tab'\n  | 'table'\n  | 'tablist'\n  | 'tabpanel'\n  | 'term'\n  | 'textbox'\n  | 'timer'\n  | 'toolbar'\n  | 'tooltip'\n  | 'tree'\n  | 'treegrid'\n  | 'treeitem'\n\n// dom generic\nexport function El<State, Action, Query, El extends HTMLElement = HTMLElement>(\n  tagName: string = 'div'\n) {\n  return new HTMLElementBuilder<State, Action, Query, El>(tagName)\n}\n\nexport class HTMLElementBuilder<State, Action, Query, El extends HTMLElement>\n  extends BaseHTMLBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _attributes: Record<string, DerivedOrLiteralValue<State, string>> = {}\n  private _styles: Record<string, DerivedOrLiteralValue<State, string>> = {}\n  private _handlers: Record<string, EventHandler<State, Action>> = {}\n  private _lifecycle: MakeLifecycle<State, Action> | undefined\n  private _respond:\n    | ((query: Query, el: El, ctx: DOMContext<Action>) => void)\n    | undefined\n\n  constructor(public tagName: string) {\n    super()\n  }\n\n  build(): DOMElement<State, Action, Query> {\n    return new DOMElement<State, Action, Query>(\n      makeCreateElement(this.tagName),\n      extractLiterals(this._attributes),\n      extractDerived(this._attributes),\n      extractLiterals(this._styles),\n      extractDerived(this._styles),\n      keys(this._handlers).map(name => ({\n        name,\n        callback: this._handlers[name]\n      })),\n      this._lifecycle ?? makeEmptyLifecycle,\n      (this._respond as (\n        query: Query,\n        el: any,\n        ctx: DOMContext<Action>\n      ) => {}) ?? ((query: Query, el: El, ctx: DOMContext<Action>) => {}), // TODO better typing needed\n      this._children\n    )\n  }\n\n  // attributes, styles and handlers\n  attr(name: string, value: Attribute<State, string>): this {\n    if (value != null) {\n      this._attributes[name] = value as DerivedOrLiteralValue<State, string>\n    }\n    return this\n  }\n  style(name: string, value: Attribute<State, string>): this {\n    if (value != null) {\n      this._styles[name] = value as DerivedOrLiteralValue<State, string>\n    }\n    return this\n  }\n  handle(name: string, callback: EventHandler<State, Action> | undefined) {\n    if (callback != null) {\n      this._handlers[name] = callback\n    }\n    return this\n  }\n  Lifecycle(makeLifecycle: MakeLifecycle<State, Action>): this {\n    this._lifecycle = makeLifecycle\n    return this\n  }\n  Respond(\n    response: (query: Query, el: El, ctx: DOMContext<Action>) => void\n  ): this {\n    this._respond = response\n    return this\n  }\n\n  // attribute shortcuts\n  accessKey(value: Attribute<State, string>) {\n    return this.attr('accesskey', value)\n  }\n  aria(name: string, value: Attribute<State, string>) {\n    return this.attr(`aria-${name}`, value)\n  }\n  class(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('class', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  contentEditable(value: Attribute<State, boolean>) {\n    return this.attr('contenteditable', mapAttribute(value, booleanToString))\n  }\n  data(name: string, value: Attribute<State, string>) {\n    return this.attr(`data-${name}`, value)\n  }\n  dir(value: Attribute<State, 'ltr' | 'rtl' | 'auto'>) {\n    return this.attr('role', value)\n  }\n  draggable(value: Attribute<State, boolean>) {\n    return this.attr('draggable', mapAttribute(value, booleanToString))\n  }\n  hidden(value: Attribute<State, boolean>) {\n    return this.attr('hidden', mapAttribute(value, toggleToString('hidden')))\n  }\n  id(value: Attribute<State, string>) {\n    return this.attr('id', value)\n  }\n  inputMode(\n    value: Attribute<\n      State,\n      | 'none'\n      | 'text'\n      | 'decimal'\n      | 'numeric'\n      | 'tel'\n      | 'search'\n      | 'email'\n      | 'url'\n    >\n  ) {\n    return this.attr('inputmode', value)\n  }\n  is(value: Attribute<State, string>) {\n    return this.attr('is', value)\n  }\n  itemId(value: Attribute<State, string>) {\n    return this.attr('itemid', value)\n  }\n  itemProp(value: Attribute<State, string>) {\n    return this.attr('itemprop', value)\n  }\n  itemRef(value: Attribute<State, string>) {\n    return this.attr('itemref', value)\n  }\n  itemScope(value: Attribute<State, string>) {\n    return this.attr('itemscope', value)\n  }\n  itemType(value: Attribute<State, string>) {\n    return this.attr('itemtype', value)\n  }\n  lang(value: Attribute<State, string>) {\n    return this.attr('lang', value)\n  }\n  part(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('part', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  role(value: Attribute<State, AriaRole>) {\n    return this.attr('role', value)\n  }\n  slot(value: Attribute<State, string>) {\n    return this.attr('slot', value)\n  }\n  spellCheck(value: Attribute<State, boolean>) {\n    return this.attr('spellcheck', mapAttribute(value, booleanToString))\n  }\n  styles(value: Attribute<State, string | Record<string, string>>) {\n    return this.attr('style', mapAttribute(value, stylesToString))\n  }\n  tabIndex(value: Attribute<State, number>) {\n    return this.attr('tabindex', mapAttribute(value, String))\n  }\n  title(value: Attribute<State, string>) {\n    return this.attr('title', value)\n  }\n\n  // aria\n  ariaActiveDescendant(value: Attribute<State, string>) {\n    return this.attr('aria-activedescendant', value)\n  }\n  ariaAtomic(value: Attribute<State, boolean>) {\n    return this.attr('aria-atomic', mapAttribute(value, booleanToString))\n  }\n  ariaAutocomplete(\n    value: Attribute<State, 'inline' | 'list' | 'both' | 'none'>\n  ) {\n    return this.attr('aria-autocomplete', value)\n  }\n  ariaBusy(value: Attribute<State, boolean>) {\n    return this.attr('aria-busy', mapAttribute(value, booleanToString))\n  }\n  ariaChecked(\n    value: Attribute<State, 'true' | 'false' | 'mixed' | true | false>\n  ) {\n    return this.attr(\n      'aria-checked',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaColCount(value: Attribute<State, number>) {\n    return this.attr('aria-colcount', mapAttribute(value, String))\n  }\n  ariaColIndex(value: Attribute<State, number>) {\n    return this.attr('aria-colindex', mapAttribute(value, String))\n  }\n  ariaColSpan(value: Attribute<State, number>) {\n    return this.attr('aria-colspan', mapAttribute(value, String))\n  }\n  ariaControls(value: Attribute<State, string>) {\n    return this.attr('aria-controls', value)\n  }\n  ariaCurrent(\n    value: Attribute<\n      State,\n      | 'page'\n      | 'step'\n      | 'location'\n      | 'date'\n      | 'time'\n      | 'true'\n      | 'false'\n      | true\n      | false\n    >\n  ) {\n    return this.attr(\n      'aria-current',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaDescribedBy(value: Attribute<State, string>) {\n    return this.attr('aria-describedby', value)\n  }\n  ariaDetails(value: Attribute<State, string>) {\n    return this.attr('aria-details', value)\n  }\n  ariaDisabled(value: Attribute<State, boolean>) {\n    return this.attr('aria-disabled', mapAttribute(value, booleanToString))\n  }\n  ariaDropEffect(\n    value: Attribute<\n      State,\n      'copy' | 'execute' | 'link' | 'move' | 'none' | 'popup'\n    >\n  ) {\n    return this.attr('aria-dropeffect', value)\n  }\n  ariaErrorMessage(\n    value: Attribute<\n      State,\n      'grammar' | 'false' | false | 'spelling' | 'true' | true\n    >\n  ) {\n    return this.attr(\n      'aria-errormessage',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaExpanded(value: Attribute<State, boolean>) {\n    return this.attr('aria-expanded', mapAttribute(value, booleanToString))\n  }\n  ariaFlowTo(value: Attribute<State, string>) {\n    return this.attr('aria-flowto', value)\n  }\n  ariaGrabbed(value: Attribute<State, boolean>) {\n    return this.attr('aria-grabbed', mapAttribute(value, booleanToString))\n  }\n  ariaHasPopup(\n    value: Attribute<\n      State,\n      | 'true'\n      | 'false'\n      | 'menu'\n      | 'listbox'\n      | 'tree'\n      | 'grid'\n      | 'dialog'\n      | true\n      | false\n    >\n  ) {\n    return this.attr(\n      'aria-haspopup',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaHidden(value: Attribute<State, boolean>) {\n    return this.attr('aria-hidden', mapAttribute(value, booleanToString))\n  }\n  ariaInvalid(value: Attribute<State, string>) {\n    return this.attr('aria-invalid', value)\n  }\n  ariaKeyShortcuts(value: Attribute<State, string>) {\n    return this.attr('aria-keyshortcuts', value)\n  }\n  ariaLabel(value: Attribute<State, string>) {\n    return this.attr('aria-label', value)\n  }\n  ariaLabelledBy(value: Attribute<State, string>) {\n    return this.attr('aria-labelledby', value)\n  }\n  ariaLevel(value: Attribute<State, number>) {\n    return this.attr('aria-level', mapAttribute(value, String))\n  }\n  ariaLive(value: Attribute<State, 'assertive' | 'off' | 'polite'>) {\n    return this.attr('aria-live', value)\n  }\n  ariaModal(value: Attribute<State, boolean>) {\n    return this.attr('aria-modal', mapAttribute(value, booleanToString))\n  }\n  ariaMultiLine(value: Attribute<State, boolean>) {\n    return this.attr('aria-multiline', mapAttribute(value, booleanToString))\n  }\n  ariaMultiSelectable(value: Attribute<State, boolean>) {\n    return this.attr(\n      'aria-multiselectable',\n      mapAttribute(value, booleanToString)\n    )\n  }\n  ariaOrientation(value: Attribute<State, 'horizontal' | 'vertical'>) {\n    return this.attr('aria-orientation', value)\n  }\n  ariaOwns(value: Attribute<State, string>) {\n    return this.attr('aria-owns', value)\n  }\n  ariaPlaceHolder(value: Attribute<State, string>) {\n    return this.attr('aria-placeholder', value)\n  }\n  ariaPointSet(value: Attribute<State, number>) {\n    return this.attr('aria-pointset', mapAttribute(value, String))\n  }\n  ariaPosInSet(value: Attribute<State, string>) {\n    return this.attr('aria-posinset', value)\n  }\n  ariaPressed(\n    value: Attribute<State, 'true' | 'false' | 'mixed' | true | false>\n  ) {\n    return this.attr(\n      'aria-pressed',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaReadonly(value: Attribute<State, boolean>) {\n    return this.attr('aria-readonly', mapAttribute(value, booleanToString))\n  }\n  ariaRequired(value: Attribute<State, boolean>) {\n    return this.attr('aria-required', mapAttribute(value, booleanToString))\n  }\n  ariaRelevant(\n    value: Attribute<\n      State,\n      'addition' | 'additions text' | 'all' | 'removals' | 'text'\n    >\n  ) {\n    return this.attr('aria-relevant', value)\n  }\n  ariaRoleDescription(value: Attribute<State, string>) {\n    return this.attr('aria-roledescription', value)\n  }\n  ariaRowCount(value: Attribute<State, number>) {\n    return this.attr('aria-rowcount', mapAttribute(value, String))\n  }\n  ariaRowIndex(value: Attribute<State, number>) {\n    return this.attr('aria-rowindex', mapAttribute(value, String))\n  }\n  ariaRowSpan(value: Attribute<State, number>) {\n    return this.attr('aria-rowspan', mapAttribute(value, String))\n  }\n  ariaSelected(value: Attribute<State, boolean>) {\n    return this.attr('aria-selected', mapAttribute(value, booleanToString))\n  }\n  ariaSetSize(value: Attribute<State, number>) {\n    return this.attr('aria-setsize', mapAttribute(value, String))\n  }\n  ariaSort(\n    value: Attribute<State, 'ascending' | 'descending' | 'none' | 'other'>\n  ) {\n    return this.attr('aria-sort', value)\n  }\n  ariaValueMax(value: Attribute<State, number>) {\n    return this.attr('aria-valuemax', mapAttribute(value, String))\n  }\n  ariaValueMin(value: Attribute<State, number>) {\n    return this.attr('aria-valuemin', mapAttribute(value, String))\n  }\n  ariaValueNow(value: Attribute<State, number>) {\n    return this.attr('aria-valuenow', mapAttribute(value, String))\n  }\n  ariaValueText(value: Attribute<State, string>) {\n    return this.attr('aria-valuetext', value)\n  }\n\n  // event shortcuts\n  onAbort(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('abort', handler as EventHandler<State, Action>)\n  }\n  onAutoComplete(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('autocomplete', handler as EventHandler<State, Action>)\n  }\n  onAutoCompleteError(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle(\n      'autocompleteerror',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onBlur(handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined) {\n    return this.handle('blur', handler as EventHandler<State, Action>)\n  }\n  onCancel(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('cancel', handler as EventHandler<State, Action>)\n  }\n  onChange(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('change', handler as EventHandler<State, Action>)\n  }\n  onClick(handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined) {\n    return this.handle('click', handler as EventHandler<State, Action>)\n  }\n  onCompositionEnd(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle('compositionend', handler as EventHandler<State, Action>)\n  }\n  onCompositionStart(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle(\n      'compositionstart',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onCompositionUpdate(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle(\n      'compositionupdate',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onContextMenu(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('contextmenu', handler as EventHandler<State, Action>)\n  }\n  onDblClick(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('dblclick', handler as EventHandler<State, Action>)\n  }\n  onDrag(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('drag', handler as EventHandler<State, Action>)\n  }\n  onDragEnd(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('dragend', handler as EventHandler<State, Action>)\n  }\n  onDragEnter(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragenter', handler as EventHandler<State, Action>)\n  }\n  onDragExit(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragexit', handler as EventHandler<State, Action>)\n  }\n  onDragLeave(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragleave', handler as EventHandler<State, Action>)\n  }\n  onDragOver(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragover', handler as EventHandler<State, Action>)\n  }\n  onDragStart(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragstart', handler as EventHandler<State, Action>)\n  }\n  onDrop(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('drop', handler as EventHandler<State, Action>)\n  }\n  onError(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('error', handler as EventHandler<State, Action>)\n  }\n  onFocus(handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined) {\n    return this.handle('focus', handler as EventHandler<State, Action>)\n  }\n  onFocusIn(\n    handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined\n  ) {\n    return this.handle('focusin', handler as EventHandler<State, Action>)\n  }\n  onFocusOut(\n    handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined\n  ) {\n    return this.handle('focusout', handler as EventHandler<State, Action>)\n  }\n  onInput(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('input', handler as EventHandler<State, Action>)\n  }\n  onInvalid(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('invalid', handler as EventHandler<State, Action>)\n  }\n  onKeyDown(\n    handler: EventHandlerTE<State, Action, KeyboardEvent, El> | undefined\n  ) {\n    return this.handle('keydown', handler as EventHandler<State, Action>)\n  }\n  onKeyUp(\n    handler: EventHandlerTE<State, Action, KeyboardEvent, El> | undefined\n  ) {\n    return this.handle('keyup', handler as EventHandler<State, Action>)\n  }\n  onLoad(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('load', handler as EventHandler<State, Action>)\n  }\n  onMouseDown(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mousedown', handler as EventHandler<State, Action>)\n  }\n  onMouseEnter(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseenter', handler as EventHandler<State, Action>)\n  }\n  onMouseLeave(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseleave', handler as EventHandler<State, Action>)\n  }\n  onMouseMove(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mousemove', handler as EventHandler<State, Action>)\n  }\n  onMouseOut(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseout', handler as EventHandler<State, Action>)\n  }\n  onMouseOver(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseover', handler as EventHandler<State, Action>)\n  }\n  onMouseUp(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseup', handler as EventHandler<State, Action>)\n  }\n  onReset(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('reset', handler as EventHandler<State, Action>)\n  }\n  onScroll(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('scroll', handler as EventHandler<State, Action>)\n  }\n  onSelect(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('select', handler as EventHandler<State, Action>)\n  }\n  onShow(handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined) {\n    return this.handle('show', handler as EventHandler<State, Action>)\n  }\n  onSubmit(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('submit', handler as EventHandler<State, Action>)\n  }\n  onTouchCancel(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchcancel', handler as EventHandler<State, Action>)\n  }\n  onTouchEnd(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchend', handler as EventHandler<State, Action>)\n  }\n  onTouchMove(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchmove', handler as EventHandler<State, Action>)\n  }\n  onTouchStart(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchstart', handler as EventHandler<State, Action>)\n  }\n  onWheel(handler: EventHandlerTE<State, Action, WheelEvent, El> | undefined) {\n    return this.handle('wheel', handler as EventHandler<State, Action>)\n  }\n}\n\nfunction initBuilder<\n  T extends IBuilder<any, any, any>,\n  P extends BaseHTMLBuilder<any, any, any>\n>(builder: T, init: undefined | ((builder: T) => void), parent: P): P {\n  init && init(builder)\n  return parent.Append(builder.build())\n}\n\nexport type PreloadValue = 'none' | 'metadata' | 'auto'\n\nexport class HTMLMediaElementBuilder<\n  State,\n  Action,\n  Query,\n  El extends HTMLMediaElement\n> extends HTMLElementBuilder<State, Action, Query, El> {\n  autoPlay(value: Attribute<State, boolean>): this {\n    return this.attr(\n      'autoplay',\n      mapAttribute(value, toggleToString('autoplay'))\n    )\n  }\n  controls(value: Attribute<State, boolean>): this {\n    return this.attr(\n      'controls',\n      mapAttribute(value, toggleToString('controls'))\n    )\n  }\n  crossOrigin(value: Attribute<State, CrossOriginValue>) {\n    return this.attr('crossorigin', value)\n  }\n  loop(value: Attribute<State, boolean>): this {\n    return this.attr('loop', mapAttribute(value, toggleToString('loop')))\n  }\n  muted(value: Attribute<State, boolean>): this {\n    return this.attr('muted', mapAttribute(value, toggleToString('muted')))\n  }\n  preload(value: Attribute<State, PreloadValue>) {\n    return this.attr('preload', value)\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n\n  onAbortMedia(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('abort', handler as EventHandler<State, Action>)\n  }\n  onCanPlay(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('canplay', handler as EventHandler<State, Action>)\n  }\n  onCanPlayThrough(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('canplaythrough', handler as EventHandler<State, Action>)\n  }\n  onComplete(\n    handler:\n      | EventHandlerTE<State, Action, OfflineAudioCompletionEvent, El>\n      | undefined\n  ) {\n    return this.handle('complete', handler as EventHandler<State, Action>)\n  }\n  onDurationChange(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('durationchange', handler as EventHandler<State, Action>)\n  }\n  onEmptied(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('emptied', handler as EventHandler<State, Action>)\n  }\n  onEnded(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('ended', handler as EventHandler<State, Action>)\n  }\n  onLoadedData(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('loadeddata', handler as EventHandler<State, Action>)\n  }\n  onLoadedMetadata(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('loadedmetadata', handler as EventHandler<State, Action>)\n  }\n  onPause(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('pause', handler as EventHandler<State, Action>)\n  }\n  onPlay(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('play', handler as EventHandler<State, Action>)\n  }\n  onPlaying(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('playing', handler as EventHandler<State, Action>)\n  }\n  onSeeked(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('seeked', handler as EventHandler<State, Action>)\n  }\n  onSeeking(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('seeking', handler as EventHandler<State, Action>)\n  }\n  onStalled(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('stalled', handler as EventHandler<State, Action>)\n  }\n  onSuspend(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('suspend', handler as EventHandler<State, Action>)\n  }\n  onTimeUpdate(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('timeupdate', handler as EventHandler<State, Action>)\n  }\n  onVolumeChange(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('volumechange', handler as EventHandler<State, Action>)\n  }\n  onWaiting(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('waiting', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class HTMLAnchorElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLAnchorElement> {\n  download(filename: Attribute<State, string>): this {\n    return this.attr('download', filename)\n  }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  hreflang(lang: Attribute<State, string>): this {\n    return this.attr('hreflang', lang)\n  }\n  ping(url: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr('ping', mapAttribute(url, listOrRecordToSpaceSeparated))\n  }\n  rel(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr('rel', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  target(name: Attribute<State, string>): this {\n    return this.attr('target', name)\n  }\n  type(name: Attribute<State, string>): this {\n    return this.attr('type', name)\n  }\n}\n\nexport class HTMLAreaElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLAreaElement> {\n  alt(name: Attribute<State, string>): this {\n    return this.attr('alt', name)\n  }\n  coords(name: Attribute<State, string>): this {\n    return this.attr('coords', name)\n  }\n  download(name: Attribute<State, string>): this {\n    return this.attr('download', name)\n  }\n  href(name: Attribute<State, string>): this {\n    return this.attr('href', name)\n  }\n  hreflang(name: Attribute<State, string>): this {\n    return this.attr('hreflang', name)\n  }\n  ping(name: Attribute<State, string>): this {\n    return this.attr('ping', name)\n  }\n  rel(name: Attribute<State, string>): this {\n    return this.attr('rel', name)\n  }\n  shape(name: Attribute<State, 'rect' | 'circle' | 'poly' | 'default'>): this {\n    return this.attr('shape', name)\n  }\n  target(name: Attribute<State, string>): this {\n    return this.attr('target', name)\n  }\n}\n\nexport class HTMLAudioElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLMediaElementBuilder<State, Action, Query, HTMLAudioElement> {}\n\nexport class HTMLBaseElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLBaseElement> {\n  href(name: Attribute<State, string>): this {\n    return this.attr('href', name)\n  }\n  target(name: Attribute<State, string>): this {\n    return this.attr('target', name)\n  }\n}\n\nexport type FormEncTypeValue =\n  | 'application/x-www-form-urlencoded'\n  | 'multipart/form-data'\n  | 'text/plain'\n\nexport type FormMethodValue = 'post' | 'get' | 'dialog'\n\nexport class HTMLButtonElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLButtonElement> {\n  autofocus(value: Attribute<State, boolean>) {\n    return this.attr(\n      'autofocus',\n      mapAttribute(value, toggleToString('autofocus'))\n    )\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  formAction(value: Attribute<State, string>) {\n    return this.attr('formaction', value)\n  }\n  formEncType(value: Attribute<State, FormEncTypeValue>) {\n    return this.attr('formenctype', value)\n  }\n  formMethod(value: Attribute<State, FormMethodValue>) {\n    return this.attr('formmethod', value)\n  }\n  formNoValidate(value: Attribute<State, boolean>) {\n    return this.attr(\n      'formnovalidate',\n      mapAttribute(value, toggleToString('formnovalidate'))\n    )\n  }\n  formTarget(value: Attribute<State, string>) {\n    return this.attr('formtarget', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  type(value: Attribute<State, 'submit' | 'reset' | 'button'>) {\n    return this.attr('type', value)\n  }\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLCanvasElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLCanvasElement> {\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLDataElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLDataElement> {\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLDetailsElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLDetailsElement> {\n  open(value: Attribute<State, boolean>) {\n    return this.attr('open', mapAttribute(value, toggleToString('open')))\n  }\n}\n\nexport class HTMLDialogElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLDialogElement> {\n  open(value: Attribute<State, boolean>) {\n    return this.attr('open', mapAttribute(value, toggleToString('open')))\n  }\n}\n\nexport class HTMLEmbedElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLEmbedElement> {\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLFieldSetElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLFieldSetElement> {\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n}\n\nexport class HTMLFormElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLFormElement> {\n  acceptCharset(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'accept-charset',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  action(value: Attribute<State, string>) {\n    return this.attr('action', value)\n  }\n  autoComplete(value: Attribute<State, 'on' | 'off'>) {\n    return this.attr('autocomplete', value)\n  }\n  encType(value: Attribute<State, FormEncTypeValue>) {\n    return this.attr('enctype', value)\n  }\n  method(value: Attribute<State, FormMethodValue>) {\n    return this.attr('method', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  noValidate(value: Attribute<State, boolean>) {\n    return this.attr(\n      'novalidate',\n      mapAttribute(value, toggleToString('novalidate'))\n    )\n  }\n  rel(value: Attribute<State, string>) {\n    return this.attr('rel', value)\n  }\n  target(value: Attribute<State, string>) {\n    return this.attr('target', value)\n  }\n}\n\nexport class HTMLHtmlElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLHtmlElement> {\n  xmlns(value: Attribute<State, string>) {\n    return this.attr('xmlns', value)\n  }\n}\n\nexport class HTMLIFrameElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLIFrameElement> {\n  allow(value: Attribute<State, string>) {\n    return this.attr('allow', value)\n  }\n  allowfullscreen(value: Attribute<State, boolean>) {\n    return this.attr('allowfullscreen', mapAttribute(value, booleanToString))\n  }\n  allowpaymentrequest(value: Attribute<State, boolean>) {\n    return this.attr(\n      'allowpaymentrequest',\n      mapAttribute(value, booleanToString)\n    )\n  }\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  referrerpolicy(\n    value: Attribute<\n      State,\n      | 'no-referrer'\n      | 'no-referrer-when-downgrade'\n      | 'origin'\n      | 'origin-when-cross-origin'\n      | 'same-origin'\n      | 'strict-origin'\n      | 'strict-origin-when-cross-origin'\n      | 'unsafe-url'\n    >\n  ) {\n    return this.attr('referrerpolicy', value)\n  }\n  sandbox(\n    value: Attribute<\n      State,\n      | 'allow-forms'\n      | 'allow-modals'\n      | 'allow-orientation-lock'\n      | 'allow-pointer-lock'\n      | 'allow-popups'\n      | 'allow-popups-to-escape-sandbox'\n      | 'allow-presentation'\n      | 'allow-same-origin'\n      | 'allow-scripts'\n      | 'allow-top-navigation'\n      | 'allow-top-navigation-by-user-activation'\n    >\n  ) {\n    return this.attr('sandbox', value)\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  srcdoc(value: Attribute<State, string>) {\n    return this.attr('srcdoc', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport type CrossOriginValue = 'anonymous' | 'use-credentials'\n\nexport class HTMLImageElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLImageElement> {\n  alt(value: Attribute<State, string>) {\n    return this.attr('alt', value)\n  }\n  crossOrigin(value: Attribute<State, CrossOriginValue>) {\n    return this.attr('crossorigin', value)\n  }\n  decoding(value: Attribute<State, 'sync' | 'async' | 'auto'>) {\n    return this.attr('decoding', value)\n  }\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  ismap(value: Attribute<State, boolean>) {\n    return this.attr('ismap', mapAttribute(value, toggleToString('ismap')))\n  }\n  loading(value: Attribute<State, 'eager' | 'lazy'>) {\n    return this.attr('loading', value)\n  }\n  sizes(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('sizes', mapAttribute(value, lostOrRecordToCommaSeparated))\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  srcset(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'srcset',\n      mapAttribute(value, lostOrRecordToCommaSeparated)\n    )\n  }\n  usemap(value: Attribute<State, string>) {\n    return this.attr('usemap', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport type AutoCompleteValue =\n  | 'on'\n  | 'off'\n  | 'name'\n  | 'honorific-prefix'\n  | 'given-name'\n  | 'additional-name'\n  | 'family-name'\n  | 'honorific-suffix'\n  | 'nickname'\n  | 'email'\n  | 'username'\n  | 'new-password'\n  | 'current-password'\n  | 'one-time-code'\n  | 'organization-title'\n  | 'organization'\n  | 'street-address'\n  | 'address-line1'\n  | 'address-line2'\n  | 'address-line3'\n  | 'address-level4'\n  | 'address-level3'\n  | 'address-level2'\n  | 'address-level1'\n  | 'country'\n  | 'country-name'\n  | 'postal-code'\n  | 'cc-name'\n  | 'cc-given-name'\n  | 'cc-additional-name'\n  | 'cc-family-name'\n  | 'cc-number'\n  | 'cc-exp'\n  | 'cc-exp-month'\n  | 'cc-exp-year'\n  | 'cc-csc'\n  | 'cc-type'\n  | 'transaction-currency'\n  | 'transaction-amount'\n  | 'language'\n  | 'bday'\n  | 'bday-day'\n  | 'bday-month'\n  | 'bday-year'\n  | 'sex'\n  | 'tel'\n  | 'tel-country-code'\n  | 'tel-national'\n  | 'tel-area-code'\n  | 'tel-local'\n  | 'tel-extension'\n  | 'impp'\n  | 'url'\n  | 'photo'\n\nexport type InputTypeValue =\n  | 'button'\n  | 'checkbox'\n  | 'color'\n  | 'date'\n  | 'datetime-local'\n  | 'email'\n  | 'file'\n  | 'hidden'\n  | 'image'\n  | 'month'\n  | 'number'\n  | 'password'\n  | 'radio'\n  | 'range'\n  | 'reset'\n  | 'search'\n  | 'submit'\n  | 'tel'\n  | 'text'\n  | 'time'\n  | 'url'\n  | 'week'\n\nexport class HTMLInputElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLInputElement> {\n  type(value: Attribute<State, InputTypeValue>) {\n    return this.attr('type', value)\n  }\n  autoComplete(value: Attribute<State, ListOrRecordValue<AutoCompleteValue>>) {\n    return this.attr(\n      'autocomplete',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  autoFocus(value: Attribute<State, boolean>) {\n    return this.attr(\n      'autofocus',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  list(value: Attribute<State, string>) {\n    return this.attr('list', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  readonly(value: Attribute<State, boolean>) {\n    return this.attr(\n      'readonly',\n      mapAttribute(value, toggleToString('readonly'))\n    )\n  }\n  required(value: Attribute<State, boolean>) {\n    return this.attr(\n      'required',\n      mapAttribute(value, toggleToString('required'))\n    )\n  }\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLInputCheckedElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  checked(value: Attribute<State, boolean>) {\n    return this.attr('checked', mapAttribute(value, toggleToString('checked')))\n  }\n}\n\nexport class HTMLInputDateElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  max(value: Attribute<State, string>) {\n    return this.attr('max', value)\n  }\n  min(value: Attribute<State, string>) {\n    return this.attr('min', value)\n  }\n  step(value: Attribute<State, number>) {\n    return this.attr('step', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputEmailElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  multiple(value: Attribute<State, boolean>) {\n    return this.attr(\n      'multiple',\n      mapAttribute(value, toggleToString('multiple'))\n    )\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputFileElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  accept(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'accept',\n      mapAttribute(value, lostOrRecordToCommaSeparated)\n    )\n  }\n  capture(value: Attribute<State, string>) {\n    return this.attr('capture', value)\n  }\n  multiple(value: Attribute<State, boolean>) {\n    return this.attr(\n      'multiple',\n      mapAttribute(value, toggleToString('multiple'))\n    )\n  }\n}\n\nexport class HTMLInputImageElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  alt(value: Attribute<State, string>) {\n    return this.attr('alt', value)\n  }\n  formAction(value: Attribute<State, string>) {\n    return this.attr('formaction', value)\n  }\n  formEncType(value: Attribute<State, FormEncTypeValue>) {\n    return this.attr('formenctype', value)\n  }\n  formMethod(value: Attribute<State, FormMethodValue>) {\n    return this.attr('formmethod', value)\n  }\n  formValidate(value: Attribute<State, string>) {\n    return this.attr('formvalidate', value)\n  }\n  formTarget(value: Attribute<State, string>) {\n    return this.attr('formtarget', value)\n  }\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputNumberElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  max(value: Attribute<State, number>) {\n    return this.attr('max', mapAttribute(value, String))\n  }\n  min(value: Attribute<State, number>) {\n    return this.attr('min', mapAttribute(value, String))\n  }\n  step(value: Attribute<State, number>) {\n    return this.attr('step', mapAttribute(value, String))\n  }\n  value(value: Attribute<State, string | number>) {\n    return this.attr('value', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputPasswordElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  pattern(value: Attribute<State, string>) {\n    return this.attr('pattern', value)\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputSearchElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  dirname(value: Attribute<State, string>) {\n    return this.attr('dirname', value)\n  }\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n}\n\nexport class HTMLInputSubmitElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  formAction(value: Attribute<State, string>) {\n    return this.attr('formaction', value)\n  }\n  formEncType(value: Attribute<State, FormEncTypeValue>) {\n    return this.attr('formenctype', value)\n  }\n  formMethod(value: Attribute<State, FormMethodValue>) {\n    return this.attr('formmethod', value)\n  }\n  formValidate(value: Attribute<State, boolean>) {\n    return this.attr(\n      'formvalidate',\n      mapAttribute(value, toggleToString('formvalidate'))\n    )\n  }\n  formTarget(value: Attribute<State, string>) {\n    return this.attr('formtarget', value)\n  }\n}\n\nexport class HTMLInputTelElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  pattern(value: Attribute<State, string>) {\n    return this.attr('pattern', value)\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class InputTextElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  dirname(value: Attribute<State, string>) {\n    return this.attr('dirname', value)\n  }\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  pattern(value: Attribute<State, string>) {\n    return this.attr('pattern', value)\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputUrlElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n}\n\nexport class HTMLLabelElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLLabelElement> {\n  for(value: DerivedOrLiteralValue<State, string>) {\n    return this.attr('for', value)\n  }\n}\n\nexport class HTMLLIElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLLIElement> {\n  value(value: DerivedOrLiteralValue<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLLinkElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLLinkElement> {\n  as(\n    value: DerivedOrLiteralValue<\n      State,\n      | 'audio'\n      | 'document'\n      | 'embed'\n      | 'fetch'\n      | 'font'\n      | 'image'\n      | 'object'\n      | 'script'\n      | 'style'\n      | 'track'\n      | 'video'\n      | 'worker'\n    >\n  ) {\n    return this.attr('as', value)\n  }\n  crossOrigin(value: Attribute<State, CrossOriginValue>) {\n    return this.attr('crossorigin', value)\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  href(value: Attribute<State, string>) {\n    return this.attr('href', value)\n  }\n  hreflang(value: Attribute<State, string>) {\n    return this.attr('hreflang', value)\n  }\n  media(value: Attribute<State, string>) {\n    return this.attr('media', value)\n  }\n  rel(value: Attribute<State, string>) {\n    return this.attr('rel', value)\n  }\n  sizes(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('sizes', mapAttribute(value, lostOrRecordToCommaSeparated))\n  }\n  title(value: Attribute<State, string>) {\n    return this.attr('title', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n}\n\nexport class HTMLMapElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLMapElement> {\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n}\n\nexport type HttpEquivValue =\n  | 'content-security-policy'\n  | 'content-type'\n  | 'default-style'\n  | 'x-ua-compatible'\n  | 'refresh'\n\nexport class HTMLMetaElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLMetaElement> {\n  charset(value: Attribute<State, string>) {\n    return this.attr('charset', value)\n  }\n  content(value: Attribute<State, string>) {\n    return this.attr('content', value)\n  }\n  httpEquiv(value: Attribute<State, HttpEquivValue>) {\n    return this.attr('http-equiv', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n}\n\nexport class HTMLMeterElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLMeterElement> {\n  form(value: Attribute<State, string>) {\n    return this.attr('step', value)\n  }\n  high(value: Attribute<State, number>) {\n    return this.attr('high', mapAttribute(value, String))\n  }\n  low(value: Attribute<State, number>) {\n    return this.attr('low', mapAttribute(value, String))\n  }\n  max(value: Attribute<State, number>) {\n    return this.attr('max', mapAttribute(value, String))\n  }\n  min(value: Attribute<State, number>) {\n    return this.attr('min', mapAttribute(value, String))\n  }\n  optimum(value: Attribute<State, number>) {\n    return this.attr('optimum', mapAttribute(value, String))\n  }\n  value(value: Attribute<State, number>) {\n    return this.attr('value', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLModElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLModElement> {\n  cite(value: Attribute<State, string>) {\n    return this.attr('cite', value)\n  }\n  dateTime(value: Attribute<State, string>) {\n    return this.attr('datetime', value)\n  }\n}\n\nexport class HTMLObjectElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLObjectElement> {\n  data(value: Attribute<State, string>) {\n    return this.attr('data', value)\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n  typemustmatch(value: Attribute<State, string>) {\n    return this.attr('typemustmatch', value)\n  }\n  usemap(value: Attribute<State, string>) {\n    return this.attr('usemap', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport type OLTypeValue = 'a' | 'A' | 'i' | 'I' | '1' | 1\n\nexport class HTMLOListElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLOListElement> {\n  reversed(value: Attribute<State, boolean>) {\n    return this.attr(\n      'reversed',\n      mapAttribute(value, toggleToString('reversed'))\n    )\n  }\n  start(value: Attribute<State, number>) {\n    return this.attr('start', mapAttribute(value, String))\n  }\n  type(value: Attribute<State, OLTypeValue>) {\n    return this.attr('type', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLOptGroupElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLOptGroupElement> {\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  label(value: Attribute<State, string>) {\n    return this.attr('label', value)\n  }\n}\n\nexport class HTMLOptionElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLOptionElement> {\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  label(value: Attribute<State, string>) {\n    return this.attr('label', value)\n  }\n  selected(value: Attribute<State, boolean>) {\n    return this.attr(\n      'selected',\n      mapAttribute(value, toggleToString('selected'))\n    )\n  }\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLOutputElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLOutputElement> {\n  for(value: Attribute<State, string>) {\n    return this.attr('for', value)\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n}\n\nexport class HTMLParamElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLParamElement> {\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLPictureElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLPictureElement> {\n  // This element includes only global attributes.\n}\n\nexport class HTMLProgressElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLProgressElement> {\n  max(value: Attribute<State, number>) {\n    return this.attr('max', mapAttribute(value, String))\n  }\n  value(value: Attribute<State, number>) {\n    return this.attr('value', mapAttribute(value, String))\n  }\n  onLoadEnd(\n    handler:\n      | EventHandlerTE<State, Action, ProgressEvent, HTMLProgressElement>\n      | undefined\n  ) {\n    return this.handle('loaddnd', handler as EventHandler<State, Action>)\n  }\n  onLoadStart(\n    handler:\n      | EventHandlerTE<State, Action, ProgressEvent, HTMLProgressElement>\n      | undefined\n  ) {\n    return this.handle('loadstart', handler as EventHandler<State, Action>)\n  }\n  onProgress(\n    handler:\n      | EventHandlerTE<State, Action, ProgressEvent, HTMLProgressElement>\n      | undefined\n  ) {\n    return this.handle('progress', handler as EventHandler<State, Action>)\n  }\n  onRateChange(\n    handler:\n      | EventHandlerTE<State, Action, PointerEvent, HTMLProgressElement>\n      | undefined\n  ) {\n    return this.handle('ratechange', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class HTMLQuoteElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLQuoteElement> {\n  cite(value: Attribute<State, string>) {\n    return this.attr('cite', value)\n  }\n}\n\nexport class HTMLScriptElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLScriptElement> {\n  async(value: Attribute<State, boolean>) {\n    return this.attr('async', mapAttribute(value, toggleToString('async')))\n  }\n  crossOrigin(value: Attribute<State, CrossOriginValue>) {\n    return this.attr('crossorigin', value)\n  }\n  defer(value: Attribute<State, boolean>) {\n    return this.attr('defer', mapAttribute(value, toggleToString('defer')))\n  }\n  integrity(value: Attribute<State, string>) {\n    return this.attr('integrity', value)\n  }\n  nomodule(value: Attribute<State, boolean>) {\n    return this.attr(\n      'nomodule',\n      mapAttribute(value, toggleToString('nomodule'))\n    )\n  }\n  nonce(value: Attribute<State, string>) {\n    return this.attr('nonce', value)\n  }\n  referrerpolicy(\n    value: Attribute<\n      State,\n      | 'no-referrer'\n      | 'no-referrer-when-downgrade'\n      | 'origin'\n      | 'origin-when-cross-origin'\n      | 'same-origin'\n      | 'strict-origin'\n      | 'strict-origin-when-cross-origin'\n      | 'unsafe-url'\n    >\n  ) {\n    return this.attr('referrerpolicy', value)\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n}\n\nexport class HTMLSelectElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLSelectElement> {\n  autoComplete(value: Attribute<State, ListOrRecordValue<AutoCompleteValue>>) {\n    return this.attr(\n      'autocomplete',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  autoFocus(value: Attribute<State, boolean>) {\n    return this.attr(\n      'autofocus',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  multiple(value: Attribute<State, boolean>) {\n    return this.attr(\n      'multiple',\n      mapAttribute(value, toggleToString('multiple'))\n    )\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  required(value: Attribute<State, boolean>) {\n    return this.attr(\n      'required',\n      mapAttribute(value, toggleToString('required'))\n    )\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLSlotElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLSlotElement> {\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  onSlotChange(\n    handler: EventHandlerTE<State, Action, UIEvent, HTMLSlotElement> | undefined\n  ) {\n    return this.handle('slotchange', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class HTMLSourceElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLSourceElement> {\n  media(value: Attribute<State, string>) {\n    return this.attr('media', value)\n  }\n  sizes(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('sizes', mapAttribute(value, lostOrRecordToCommaSeparated))\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  srcset(value: Attribute<State, string>) {\n    return this.attr('srcset', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n}\n\nexport class HTMLStyleElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLStyleElement> {\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n  media(value: Attribute<State, string>) {\n    return this.attr('media', value)\n  }\n  nonce(value: Attribute<State, string>) {\n    return this.attr('nonce', value)\n  }\n  title(value: Attribute<State, string>) {\n    return this.attr('title', value)\n  }\n}\n\nexport class HTMLTableColElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTableColElement> {\n  span(value: Attribute<State, number>) {\n    return this.attr('span', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLTableDataCellElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTableDataCellElement> {\n  colSpan(value: Attribute<State, number>) {\n    return this.attr('colspan', mapAttribute(value, String))\n  }\n  headers(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'headers',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  rowSpan(value: Attribute<State, number>) {\n    return this.attr('rowspan', mapAttribute(value, String))\n  }\n}\n\nexport type THCellScope = 'row' | 'col' | 'rowgroup' | 'colgroup' | 'auto'\n\nexport class HTMLTableHeaderCellElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTableHeaderCellElement> {\n  abbr(value: Attribute<State, number>) {\n    return this.attr('abbr', mapAttribute(value, String))\n  }\n  colSpan(value: Attribute<State, number>) {\n    return this.attr('colspan', mapAttribute(value, String))\n  }\n  headers(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'headers',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  rowSpan(value: Attribute<State, number>) {\n    return this.attr('rowspan', mapAttribute(value, String))\n  }\n  scope(value: Attribute<State, THCellScope>) {\n    return this.attr('scope', value)\n  }\n}\n\nexport type SpellCheckValue = true | false | 'true' | 'false' | 'default'\nexport type WrapValue = 'hard' | 'soft'\n\nexport class HTMLTextAreaElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTextAreaElement> {\n  autoComplete(value: Attribute<State, ListOrRecordValue<AutoCompleteValue>>) {\n    return this.attr(\n      'autocomplete',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  autoFocus(value: Attribute<State, boolean>) {\n    return this.attr(\n      'autofocus',\n      mapAttribute(value, toggleToString('autofocus'))\n    )\n  }\n  cols(value: Attribute<State, number>) {\n    return this.attr('cols', mapAttribute(value, String))\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n  readonly(value: Attribute<State, boolean>) {\n    return this.attr(\n      'readonly',\n      mapAttribute(value, toggleToString('readonly'))\n    )\n  }\n  required(value: Attribute<State, boolean>) {\n    return this.attr(\n      'required',\n      mapAttribute(value, toggleToString('required'))\n    )\n  }\n  rows(value: Attribute<State, number>) {\n    return this.attr('rows', mapAttribute(value, String))\n  }\n  spellCheck(value: Attribute<State, SpellCheckValue>) {\n    return this.attr('spellcheck', mapAttribute(value, String))\n  }\n  wrap(value: Attribute<State, WrapValue>) {\n    return this.attr('wrap', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLTimeElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTimeElement> {\n  dateTime(value: Attribute<State, string>) {\n    return this.attr('datetime', value)\n  }\n}\n\nexport type TrackKindValue =\n  | 'subtitles'\n  | 'captions'\n  | 'descriptions'\n  | 'chapters'\n  | 'metadata'\n\nexport class HTMLTrackElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTrackElement> {\n  default(value: Attribute<State, boolean>) {\n    return this.attr('default', mapAttribute(value, toggleToString('default')))\n  }\n  kind(value: Attribute<State, TrackKindValue>) {\n    return this.attr('kind', value)\n  }\n  label(value: Attribute<State, string>) {\n    return this.attr('label', value)\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  srclang(value: Attribute<State, string>) {\n    return this.attr('srclang', value)\n  }\n  onCueChange(\n    handler: EventHandlerTE<State, Action, Event, HTMLTrackElement> | undefined\n  ) {\n    return this.handle('cuechange', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class HTMLVideoElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLMediaElementBuilder<State, Action, Query, HTMLVideoElement> {\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  playsInline(value: Attribute<State, boolean>): this {\n    return this.attr(\n      'playsinline',\n      mapAttribute(value, toggleToString('playsinline'))\n    )\n  }\n  poster(value: Attribute<State, string>) {\n    return this.attr('poster', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\n// transforms\nexport class ComponentHTMLBuilder<State, Action, Query>\n  extends BaseHTMLBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _delayed = false\n  private _equals: undefined | ((a: State, b: State) => boolean)\n  constructor(readonly reducer: (state: State, action: Action) => State) {\n    super()\n  }\n  Equals(equals: undefined | ((a: State, b: State) => boolean)) {\n    if (equals !== undefined) {\n      this._equals = equals\n    }\n    return this\n  }\n  Delayed(delayed: undefined | boolean) {\n    if (delayed !== undefined) {\n      this._delayed = delayed\n    }\n    return this\n  }\n  build() {\n    return new ComponentTemplate<State, Action, Query>(\n      this._delayed,\n      this.reducer,\n      this._equals,\n      this._children\n    )\n  }\n}\n\nexport class FragmentHTMLBuilder<State, Action, Query>\n  extends BaseHTMLBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  build() {\n    return new FragmentTemplate<State, Action, Query>(this._children)\n  }\n}\n\nexport class MapActionHTMLBuilder<State, Action, ActionB, Query>\n  extends BaseHTMLBuilder<State, ActionB, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(protected map: DerivedValue<ActionB, Action>) {\n    super()\n  }\n  build() {\n    return new MapActionTemplate<State, Action, ActionB, Query>(\n      this.map,\n      this._children\n    )\n  }\n}\n\nexport class MapQueryHTMLBuilder<State, Action, Query, QueryB>\n  extends BaseHTMLBuilder<State, Action, QueryB>\n  implements IBuilder<State, Action, Query> {\n  constructor(protected map: DerivedValue<Query, QueryB>) {\n    super()\n  }\n  build() {\n    return new MapQueryTemplate<State, Action, Query, QueryB>(\n      this.map,\n      this._children\n    )\n  }\n}\n\nexport class MapStateHTMLBuilder<State, StateB, Action, Query>\n  extends BaseHTMLBuilder<StateB, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _orElse: FragmentHTMLBuilder<State, Action, Query> | undefined\n  private _equals: undefined | ((a: StateB, b: StateB) => boolean)\n  constructor(protected map: Attribute<State, StateB>) {\n    super()\n  }\n  OrElse(init: (builder: FragmentHTMLBuilder<State, Action, Query>) => void) {\n    this._orElse = new FragmentHTMLBuilder<State, Action, Query>()\n    init(this._orElse!)\n    return this\n  }\n  Equals(equals: undefined | ((a: StateB, b: StateB) => boolean)) {\n    if (equals !== undefined) {\n      this._equals = equals\n    }\n    return this\n  }\n  build() {\n    return new MapStateTemplate<State, StateB, Action, Query>(\n      this.map,\n      (this._orElse && this._orElse.build()) ?? text(''),\n      this._equals,\n      this._children\n    )\n  }\n}\n\nexport class PortalHTMLBuilder<State, Action, Query>\n  extends BaseHTMLBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(readonly appendChild: (doc: Document, node: Node) => void) {\n    super()\n  }\n  build() {\n    return new PortalTemplate<State, Action, Query>(\n      this.appendChild,\n      this._children\n    )\n  }\n}\n\nexport class SimpleComponentHTMLBuilder<State, Query>\n  extends BaseHTMLBuilder<State, State, Query>\n  implements IBuilder<State, State, Query> {\n  private _delayed = false\n  constructor() {\n    super()\n  }\n  Delayed(delayed: undefined | boolean) {\n    if (delayed !== undefined) {\n      this._delayed = delayed\n    }\n    return this\n  }\n  build() {\n    return new SimpleComponentTemplate<State, Query>(\n      this._delayed,\n      this._children\n    )\n  }\n}\n\nexport class UntilHTMLBuilder<State, StateB, Action, Query>\n  extends BaseHTMLBuilder<StateB, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(\n    readonly next: DerivedOrLiteralValue<\n      { state: State; index: number },\n      StateB\n    >\n  ) {\n    super()\n  }\n  build() {\n    return new UntilTemplate<State, StateB, Action, Query>(\n      this.next,\n      this._children\n    )\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DifferentiateAt } from 'tempo-std/lib/types/differentiate'\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { removeNode } from './dom'\nimport { IndexType } from 'tempo-std/lib/types/index_type'\nimport { ObjectWithPath, TypeAtPath } from 'tempo-std/lib/types/objects'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\nimport { keys } from 'tempo-std/lib/objects'\n\nexport class MatchTemplate<\n  Path extends IndexType[],\n  State extends ObjectWithPath<Path, any>,\n  Action,\n  Query\n> implements DOMTemplate<State, Action, Query> {\n  readonly matcher: {\n    [k in TypeAtPath<Path, State>]: DOMTemplate<\n      DifferentiateAt<Path, State, k>,\n      Action,\n      Query\n    >\n  }\n  constructor(\n    readonly path: Path,\n    matcher: {\n      [k in TypeAtPath<Path, State>]:\n        | DOMChild<DifferentiateAt<Path, State, k>, Action, Query>\n        | IBuilder<DifferentiateAt<Path, State, k>, Action, Query>\n    }\n  ) {\n    this.matcher = keys(matcher).reduce(\n      (acc, key) => {\n        acc[key] = childOrBuilderToTemplate(matcher[key])\n        return acc\n      },\n      {} as {\n        [k in TypeAtPath<Path, State>]: DOMTemplate<\n          DifferentiateAt<Path, State, k>,\n          Action,\n          Query\n        >\n      }\n    )\n  }\n  render(ctx: DOMContext<Action>, state: State) {\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n    const { path, matcher } = this\n    let key = this.path.reduce(\n      (acc: any, key) => acc[key],\n      state\n    ) as TypeAtPath<Path, State>\n    let view = matcher[key].render(newCtx, state as any)\n    return {\n      change: (state: State) => {\n        const newKey = path.reduce(\n          (acc: any, key) => acc[key],\n          state\n        ) as TypeAtPath<Path, State>\n        if (newKey === key) {\n          view.change(state as any)\n        } else {\n          view.destroy()\n          key = newKey\n          view = matcher[newKey].render(newCtx, state as any)\n        }\n      },\n      destroy: () => {\n        removeNode(ref)\n        view.destroy()\n      },\n      request: (query: Query) => {\n        view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { removeNode } from './dom'\nimport { IndexType } from 'tempo-std/lib/types/index_type'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\nimport { keys } from 'tempo-std/lib/objects'\n\nexport class MatchValueTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly matcher: {\n    [_ in string | number]: DOMTemplate<State, Action, Query>\n  }\n  readonly orElse: DOMTemplate<State, Action, Query>\n  constructor(\n    readonly path: IndexType[],\n    matcher: {\n      [_ in string | number]:\n        | DOMChild<State, Action, Query>\n        | IBuilder<State, Action, Query>\n    },\n    orElse: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  ) {\n    this.matcher = keys(matcher).reduce(\n      (acc, key) => {\n        acc[key] = childOrBuilderToTemplate(this.matcher[key])\n        return acc\n      },\n      {} as {\n        [_ in string | number]: DOMTemplate<State, Action, Query>\n      }\n    )\n    this.orElse = childOrBuilderToTemplate(orElse)\n  }\n  render(ctx: DOMContext<Action>, state: State) {\n    const { matcher, orElse } = this\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n    let oldKey = this.path.reduce((acc: any, key) => acc[key], state)\n    const template = this.matcher[oldKey] || this.orElse\n    let view = template.render(newCtx, state)\n    return {\n      change: (state: State) => {\n        const newKey = this.path.reduce((acc: any, key) => acc[key], state)\n        if (newKey === oldKey) {\n          view.change(state)\n        } else {\n          view.destroy()\n          oldKey = newKey\n          const template = matcher[newKey] || orElse\n          view = template.render(newCtx, state)\n        }\n      },\n      destroy: () => {\n        removeNode(ref)\n        view.destroy()\n      },\n      request: (query: Query) => {\n        view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2020 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport {\n  HTMLElementBuilder,\n  HTMLAnchorElementBuilder,\n  HTMLAreaElementBuilder,\n  HTMLAudioElementBuilder,\n  HTMLBaseElementBuilder,\n  HTMLQuoteElementBuilder,\n  HTMLButtonElementBuilder,\n  HTMLCanvasElementBuilder,\n  HTMLTableColElementBuilder,\n  HTMLDataElementBuilder,\n  HTMLModElementBuilder,\n  HTMLDialogElementBuilder,\n  HTMLEmbedElementBuilder,\n  HTMLFieldSetElementBuilder,\n  HTMLDetailsElementBuilder,\n  HTMLFormElementBuilder,\n  HTMLIFrameElementBuilder,\n  HTMLImageElementBuilder,\n  HTMLInputElementBuilder,\n  HTMLHtmlElementBuilder,\n  HTMLLabelElementBuilder,\n  HTMLLIElementBuilder,\n  HTMLLinkElementBuilder,\n  HTMLMetaElementBuilder,\n  HTMLMapElementBuilder,\n  HTMLMeterElementBuilder,\n  HTMLObjectElementBuilder,\n  HTMLOListElementBuilder,\n  HTMLOptGroupElementBuilder,\n  HTMLOptionElementBuilder,\n  HTMLOutputElementBuilder,\n  HTMLParamElementBuilder,\n  HTMLPictureElementBuilder,\n  HTMLProgressElementBuilder,\n  HTMLScriptElementBuilder,\n  HTMLSelectElementBuilder,\n  HTMLSlotElementBuilder,\n  HTMLSourceElementBuilder,\n  HTMLStyleElementBuilder,\n  HTMLTableDataCellElementBuilder,\n  HTMLTextAreaElementBuilder,\n  HTMLTableHeaderCellElementBuilder,\n  HTMLTimeElementBuilder,\n  HTMLTrackElementBuilder,\n  HTMLVideoElementBuilder,\n  El,\n  ComponentHTMLBuilder,\n  MapStateHTMLBuilder,\n  MapActionHTMLBuilder,\n  MapQueryHTMLBuilder,\n  UntilHTMLBuilder,\n  FragmentHTMLBuilder,\n  PortalHTMLBuilder,\n  SimpleComponentHTMLBuilder\n} from './html_builder'\nimport { IBuilder } from './dom_builder'\nimport { Attribute, resolveAttribute } from '../value'\nimport { ComponentTemplate } from './component'\nimport { PropagateArg, AdapterTemplate } from './adapter'\nimport { DerivedValue } from 'tempo-core/lib/value'\nimport { IndexType } from 'tempo-std/lib/types/index_type'\nimport {\n  ObjectWithPath,\n  TypeAtPath,\n  ObjectWithField\n} from 'tempo-std/lib/types/objects'\nimport { DOMChild, DOMTemplate } from '../template'\nimport { DifferentiateAt } from 'tempo-std/lib/types/differentiate'\nimport { MatchTemplate } from './match_template'\nimport { MatchBoolTemplate } from './match_bool_template'\nimport { MatchValueTemplate } from './match_value_template'\nimport { Option } from 'tempo-std/lib/option'\nimport { Maybe, Just } from 'tempo-std/lib/maybe'\nimport { Result } from 'tempo-std/lib/result'\nimport { Async, Outcome } from 'tempo-std/lib/async'\nimport { AsyncResult } from 'tempo-std/lib/async_result'\nimport { LazyTemplate } from './lazy'\nimport { HoldF, HoldStateTemplate } from './hold_state'\n\nexport { El }\n\n// dom specific\nexport function A<State, Action, Query>(\n  init?: (builder: HTMLAnchorElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLAnchorElementBuilder<State, Action, Query>('a')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ABBR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'abbr'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ADDRESS<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'address'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function AREA<State, Action, Query>(\n  init?: (builder: HTMLAreaElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLAreaElementBuilder<State, Action, Query>('area')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ARTICLE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'article'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ASIDE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'aside'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function AUDIO<State, Action, Query>(\n  init?: (builder: HTMLAudioElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLAudioElementBuilder<State, Action, Query>('audio')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function B<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>('b')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BASE<State, Action, Query>(\n  init?: (builder: HTMLBaseElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLBaseElementBuilder<State, Action, Query>('base')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BDI<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'bdi'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BDO<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'bdo'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BLOCKQUOTE<State, Action, Query>(\n  init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLQuoteElementBuilder<State, Action, Query>(\n    'blockquote'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BODY<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLBodyElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLBodyElement>(\n    'body'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLBRElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLBRElement>(\n    'br'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BUTTON<State, Action, Query>(\n  init?: (builder: HTMLButtonElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLButtonElementBuilder<State, Action, Query>('button')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CANVAS<State, Action, Query>(\n  init?: (builder: HTMLCanvasElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLCanvasElementBuilder<State, Action, Query>('canvas')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CAPTION<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableCaptionElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableCaptionElement\n  >('caption')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CITE<State, Action, Query>(\n  init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLQuoteElementBuilder<State, Action, Query>('cite')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CODE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'code'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function COL<State, Action, Query>(\n  init?: (builder: HTMLTableColElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTableColElementBuilder<State, Action, Query>('col')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function COLGROUP<State, Action, Query>(\n  init?: (builder: HTMLTableColElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTableColElementBuilder<State, Action, Query>(\n    'colgroup'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DATA<State, Action, Query>(\n  init?: (builder: HTMLDataElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLDataElementBuilder<State, Action, Query>('data')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DATALIST<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLDataListElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLDataListElement\n  >('datalist')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DD<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'dd'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DEL<State, Action, Query>(\n  init?: (builder: HTMLModElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLModElementBuilder<State, Action, Query>('del')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DETAILS<State, Action, Query>(\n  init?: (builder: HTMLDetailsElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLDetailsElementBuilder<State, Action, Query>('details')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DFN<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'dfn'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DIALOG<State, Action, Query>(\n  init?: (builder: HTMLDialogElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLDialogElementBuilder<State, Action, Query>('dialog')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DIV<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLDivElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLDivElement>(\n    'div'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DL<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLDListElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLDListElement\n  >('dl')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DT<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'dt'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function EM<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'em'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function EMBED<State, Action, Query>(\n  init?: (builder: HTMLEmbedElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLEmbedElementBuilder<State, Action, Query>('embed')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FIELDSET<State, Action, Query>(\n  init?: (builder: HTMLFieldSetElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLFieldSetElementBuilder<State, Action, Query>(\n    'fieldset'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FIGCAPTION<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'figcaption'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FIGURE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'figure'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FOOTER<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'footer'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FORM<State, Action, Query>(\n  init?: (builder: HTMLFormElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLFormElementBuilder<State, Action, Query>('form')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H1<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLHeadingElement\n  >('h1')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H2<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLHeadingElement\n  >('h2')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H3<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLHeadingElement\n  >('h3')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H4<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLHeadingElement\n  >('h4')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H5<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'h5'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H6<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'h6'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HEAD<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLHeadElement>(\n    'head'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HEADER<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'header'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HGROUP<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'hgroup'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHRElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLHRElement>(\n    'hr'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HTML<State, Action, Query>(\n  init?: (builder: HTMLHtmlElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLHtmlElementBuilder<State, Action, Query>('html')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function I<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>('i')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function IFRAME<State, Action, Query>(\n  init?: (builder: HTMLIFrameElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLIFrameElementBuilder<State, Action, Query>('iframe')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function IMG<State, Action, Query>(\n  init?: (builder: HTMLImageElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLImageElementBuilder<State, Action, Query>('img')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function INPUT<State, Action, Query>(\n  init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function INS<State, Action, Query>(\n  init?: (builder: HTMLModElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLModElementBuilder<State, Action, Query>('ins')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function KBD<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'kbd'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LABEL<State, Action, Query>(\n  init?: (builder: HTMLLabelElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLLabelElementBuilder<State, Action, Query>('label')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LEGEND<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLLegendElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLLegendElement\n  >('legend')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LI<State, Action, Query>(\n  init?: (builder: HTMLLIElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLLIElementBuilder<State, Action, Query>('li')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LINK<State, Action, Query>(\n  init?: (builder: HTMLLinkElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLLinkElementBuilder<State, Action, Query>('link')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function MAIN<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'main'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function MAP<State, Action, Query>(\n  init?: (builder: HTMLMapElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLMapElementBuilder<State, Action, Query>('map')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function MARK<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'mark'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function META<State, Action, Query>(\n  init?: (builder: HTMLMetaElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLMetaElementBuilder<State, Action, Query>('meta')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function METER<State, Action, Query>(\n  init?: (builder: HTMLMeterElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLMeterElementBuilder<State, Action, Query>('meter')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function NAV<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'nav'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function NOSCRIPT<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'noscript'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OBJECT<State, Action, Query>(\n  init?: (builder: HTMLObjectElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLObjectElementBuilder<State, Action, Query>('object')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OL<State, Action, Query>(\n  init?: (builder: HTMLOListElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLOListElementBuilder<State, Action, Query>('ol')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OPTGROUP<State, Action, Query>(\n  init?: (builder: HTMLOptGroupElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLOptGroupElementBuilder<State, Action, Query>(\n    'optgroup'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OPTION<State, Action, Query>(\n  init?: (builder: HTMLOptionElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLOptionElementBuilder<State, Action, Query>('option')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OUTPUT<State, Action, Query>(\n  init?: (builder: HTMLOutputElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLOutputElementBuilder<State, Action, Query>('output')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function P<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLParagraphElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLParagraphElement\n  >('p')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PARAM<State, Action, Query>(\n  init?: (builder: HTMLParamElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLParamElementBuilder<State, Action, Query>('param')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PICTURE<State, Action, Query>(\n  init?: (builder: HTMLPictureElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLPictureElementBuilder<State, Action, Query>('picture')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PRE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLPreElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLPreElement>(\n    'pre'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PROGRESS<State, Action, Query>(\n  init?: (builder: HTMLProgressElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLProgressElementBuilder<State, Action, Query>(\n    'progress'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function Q<State, Action, Query>(\n  init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLQuoteElementBuilder<State, Action, Query>('q')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function RP<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'rp'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function RT<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'rt'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function RUBY<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'ruby'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function S<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>('s')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SAMP<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'samp'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SCRIPT<State, Action, Query>(\n  init?: (builder: HTMLScriptElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLScriptElementBuilder<State, Action, Query>('script')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SECTION<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'section'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SELECT<State, Action, Query>(\n  init?: (builder: HTMLSelectElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLSelectElementBuilder<State, Action, Query>('select')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SLOT<State, Action, Query>(\n  init?: (builder: HTMLSlotElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLSlotElementBuilder<State, Action, Query>('slot')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SMALL<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'small'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SOURCE<State, Action, Query>(\n  init?: (builder: HTMLSourceElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLSourceElementBuilder<State, Action, Query>('source')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SPAN<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLSpanElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLSpanElement>(\n    'span'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function STRONG<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'strong'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function STYLE<State, Action, Query>(\n  init?: (builder: HTMLStyleElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLStyleElementBuilder<State, Action, Query>('style')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SUB<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'sub'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SUMMARY<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'summary'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SUP<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'sup'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TABLE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableElement\n  >('table')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TBODY<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableSectionElement\n  >('tbody')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TD<State, Action, Query>(\n  init?: (\n    builder: HTMLTableDataCellElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new HTMLTableDataCellElementBuilder<State, Action, Query>(\n    'td'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TEMPLATE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTemplateElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTemplateElement\n  >('template')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TEXTAREA<State, Action, Query>(\n  init?: (builder: HTMLTextAreaElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTextAreaElementBuilder<State, Action, Query>(\n    'textarea'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TFOOT<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableSectionElement\n  >('tfoot')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TH<State, Action, Query>(\n  init?: (\n    builder: HTMLTableHeaderCellElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new HTMLTableHeaderCellElementBuilder<State, Action, Query>(\n    'th'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function THEAD<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'thead'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TIME<State, Action, Query>(\n  init?: (builder: HTMLTimeElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTimeElementBuilder<State, Action, Query>('time')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TITLE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTitleElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTitleElement\n  >('title')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableRowElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableRowElement\n  >('tr')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TRACK<State, Action, Query>(\n  init?: (builder: HTMLTrackElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTrackElementBuilder<State, Action, Query>('track')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function U<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>('u')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function UL<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLUListElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLUListElement\n  >('ul')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function VAR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'varEl'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function VIDEO<State, Action, Query>(\n  init?: (builder: HTMLVideoElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLVideoElementBuilder<State, Action, Query>('video')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function WBR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'wbr'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function Adapter<State, StateB, Action, ActionB, Query>(props: {\n  bootstrapState: (outer: State) => StateB\n  mergeStates?: Attribute<\n    {\n      outerState: State\n      innerState: StateB\n    },\n    StateB\n  >\n  propagate?: (args: PropagateArg<State, StateB, Action, ActionB>) => void\n  child: ComponentTemplate<StateB, ActionB, Query>\n}) {\n  return new AdapterTemplate(\n    props.bootstrapState,\n    props.mergeStates,\n    props.propagate || (() => undefined),\n    props.child\n  )\n}\n\nexport function LocalAdapter<State, Action, Query>(props: {\n  propagate?: (args: PropagateArg<State, State, Action, Action>) => void\n  child: ComponentTemplate<State, Action, Query>\n}) {\n  return new AdapterTemplate(\n    state => state,\n    ({ outerState }) => outerState,\n    props.propagate || (() => undefined),\n    props.child\n  )\n}\n\nexport function Component<State, Action, Query>(\n  reducer: (state: State, action: Action) => State,\n  init: (builder: ComponentHTMLBuilder<State, Action, Query>) => void\n) {\n  const builder = new ComponentHTMLBuilder<State, Action, Query>(reducer)\n  init(builder)\n  return builder\n}\n\nexport function HoldState<State, StateB, StateC, Action, Query>(\n  holdf: HoldF<\n    State,\n    StateB,\n    StateC,\n    Action,\n    Query,\n    FragmentHTMLBuilder<StateC, Action, Query>\n  >\n) {\n  const builder = new FragmentHTMLBuilder<StateC, Action, Query>()\n  return new HoldStateTemplate(holdf, builder)\n}\n\nexport function Iterate<State, Items extends any[], Action, Query>(\n  map: DerivedValue<State, Items>,\n  init: (\n    builder: UntilHTMLBuilder<\n      [Items, State],\n      [Items[number], State, number],\n      Action,\n      Query\n    >\n  ) => void\n) {\n  return MapState<State, [Items, State], Action, Query>(\n    (outer: State): [Items, State] | undefined => {\n      const items = resolveAttribute(map)(outer)\n      return items !== undefined ? [items, outer] : undefined\n    },\n    n => {\n      n.Until<[Items[number], State, number]>(\n        ({ state: [items, state], index }) =>\n          items[index] && [items[index], state, index],\n        init\n      )\n    }\n  )\n}\n\nexport function MapState<State, StateB, Action, Query>(\n  map: (state: State) => StateB | undefined,\n  init: (builder: MapStateHTMLBuilder<State, StateB, Action, Query>) => void\n) {\n  const builder = new MapStateHTMLBuilder<State, StateB, Action, Query>(map)\n  init(builder)\n  return builder\n}\n\nexport function MapField<\n  State,\n  Action,\n  Query,\n  K extends keyof State = keyof State\n>(\n  field: K,\n  init: (builder: MapStateHTMLBuilder<State, State[K], Action, Query>) => void\n) {\n  return MapState<State, State[K], Action, Query>(\n    (v: State): State[K] => v[field],\n    init\n  )\n}\n\nexport function MapStateAndKeep<State, StateB, Action, Query>(\n  map: (state: State) => StateB | undefined,\n  init: (\n    builder: MapStateHTMLBuilder<State, [StateB, State], Action, Query>\n  ) => void\n) {\n  return MapState<State, [StateB, State], Action, Query>((state: State) => {\n    const inner = resolveAttribute(map)(state)\n    if (inner !== undefined) {\n      return [inner, state]\n    } else {\n      return undefined\n    }\n  }, init)\n}\n\nexport function MapAction<State, Action, ActionB, Query>(\n  map: DerivedValue<ActionB, Action>,\n  init: (builder: MapActionHTMLBuilder<State, Action, ActionB, Query>) => void\n) {\n  const builder = new MapActionHTMLBuilder<State, Action, ActionB, Query>(map)\n  init(builder)\n  return builder\n}\n\nexport function MapQuery<State, Action, Query, QueryB>(\n  map: DerivedValue<Query, QueryB>,\n  init: (builder: MapQueryHTMLBuilder<State, Action, Query, QueryB>) => void\n) {\n  const builder = new MapQueryHTMLBuilder<State, Action, Query, QueryB>(map)\n  init(builder)\n  return builder\n}\n\nexport function Match<\n  Path extends IndexType[],\n  State extends ObjectWithPath<Path, any>,\n  Action,\n  Query = unknown\n>(props: {\n  path: Path\n  matcher: {\n    [k in TypeAtPath<Path, State>]:\n      | DOMChild<DifferentiateAt<Path, State, k>, Action, Query>\n      | IBuilder<DifferentiateAt<Path, State, k>, Action, Query>\n  }\n}): DOMTemplate<State, Action, Query> {\n  return new MatchTemplate<Path, State, Action, Query>(\n    props.path,\n    props.matcher\n  )\n}\n\nexport function MatchKind<\n  State extends ObjectWithField<'kind', any>,\n  Action,\n  Query = unknown\n>(\n  matcher: {\n    [k in State['kind']]:\n      | DOMChild<DifferentiateAt<['kind'], State, k>, Action, Query>\n      | IBuilder<DifferentiateAt<['kind'], State, k>, Action, Query>\n  }\n): DOMTemplate<State, Action, Query> {\n  return Match<['kind'], State, Action, Query>({\n    path: ['kind'],\n    matcher\n  })\n}\n\nexport function MatchBool<State, Action, Query = unknown>(props: {\n  condition: Attribute<State, boolean>\n  true: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  false: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<State, Action, Query> {\n  return new MatchBoolTemplate<State, Action, Query>(\n    props.condition,\n    props.true,\n    props.false\n  )\n}\n\nexport function MatchValue<\n  Path extends IndexType[],\n  State extends ObjectWithPath<Path, string>,\n  Action,\n  Query = unknown\n>(props: {\n  path: Path\n  matcher: {\n    [_ in string | number]:\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  }\n  orElse: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<State, Action, Query> {\n  return new MatchValueTemplate<State, Action, Query>(\n    props.path,\n    props.matcher,\n    props.orElse\n  )\n}\n\nexport function MatchOption<State, Action, Query = unknown>(props: {\n  Some: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  None: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n}): DOMTemplate<Option<State>, Action, Query> {\n  return MatchKind({\n    Some: MapField('value', n => n.Append(props.Some)),\n    None: MapState(\n      () => null,\n      n => n.Append(props.None)\n    )\n  })\n}\n\nexport function MatchMaybe<State, Action, Query = unknown>(props: {\n  Just: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Nothing?: DOMChild<unknown, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<Maybe<State>, Action, Query> {\n  return new MatchBoolTemplate<Maybe<State>, Action, Query>(\n    v => v !== undefined,\n    MapState(\n      (opt: Maybe<State>) => opt as Just<State>,\n      n => n.Append(props.Just)\n    ),\n    props.Nothing as DOMChild<unknown, Action, Query>\n  )\n}\n\nexport function MatchResult<State, Error, Action, Query = unknown>(props: {\n  Success: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Failure: DOMChild<Error, Action, Query> | IBuilder<Error, Action, Query>\n}): DOMTemplate<Result<State, Error>, Action, Query> {\n  return MatchKind({\n    Success: MapField('value', n => n.Append(props.Success)),\n    Failure: MapField('error', n => n.Append(props.Failure))\n  })\n}\n\nexport function MatchAsync<State, Progress, Action, Query = unknown>(props: {\n  Outcome: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  NotAsked: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n  Loading: DOMChild<Progress, Action, Query> | IBuilder<Progress, Action, Query>\n}): DOMTemplate<Async<State, Progress>, Action, Query> {\n  return MatchKind({\n    Outcome: MapField('value', n => n.Append(props.Outcome)),\n    Loading: MapField('progress', n => n.Append(props.Loading)),\n    NotAsked: MapState(\n      () => null,\n      n => n.Append(props.NotAsked)\n    )\n  })\n}\n\nexport function MatchAsyncResult<\n  State,\n  Error,\n  Progress,\n  Action,\n  Query = unknown\n>(props: {\n  Success: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Failure: DOMChild<Error, Action, Query> | IBuilder<Error, Action, Query>\n  NotAsked: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n  Loading: DOMChild<Progress, Action, Query> | IBuilder<Progress, Action, Query>\n}): DOMTemplate<AsyncResult<State, Error, Progress>, Action, Query> {\n  return MatchKind<AsyncResult<State, Error, Progress>, Action, Query>({\n    Outcome: MapState(\n      (o: Outcome<Result<State, Error>>) => o.value,\n      n =>\n        n.Append(\n          MatchResult<State, Error, Action, Query>({\n            Success: props.Success,\n            Failure: props.Failure\n          })\n        )\n    ),\n    Loading: MapField('progress', $ => $.Append(props.Loading)),\n    NotAsked: MapState(\n      () => null,\n      n => n.Append(props.NotAsked)\n    )\n  })\n}\n\nexport function Lazy<State, Action, Query>(\n  lazyf: () =>\n    | DOMTemplate<State, Action, Query>\n    | IBuilder<State, Action, Query>\n) {\n  return new LazyTemplate(lazyf)\n}\n\nexport function Fragment<State, Action, Query>(\n  init: (builder: FragmentHTMLBuilder<State, Action, Query>) => void\n) {\n  const builder = new FragmentHTMLBuilder<State, Action, Query>()\n  init(builder)\n  return builder\n}\n\nexport function ForEach<State, Action, Query>(\n  init: (\n    builder: UntilHTMLBuilder<\n      State,\n      State extends any[] ? State[number] : never,\n      Action,\n      Query\n    >\n  ) => void\n) {\n  return Until(\n    ({\n      state,\n      index\n    }: {\n      state: State\n      index: number\n    }): State extends any[] ? State[number] : never => (state as any)[index],\n    init\n  )\n}\n\nexport function Portal<State, Action, Query>(\n  appendChild: (doc: Document, node: Node) => void,\n  init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n) {\n  const builder = new PortalHTMLBuilder<State, Action, Query>(appendChild)\n  init(builder)\n  return builder\n}\n\nexport function PortalWithSelector<State, Action, Query>(\n  selector: string,\n  init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n) {\n  return Portal((doc: HTMLDocument, node: Node) => {\n    const el = doc.querySelector(selector)\n    if (!el) {\n      throw new Error(`selector doesn't match any element: \"${selector}\"`)\n    }\n    el.appendChild(node)\n  }, init)\n}\n\nexport function HeadPortal<State, Action, Query>(\n  init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n) {\n  return Portal((doc, node) => doc.head.appendChild(node), init)\n}\n\nexport function BodyPortal<State, Action, Query>(\n  init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n) {\n  return Portal((doc, node) => doc.body.appendChild(node), init)\n}\n\nexport function SimpleComponent<State, Query>(\n  init: (builder: SimpleComponentHTMLBuilder<State, Query>) => void\n) {\n  const builder = new SimpleComponentHTMLBuilder<State, Query>()\n  init(builder)\n  return builder\n}\n\nexport function Unless<State, Action, Query>(\n  condition: DerivedValue<State, boolean>,\n  init: (builder: MapStateHTMLBuilder<State, State, Action, Query>) => void\n) {\n  return When(s => !condition(s), init)\n}\n\nexport function Until<State, StateB, Action, Query>(\n  next: DerivedValue<{ state: State; index: number }, StateB>,\n  init: (builder: UntilHTMLBuilder<State, StateB, Action, Query>) => void\n) {\n  const builder = new UntilHTMLBuilder<State, StateB, Action, Query>(next)\n  init(builder)\n  return builder\n}\n\nexport function When<State, Action, Query>(\n  condition: DerivedValue<State, boolean>,\n  init: (builder: MapStateHTMLBuilder<State, State, Action, Query>) => void\n) {\n  const builder = new MapStateHTMLBuilder<State, State, Action, Query>(s => {\n    if (condition(s)) {\n      return s\n    } else {\n      return undefined\n    }\n  })\n  init(builder)\n  return builder\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { ComponentTemplate, ComponentView } from './impl/component'\nimport { DOMContext } from './context'\nimport { DOMChild } from './template'\nimport { SimpleComponent } from './impl/simple_component'\nimport { Reducer } from 'tempo-core/lib/reducer'\nimport {\n  SimpleComponentHTMLBuilder,\n  ComponentHTMLBuilder\n} from './impl/html_builder'\nimport { IBuilder, childOrBuilderToTemplate } from './impl/dom_builder'\nimport { Component } from './impl/html'\n\nexport type Middleware<State, Action> = (\n  dispatch: (action: Action) => void\n) => (state: State, action: Action, previous: State) => void\n\nexport type SimpleMiddlware<State> = (\n  dispatch: (state: State) => void\n) => (state: State, previous: State) => void\n\nexport const Tempo = {\n  renderComponent<State, Action, Query = unknown>(options: {\n    el?: HTMLElement\n    state: State\n    component:\n      | ComponentTemplate<State, Action, Query>\n      | ComponentHTMLBuilder<State, Action, Query>\n    document?: Document\n    middleware?: Middleware<State, Action>\n  }): ComponentView<State, Action, Query> {\n    const { el: maybeElement, component } = options\n    let localState = options.state\n    const doc = options.document || document\n    const el = maybeElement || doc.body\n    const append = (node: Node) => el.appendChild(node)\n    const template = childOrBuilderToTemplate(component) as ComponentTemplate<\n      State,\n      Action,\n      Query\n    >\n\n    const appliedMiddleware =\n      options.middleware !== undefined\n        ? options.middleware((action: Action) => {\n            view.dispatch(action)\n          })\n        : () => {}\n\n    const view = template.render(\n      new DOMContext(doc, append, (action: Action) => {\n        appliedMiddleware(view.state, action, localState)\n        localState = view.state\n      }),\n      localState\n    )\n\n    return view\n  },\n\n  render<State, Action, Query = unknown>(options: {\n    el?: HTMLElement\n    template: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n    state: State\n    reducer: Reducer<State, Action>\n    equal?: (a: State, b: State) => boolean\n    document?: Document\n    delayed?: boolean\n    middleware?: Middleware<State, Action>\n  }): ComponentView<State, Action, Query> {\n    const {\n      el,\n      state,\n      reducer,\n      equal,\n      document,\n      template,\n      delayed,\n      middleware\n    } = options\n    const component = Component(reducer, $ => {\n      $.Equals(equal).Delayed(delayed).Append(template)\n    })\n    return Tempo.renderComponent({\n      el,\n      component,\n      state,\n      document,\n      middleware\n    })\n  },\n\n  renderSimple<State, Query = unknown>(options: {\n    el?: HTMLElement\n    component:\n      | SimpleComponent<State, Query>\n      | SimpleComponentHTMLBuilder<State, Query>\n    state: State\n    document?: Document\n    middleware?: SimpleMiddlware<State>\n  }) {\n    const { el: maybeElement, component } = options\n    let localState = options.state\n    const doc = options.document || document\n    const el = maybeElement || doc.body\n    const append = (node: Node) => el.appendChild(node)\n    const template = childOrBuilderToTemplate(component)\n\n    const appliedMiddleware =\n      options.middleware !== undefined\n        ? options.middleware((state: State) => result.change(state))\n        : () => {}\n\n    const result = {\n      ...template.render(\n        new DOMContext(doc, append, (state: State) => {\n          appliedMiddleware(state, localState)\n          localState = state\n        }),\n        localState\n      )\n    }\n\n    return result\n  }\n}\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Differentiate, DifferentiateAt } from './types/differentiate'\nimport { IndexType } from './types/index_type'\nimport { ObjectWithField, ObjectWithPath, TypeAtPath } from './types/objects'\n\nexport function matchLiteral<A extends IndexType, B>(\n  input: A,\n  matcher: { [k in A]: B }\n) {\n  return matcher[input]\n}\n\nexport function match<\n  F extends IndexType,\n  T extends ObjectWithField<F, any>,\n  B\n>(\n  input: T,\n  field: F,\n  matcher: { [k in T[F]]: (arg: Differentiate<F, T, k>) => B }\n): B {\n  const k = input[field]\n  return matcher[k](input as any)\n}\n\nexport function deepMatch<\n  Path extends IndexType[],\n  T extends ObjectWithPath<Path, any>,\n  B\n>(\n  input: T,\n  path: Path,\n  matcher: {\n    [k in TypeAtPath<Path, T>]: (arg: DifferentiateAt<Path, T, k>) => B\n  }\n): B {\n  const k = path.reduce((res: any, key) => res[key], input) as TypeAtPath<\n    Path,\n    T\n  >\n  return matcher[k](input as any)\n}\n\nexport function createMatch<F extends IndexType>(field: F) {\n  return <T extends ObjectWithField<F, any>, B>(\n    input: T,\n    matcher: { [k in T[F]]: (arg: Differentiate<F, T, k>) => B }\n  ): B => {\n    const k = input[field]\n    return matcher[k](input as any)\n  }\n}\n\nexport const createDeepMatch = <Path extends IndexType[]>(...path: Path) => <\n  T extends ObjectWithPath<Path, any>,\n  B\n>(\n  input: T,\n  matcher: {\n    [k in TypeAtPath<Path, T>]: (arg: DifferentiateAt<Path, T, k>) => B\n  }\n): B => {\n  const k = path.reduce((res: any, key) => res[key], input) as TypeAtPath<\n    Path,\n    T\n  >\n  return matcher[k](input as any)\n}\n\nexport const matchKind = createMatch('kind')\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport {\n  decodeText,\n  match,\n  digits,\n  rest,\n  eoi\n} from 'partsing/text'\n\nimport { oneOf } from 'partsing/core/decoder'\nimport { matchKind } from 'tempo-std/lib//match'\n\nexport enum Feed {\n  top = 'top',\n  new = 'new',\n  ask = 'ask',\n  show = 'show',\n  jobs = 'jobs'\n}\n\nexport interface RootRoute {\n  readonly kind: 'RootRoute'\n}\n\nexport interface FeedsRoute {\n  readonly kind: 'FeedsRoute'\n  readonly feed: Feed\n  readonly page: number\n}\n\nexport interface ExternalRoute {\n  readonly kind: 'ExternalRoute'\n  readonly path: string\n}\n\nexport interface ItemRoute {\n  readonly kind: 'ItemRoute'\n  readonly item: number\n}\n\nexport interface UserRoute {\n  readonly kind: 'UserRoute'\n  readonly user: string\n}\n\nexport interface NotFoundRoute {\n  readonly kind: 'NotFoundRoute'\n}\n\nexport type Route = RootRoute | FeedsRoute | ItemRoute | UserRoute | NotFoundRoute | ExternalRoute\n\nexport const Route = {\n  root: { kind: 'RootRoute' } as Route,\n  feeds: (feed: Feed, page: number): Route => ({ kind: 'FeedsRoute', feed, page }),\n  item: (item: number): Route => ({ kind: 'ItemRoute', item }),\n  user: (user: string | undefined): Route => ({ kind: 'UserRoute', user: user || '' }),\n  notFound: { kind: 'NotFoundRoute' } as Route,\n  externalRoute: (path: string): Route => ({ kind: 'ExternalRoute', path }),\n\n  fromUrl: (url: string): Route => {\n    const result = urlDecoder(url)\n    switch (result.kind) {\n      case 'decode-success':\n        return result.value\n      default:\n        return Route.notFound\n    }\n  }\n}\n\nexport interface RouteData {\n  readonly title: string\n  readonly url: string\n}\n\nexport const routeData = (title: string, url: string): RouteData => ({ title, url })\n\nexport const maxPage = (feed: Feed) => {\n  switch (feed) {\n    case Feed.top:  return 10\n    case Feed.new:  return 10\n    case Feed.ask:  return 2\n    case Feed.show: return 2\n    case Feed.jobs: return 1\n    default: throw 'should never happen'\n  }\n}\n\nconst feedToTitle = (feed: Feed) => {\n  const s = feed.toString()\n  return s.substring(0, 1).toUpperCase() + s.substring(1)\n}\n\nexport const toRouteData = (route: Route) => matchKind<Route, RouteData>(\n  route,\n  {\n    FeedsRoute: (route) => routeData(feedToTitle(route.feed), route.page === 1 ? `/${route.feed}` : `/${route.feed}/page/${route.page}`),\n    ItemRoute: (route) => routeData('Item', `/item/${route.item}`),\n    NotFoundRoute: () => routeData('404', '/404'),\n    RootRoute: () => routeData('Top', '/'),\n    UserRoute: (route) => routeData(route.user, `/user/${route.user}`),\n    ExternalRoute: (route) => routeData('External', route.path)\n  }\n)\n\nexport const toTitle = (route: Route): string => toRouteData(route).title\nexport const toUrl = (route: Route): string => toRouteData(route).url\n\nconst parseFeed = oneOf(\n  match('/top').withResult(Feed.top),\n  match('/new').withResult(Feed.new),\n  match('/ask').withResult(Feed.ask),\n  match('/show').withResult(Feed.show),\n  match('/jobs').withResult(Feed.jobs)\n)\n\nconst urlDecoder = decodeText<Route>(\n  oneOf(\n    oneOf(\n      parseFeed.skipNext(eoi).map(feed => Route.feeds(feed, 1)),\n      parseFeed.join(\n        match('/page/').pickNext(digits(1)).map(Number)\n      ).map(([feed, page]: [Feed, number]) => Route.feeds(feed, page))\n    ),\n    match('/item/').pickNext(digits(0)).map(Number).map(Route.item),\n    match('/user/').pickNext(rest).map(i => Route.user(i)),\n    match('/404').map(() => Route.notFound),\n    match('/').skipNext(eoi).map(_ => Route.root)\n  )\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { HttpError } from './http_error'\nimport { Item, User } from './state'\nimport { Route, Feed } from './route'\nimport { Result } from 'tempo-std/lib/result'\n\nexport interface LinkClicked {\n  readonly kind: 'LinkClicked'\n  readonly route: Route\n}\n\nexport interface UrlChanged {\n  readonly kind: 'UrlChanged'\n  readonly url: string // Url.Url\n}\n\nexport interface GotItem {\n  readonly kind: 'GotItem'\n  readonly id: number\n  readonly result: Result<Item, HttpError>\n}\n\nexport interface GotUser {\n  readonly kind: 'GotUser'\n  readonly user: string\n  readonly result: Result<User, HttpError>\n}\n\nexport interface GotFeed {\n  readonly kind: 'GotFeed'\n  readonly feed: Feed\n  readonly result: Result<Item[], HttpError>\n}\n\nexport type Action = LinkClicked | UrlChanged | GotItem | GotUser | GotFeed\n\nexport const Action = {\n  linkClicked(route: Route): Action {\n    return { kind: 'LinkClicked', route }\n  },\n  urlChanged(url: string): Action {\n    return { kind: 'UrlChanged', url }\n  },\n  gotItem(id: number, result: Result<Item, HttpError>): Action {\n    return { kind: 'GotItem', id, result }\n  },\n  gotUser(user: string, result: Result<User, HttpError>): Action {\n    return { kind: 'GotUser', user, result }\n  },\n  gotFeed(feed: Feed, result: Result<Item[], HttpError>): Action {\n    return { kind: 'GotFeed', feed, result }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Action } from '../action'\nimport { Route, toUrl, toTitle } from '../route'\nimport { A } from 'tempo-dom/lib/html'\nimport { Attribute, mapAttribute, resolveAttribute } from 'tempo-dom/lib/value'\nimport { DOMChild, DOMTemplate } from 'tempo-dom/lib/template'\n// import 'tempo-dom/lib/value'\n\nexport function linkRoute<State, Action, Query>(\n  opts: {\n    route: Attribute<State, Route>\n    className?: Attribute<State, string>\n  },\n  ...children: DOMChild<State, Action, Query>[]\n): DOMTemplate<State, Action, Query> {\n  if (children.length === 0) {\n    children.push(mapAttribute(opts.route, toTitle))\n  }\n  return A<State, Action, Query>($ =>\n    $.href(mapAttribute(opts.route, toUrl))\n      .class(opts.className)\n      .target(\n        mapAttribute(opts.route, a =>\n          a.kind === 'ExternalRoute' ? '_blank' : undefined\n        )\n      )\n      .rel(\n        mapAttribute(opts.route, a =>\n          a.kind === 'ExternalRoute' ? 'noopener' : undefined\n        )\n      )\n      .onClick((state: State, ev, el) => {\n        ev.preventDefault()\n        const route = resolveAttribute(opts.route)(state)!\n        return (Action.linkClicked(route) as unknown) as Action // TODO not sure why this is needed\n      })\n      .AppendMany(...children)\n  ).build()\n}\n","/*\nCopyright 2020 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { IBuilder } from './dom_builder'\nimport { Attribute, resolveAttribute } from '../value'\nimport { ComponentTemplate } from './component'\nimport { PropagateArg, AdapterTemplate } from './adapter'\nimport { DerivedValue } from 'tempo-core/lib/value'\nimport { IndexType } from 'tempo-std/lib/types/index_type'\nimport {\n  ObjectWithPath,\n  TypeAtPath,\n  ObjectWithField\n} from 'tempo-std/lib/types/objects'\nimport { DOMChild, DOMTemplate } from '../template'\nimport { DifferentiateAt } from 'tempo-std/lib/types/differentiate'\nimport { MatchTemplate } from './match_template'\nimport { MatchBoolTemplate } from './match_bool_template'\nimport { MatchValueTemplate } from './match_value_template'\nimport { Option } from 'tempo-std/lib/option'\nimport { Maybe, Just } from 'tempo-std/lib/maybe'\nimport { Result } from 'tempo-std/lib/result'\nimport { Async, Outcome } from 'tempo-std/lib/async'\nimport { AsyncResult } from 'tempo-std/lib/async_result'\nimport { LazyTemplate } from './lazy'\nimport {\n  svgEl,\n  SVGSVGElementBuilder,\n  ComponentSVGBuilder,\n  MapStateSVGBuilder,\n  MapActionSVGBuilder,\n  MapQuerySVGBuilder,\n  UntilSVGBuilder,\n  FragmentSVGBuilder,\n  SimpleComponentSVGBuilder,\n  PortalSVGBuilder,\n  SVGAnchorElementBuilder,\n  SVGCircleElementBuilder,\n  SVGElementBuilder,\n  SVGFEColorMatrixElementBuilder,\n  SVGFEComponentTransferElementBuilder,\n  SVGEllipseElementBuilder,\n  SVGFEBlendElementBuilder,\n  SVGFeCompositeElementBuilder,\n  SVGFEConvolveMatrixElementBuilder,\n  SVGFEDiffuseLightingElementBuilder,\n  SVGFEDisplacementMapElementBuilder,\n  SVGFEDistantLightElementBuilder,\n  SVGFEFloodElementBuilder,\n  SVGFEFuncAElementBuilder,\n  SVGFEFuncBElementBuilder,\n  SVGFEFuncGElementBuilder,\n  SVGFEFuncRElementBuilder,\n  SVGFEGaussianBlurElementBuilder,\n  SVGFEImageElementBuilder,\n  SVGFEMergeElementBuilder,\n  SVGFEMergeNodeElementBuilder,\n  SVGFEMorphologyElementBuilder,\n  SVGFEOffsetElementBuilder,\n  SVGFEPointLightElementBuilder,\n  SVGFESpecularLightingElementBuilder,\n  SVGFESpotLightElementBuilder,\n  SVGFETileElementBuilder,\n  SVGFETurbulenceElementBuilder,\n  SVGFilterElementBuilder,\n  SVGForeignObjectElementBuilder,\n  SVGGElementBuilder,\n  SVGImageElementBuilder,\n  SVGLineElementBuilder,\n  SVGLinearGradientElementBuilder,\n  SVGMarkerElementBuilder,\n  SVGMaskElementBuilder,\n  SVGMetadataElementBuilder,\n  SVGPathElementBuilder,\n  SVGPatternElementBuilder,\n  SVGPolygonElementBuilder,\n  SVGPolylineElementBuilder,\n  SVGRadialGradientElementBuilder,\n  SVGRectElementBuilder,\n  SVGScriptElementBuilder,\n  SVGStopElementBuilder,\n  SVGStyleElementBuilder,\n  SVGSwitchElementBuilder,\n  SVGSymbolElementBuilder,\n  SVGTextElementBuilder,\n  SVGTextPathElementBuilder,\n  SVGTitleElementBuilder,\n  SVGTSpanElementBuilder,\n  SVGUseElementBuilder,\n  SVGViewElementBuilder\n} from './svg_builder'\nimport { HoldF, HoldStateTemplate } from './hold_state'\n\nexport { svgEl }\n\n// transform\nexport function HoldState<State, StateB, StateC, Action, Query>(\n  holdf: HoldF<\n    State,\n    StateB,\n    StateC,\n    Action,\n    Query,\n    FragmentSVGBuilder<StateC, Action, Query>\n  >\n) {\n  const builder = new FragmentSVGBuilder<StateC, Action, Query>()\n  return new HoldStateTemplate(holdf, builder)\n}\n\nexport function ForEach<State, Action, Query>(\n  init: (\n    builder: UntilSVGBuilder<\n      State,\n      State extends any[] ? State[number] : never,\n      Action,\n      Query\n    >\n  ) => void\n) {\n  return Until(\n    ({\n      state,\n      index\n    }: {\n      state: State\n      index: number\n    }): State extends any[] ? State[number] : never => (state as any)[index],\n    init\n  )\n}\n\nexport function Portal<State, Action, Query>(\n  appendChild: (doc: Document, node: Node) => void,\n  init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n) {\n  const builder = new PortalSVGBuilder<State, Action, Query>(appendChild)\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function PortalWithSelector<State, Action, Query>(\n  selector: string,\n  init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n) {\n  return Portal(doc => {\n    const el = doc.querySelector(selector)\n    if (!el) {\n      throw new Error(`selector doesn't match any element: \"${selector}\"`)\n    }\n    return el\n  }, init)\n}\n\nexport function HeadPortal<State, Action, Query>(\n  init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n) {\n  return Portal((doc, node) => doc.head.appendChild(node), init)\n}\n\nexport function BodyPortal<State, Action, Query>(\n  init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n) {\n  return Portal((doc, node) => doc.body.appendChild(node), init)\n}\n\n// SimpleComponent(\n//   init: (builder: SimpleComponentBuilder<State, Query>) => void\n// ) {\n//   const builder = new SimpleComponentBuilder<State, Query>()\n//   init(builder)\n//   return this.append(builder.build())\n// }\n\n// derived children\nexport function A<State, Action, Query>(\n  init?: (builder: SVGAnchorElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGAnchorElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CIRCLE<State, Action, Query>(\n  init?: (builder: SVGCircleElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGCircleElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CLIP_PATH<State, Action, Query>(\n  init?: (\n    builder: SVGElementBuilder<State, Action, Query, SVGClipPathElement>\n  ) => void\n) {\n  const builder = new SVGElementBuilder<\n    State,\n    Action,\n    Query,\n    SVGClipPathElement\n  >('clipPath')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DEFS<State, Action, Query>(\n  init?: (\n    builder: SVGElementBuilder<State, Action, Query, SVGDefsElement>\n  ) => void\n) {\n  const builder = new SVGElementBuilder<State, Action, Query, SVGDefsElement>(\n    'defs'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DESC<State, Action, Query>(\n  init?: (\n    builder: SVGElementBuilder<State, Action, Query, SVGDescElement>\n  ) => void\n) {\n  const builder = new SVGElementBuilder<State, Action, Query, SVGDescElement>(\n    'desc'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ELLIPSE<State, Action, Query>(\n  init?: (builder: SVGEllipseElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGEllipseElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_BLEND<State, Action, Query>(\n  init?: (builder: SVGFEBlendElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEBlendElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_COLOR_MATRIX<State, Action, Query>(\n  init?: (builder: SVGFEColorMatrixElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEColorMatrixElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_COMPONENT_TRANSFER<State, Action, Query>(\n  init?: (\n    builder: SVGFEComponentTransferElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGFEComponentTransferElementBuilder<\n    State,\n    Action,\n    Query\n  >()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_COMPOSITE<State, Action, Query>(\n  init?: (builder: SVGFeCompositeElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFeCompositeElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_CONVOLVE_MATRIX<State, Action, Query>(\n  init?: (\n    builder: SVGFEConvolveMatrixElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGFEConvolveMatrixElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_DIFFUSE_LIGHTING<State, Action, Query>(\n  init?: (\n    builder: SVGFEDiffuseLightingElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGFEDiffuseLightingElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_DISPLACEMENT_MAP<State, Action, Query>(\n  init?: (\n    builder: SVGFEDisplacementMapElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGFEDisplacementMapElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_DISTANT_LIGHT<State, Action, Query>(\n  init?: (\n    builder: SVGFEDistantLightElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGFEDistantLightElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_FLOOD<State, Action, Query>(\n  init?: (builder: SVGFEFloodElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEFloodElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_FUNC_A<State, Action, Query>(\n  init?: (builder: SVGFEFuncAElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEFuncAElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_FUNC_B<State, Action, Query>(\n  init?: (builder: SVGFEFuncBElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEFuncBElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_FUNC_G<State, Action, Query>(\n  init?: (builder: SVGFEFuncGElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEFuncGElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_FUNC_R<State, Action, Query>(\n  init?: (builder: SVGFEFuncRElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEFuncRElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_GAUSSIAN_BLUR<State, Action, Query>(\n  init?: (\n    builder: SVGFEGaussianBlurElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGFEGaussianBlurElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_IMAGE<State, Action, Query>(\n  init?: (builder: SVGFEImageElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEImageElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_MERGE<State, Action, Query>(\n  init?: (builder: SVGFEMergeElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEMergeElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_MERGE_NODE<State, Action, Query>(\n  init?: (builder: SVGFEMergeNodeElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEMergeNodeElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_MORPHOLOGY<State, Action, Query>(\n  init?: (builder: SVGFEMorphologyElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEMorphologyElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_OFFSET<State, Action, Query>(\n  init?: (builder: SVGFEOffsetElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEOffsetElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_POINTLIGHT<State, Action, Query>(\n  init?: (builder: SVGFEPointLightElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFEPointLightElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_SPECULAR_LIGHTING<State, Action, Query>(\n  init?: (\n    builder: SVGFESpecularLightingElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGFESpecularLightingElementBuilder<\n    State,\n    Action,\n    Query\n  >()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_SPOTLIGHT<State, Action, Query>(\n  init?: (builder: SVGFESpotLightElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFESpotLightElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_TILE<State, Action, Query>(\n  init?: (builder: SVGFETileElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFETileElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FE_TURBULENCE<State, Action, Query>(\n  init?: (builder: SVGFETurbulenceElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFETurbulenceElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FILTER<State, Action, Query>(\n  init?: (builder: SVGFilterElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGFilterElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FOREIGN_OBJECT<State, Action, Query>(\n  init?: (builder: SVGForeignObjectElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGForeignObjectElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function G<State, Action, Query>(\n  init?: (builder: SVGGElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGGElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function IMAGE<State, Action, Query>(\n  init?: (builder: SVGImageElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGImageElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LINE<State, Action, Query>(\n  init?: (builder: SVGLineElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGLineElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LINEAR_GRADIENT<State, Action, Query>(\n  init?: (\n    builder: SVGLinearGradientElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGLinearGradientElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function MARKER<State, Action, Query>(\n  init?: (builder: SVGMarkerElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGMarkerElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function MASK<State, Action, Query>(\n  init?: (builder: SVGMaskElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGMaskElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function METADATA<State, Action, Query>(\n  init?: (builder: SVGMetadataElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGMetadataElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PATH<State, Action, Query>(\n  init?: (builder: SVGPathElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGPathElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PATTERN<State, Action, Query>(\n  init?: (builder: SVGPatternElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGPatternElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function POLYGON<State, Action, Query>(\n  init?: (builder: SVGPolygonElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGPolygonElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function POLYLINE<State, Action, Query>(\n  init?: (builder: SVGPolylineElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGPolylineElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function RADIAL_GRADIENT<State, Action, Query>(\n  init?: (\n    builder: SVGRadialGradientElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new SVGRadialGradientElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function RECT<State, Action, Query>(\n  init?: (builder: SVGRectElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGRectElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SCRIPT<State, Action, Query>(\n  init?: (builder: SVGScriptElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGScriptElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function STOP<State, Action, Query>(\n  init?: (builder: SVGStopElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGStopElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function STYLE<State, Action, Query>(\n  init?: (builder: SVGStyleElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGStyleElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SVG<State, Action, Query>(\n  init?: (builder: SVGSVGElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGSVGElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SWITCH<State, Action, Query>(\n  init?: (builder: SVGSwitchElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGSwitchElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SYMBOL<State, Action, Query>(\n  init?: (builder: SVGSymbolElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGSymbolElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TEXT<State, Action, Query>(\n  init?: (builder: SVGTextElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGTextElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TEXT_PATH<State, Action, Query>(\n  init?: (builder: SVGTextPathElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGTextPathElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TITLE<State, Action, Query>(\n  init?: (builder: SVGTitleElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGTitleElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TSPAN<State, Action, Query>(\n  init?: (builder: SVGTSpanElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGTSpanElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function USE<State, Action, Query>(\n  init?: (builder: SVGUseElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGUseElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function VIEW<State, Action, Query>(\n  init?: (builder: SVGViewElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new SVGViewElementBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\n\n// transforms\nexport function Adapter<State, StateB, Action, ActionB, Query>(props: {\n  bootstrapState: (outer: State) => StateB\n  mergeStates?: Attribute<\n    {\n      outerState: State\n      innerState: StateB\n    },\n    StateB\n  >\n  propagate?: (args: PropagateArg<State, StateB, Action, ActionB>) => void\n  child: ComponentTemplate<StateB, ActionB, Query>\n}) {\n  return new AdapterTemplate(\n    props.bootstrapState,\n    props.mergeStates,\n    props.propagate || (() => undefined),\n    props.child\n  )\n}\n\nexport function LocalAdapter<State, Action, Query>(props: {\n  propagate?: (args: PropagateArg<State, State, Action, Action>) => void\n  child: ComponentTemplate<State, Action, Query>\n}) {\n  return new AdapterTemplate(\n    state => state,\n    ({ outerState }) => outerState,\n    props.propagate || (() => undefined),\n    props.child\n  )\n}\n\nexport function Component<State, Action, Query>(\n  reducer: (state: State, action: Action) => State,\n  init: (builder: ComponentSVGBuilder<State, Action, Query>) => void\n) {\n  const builder = new ComponentSVGBuilder<State, Action, Query>(reducer)\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function Iterate<State, Items extends any[], Action, Query>(\n  map: DerivedValue<State, Items>,\n  init: (\n    builder: UntilSVGBuilder<\n      [Items, State],\n      [Items[number], State, number],\n      Action,\n      Query\n    >\n  ) => void\n) {\n  return MapState<State, [Items, State], Action, Query>(\n    (outer: State): [Items, State] | undefined => {\n      const items = resolveAttribute(map)(outer)\n      return items !== undefined ? [items, outer] : undefined\n    },\n    n => {\n      n.Until<[Items[number], State, number]>(\n        ({ state: [items, state], index }) =>\n          items[index] && [items[index], state, index],\n        init\n      )\n    }\n  )\n}\n\nexport function MapState<State, StateB, Action, Query>(\n  map: (state: State) => StateB | undefined,\n  init: (builder: MapStateSVGBuilder<State, StateB, Action, Query>) => void\n) {\n  const builder = new MapStateSVGBuilder<State, StateB, Action, Query>(map)\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function MapField<\n  State,\n  Action,\n  Query,\n  K extends keyof State = keyof State\n>(\n  field: K,\n  init: (builder: MapStateSVGBuilder<State, State[K], Action, Query>) => void\n) {\n  return MapState<State, State[K], Action, Query>(\n    (v: State): State[K] => v[field],\n    init\n  )\n}\n\nexport function MapStateAndKeep<State, StateB, Action, Query>(\n  map: (state: State) => StateB | undefined,\n  init: (\n    builder: MapStateSVGBuilder<State, [StateB, State], Action, Query>\n  ) => void\n) {\n  return MapState<State, [StateB, State], Action, Query>((state: State) => {\n    const inner = resolveAttribute(map)(state)\n    if (inner !== undefined) {\n      return [inner, state]\n    } else {\n      return undefined\n    }\n  }, init)\n}\n\nexport function MapAction<State, Action, ActionB, Query>(\n  map: DerivedValue<ActionB, Action>,\n  init: (builder: MapActionSVGBuilder<State, Action, ActionB, Query>) => void\n) {\n  const builder = new MapActionSVGBuilder<State, Action, ActionB, Query>(map)\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function MapQuery<State, Action, Query, QueryB>(\n  map: DerivedValue<Query, QueryB>,\n  init: (builder: MapQuerySVGBuilder<State, Action, Query, QueryB>) => void\n) {\n  const builder = new MapQuerySVGBuilder<State, Action, Query, QueryB>(map)\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function Match<\n  Path extends IndexType[],\n  State extends ObjectWithPath<Path, any>,\n  Action,\n  Query = unknown\n>(props: {\n  path: Path\n  matcher: {\n    [k in TypeAtPath<Path, State>]:\n      | DOMChild<DifferentiateAt<Path, State, k>, Action, Query>\n      | IBuilder<DifferentiateAt<Path, State, k>, Action, Query>\n  }\n}): DOMTemplate<State, Action, Query> {\n  return new MatchTemplate<Path, State, Action, Query>(\n    props.path,\n    props.matcher\n  )\n}\n\nexport function MatchKind<\n  State extends ObjectWithField<'kind', any>,\n  Action,\n  Query = unknown\n>(\n  matcher: {\n    [k in State['kind']]:\n      | DOMChild<DifferentiateAt<['kind'], State, k>, Action, Query>\n      | IBuilder<DifferentiateAt<['kind'], State, k>, Action, Query>\n  }\n): DOMTemplate<State, Action, Query> {\n  return Match<['kind'], State, Action, Query>({\n    path: ['kind'],\n    matcher\n  })\n}\n\nexport function MatchBool<State, Action, Query = unknown>(props: {\n  condition: Attribute<State, boolean>\n  true: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  false: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<State, Action, Query> {\n  return new MatchBoolTemplate<State, Action, Query>(\n    props.condition,\n    props.true,\n    props.false\n  )\n}\n\nexport function MatchValue<\n  Path extends IndexType[],\n  State extends ObjectWithPath<Path, string>,\n  Action,\n  Query = unknown\n>(props: {\n  path: Path\n  matcher: {\n    [_ in string | number]:\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  }\n  orElse: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<State, Action, Query> {\n  return new MatchValueTemplate<State, Action, Query>(\n    props.path,\n    props.matcher,\n    props.orElse\n  )\n}\n\nexport function MatchOption<State, Action, Query = unknown>(props: {\n  Some: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  None: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n}): DOMTemplate<Option<State>, Action, Query> {\n  return MatchKind({\n    Some: MapField('value', n => n.Append(props.Some)),\n    None: MapState(\n      () => null,\n      n => n.Append(props.None)\n    )\n  })\n}\n\nexport function MatchMaybe<State, Action, Query = unknown>(props: {\n  Just: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Nothing?: DOMChild<unknown, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<Maybe<State>, Action, Query> {\n  return new MatchBoolTemplate<Maybe<State>, Action, Query>(\n    v => v !== undefined,\n    MapState(\n      (opt: Maybe<State>) => opt as Just<State>,\n      n => n.Append(props.Just)\n    ),\n    props.Nothing as DOMChild<unknown, Action, Query>\n  )\n}\n\nexport function MatchResult<State, Error, Action, Query = unknown>(props: {\n  Success: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Failure: DOMChild<Error, Action, Query> | IBuilder<Error, Action, Query>\n}): DOMTemplate<Result<State, Error>, Action, Query> {\n  return MatchKind({\n    Success: MapField('value', n => n.Append(props.Success)),\n    Failure: MapField('error', n => n.Append(props.Failure))\n  })\n}\n\nexport function MatchAsync<State, Progress, Action, Query = unknown>(props: {\n  Outcome: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  NotAsked: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n  Loading: DOMChild<Progress, Action, Query> | IBuilder<Progress, Action, Query>\n}): DOMTemplate<Async<State, Progress>, Action, Query> {\n  return MatchKind({\n    Outcome: MapField('value', n => n.Append(props.Outcome)),\n    Loading: MapField('progress', n => n.Append(props.Loading)),\n    NotAsked: MapState(\n      () => null,\n      n => n.Append(props.NotAsked)\n    )\n  })\n}\n\nexport function MatchAsyncResult<\n  State,\n  Error,\n  Progress,\n  Action,\n  Query = unknown\n>(props: {\n  Success: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Failure: DOMChild<Error, Action, Query> | IBuilder<Error, Action, Query>\n  NotAsked: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n  Loading: DOMChild<Progress, Action, Query> | IBuilder<Progress, Action, Query>\n}): DOMTemplate<AsyncResult<State, Error, Progress>, Action, Query> {\n  return MatchKind<AsyncResult<State, Error, Progress>, Action, Query>({\n    Outcome: MapState(\n      (o: Outcome<Result<State, Error>>) => o.value,\n      n =>\n        n.Append(\n          MatchResult<State, Error, Action, Query>({\n            Success: props.Success,\n            Failure: props.Failure\n          })\n        )\n    ),\n    Loading: MapField('progress', n => n.Append(props.Loading)),\n    NotAsked: MapState(\n      () => null,\n      n => n.Append(props.NotAsked)\n    )\n  })\n}\n\nexport function Lazy<State, Action, Query>(\n  lazyf: () =>\n    | DOMTemplate<State, Action, Query>\n    | IBuilder<State, Action, Query>\n) {\n  return new LazyTemplate(lazyf)\n}\n\nexport function Fragment<State, Action, Query>(\n  init: (builder: FragmentSVGBuilder<State, Action, Query>) => void\n) {\n  const builder = new FragmentSVGBuilder<State, Action, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function SimpleComponent<State, Query>(\n  init: (builder: SimpleComponentSVGBuilder<State, Query>) => void\n) {\n  const builder = new SimpleComponentSVGBuilder<State, Query>()\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function Unless<State, Action, Query>(\n  condition: DerivedValue<State, boolean>,\n  init: (builder: MapStateSVGBuilder<State, State, Action, Query>) => void\n) {\n  return When(s => !condition(s), init)\n}\n\nexport function Until<State, StateB, Action, Query>(\n  next: DerivedValue<{ state: State; index: number }, StateB>,\n  init: (builder: UntilSVGBuilder<State, StateB, Action, Query>) => void\n) {\n  const builder = new UntilSVGBuilder<State, StateB, Action, Query>(next)\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function When<State, Action, Query>(\n  condition: DerivedValue<State, boolean>,\n  init: (builder: MapStateSVGBuilder<State, State, Action, Query>) => void\n) {\n  const builder = new MapStateSVGBuilder<State, State, Action, Query>(s => {\n    if (condition(s)) {\n      return s\n    } else {\n      return undefined\n    }\n  })\n  if (init !== undefined) init(builder)\n  return builder\n}\n","export * from './impl/svg'\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Action } from '../action'\nimport { Route, Feed, toTitle } from '../route'\nimport { HEADER, I, Fragment } from 'tempo-dom/lib/html'\nimport { linkRoute } from './link_route'\nimport { SVG } from 'tempo-dom/lib/svg'\n\nconst logo = SVG<Route, Action, unknown>($ =>\n  $.width(32)\n    .height(32)\n    .viewBox([0, 0, 32, 32])\n    .G($ =>\n      $.fill('#ffffff')\n        .RECT($ => $.x(0).y(0).width(8).height(8))\n        .RECT($ => $.x(11).y(0).width(8).height(8))\n        .RECT($ => $.x(22).y(0).width(8).height(8))\n        .RECT($ => $.x(11).y(11).width(8).height(8))\n        .RECT($ => $.x(11).y(22).width(8).height(8))\n    )\n)\n\nconst headerLink = (feed: Feed) => {\n  const condition = (route: Route) => {\n    switch (route.kind) {\n      case 'FeedsRoute':\n        return route.feed === feed\n      default:\n        return false\n    }\n  }\n  return Fragment<Route, Action, unknown>($ =>\n    $.When(condition, $ =>\n      $.SPAN($ => $.ariaCurrent('page').Append(toTitle(Route.feeds(feed, 1))))\n    ).Unless(condition, $ =>\n      $.Append(linkRoute({ route: Route.feeds(feed, 1) }))\n    )\n  )\n}\n\nexport const appHeader = HEADER<Route, Action, unknown>($ =>\n  $.Append(\n    linkRoute(\n      { route: Route.root },\n      I<Route, Action, unknown>($ =>\n        $.ariaLabel('Homepage').class('logo').Append(logo)\n      ).build()\n    )\n  )\n    .NAV($ =>\n      $.AppendMany(\n        ...[Feed.top, Feed.new, Feed.ask, Feed.show, Feed.jobs].map(headerLink)\n      )\n    )\n    .Append(\n      linkRoute(\n        {\n          className: 'githublink',\n          route: Route.externalRoute('https://github.com/fponticelli/tempo')\n        },\n        'About'\n      )\n    )\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMContext } from '../context'\nimport { DerivedOrLiteralValue } from 'tempo-core/lib/value'\nimport { Lifecycle } from '../lifecycle'\n\nexport function unsafeHtml<State, Action>(\n  html: DerivedOrLiteralValue<State, string>\n): (\n  state: State,\n  element: HTMLElement,\n  ctx: DOMContext<Action>\n) => Lifecycle<State> {\n  return (state, element, ctx) => {\n    if (typeof html === 'function') {\n      element.innerHTML = html(state) ?? ''\n      return {\n        beforeChange() {},\n        afterChange(state) {\n          element.innerHTML = html(state) ?? ''\n        },\n        beforeDestroy() {}\n      }\n    } else {\n      element.innerHTML = html\n      return {\n        beforeChange() {},\n        afterChange() {},\n        beforeDestroy() {}\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Item } from '../state'\nimport { Action } from '../action'\nimport { Lazy, LI, When } from 'tempo-dom/lib/html'\nimport { linkRoute } from './link_route'\nimport { Route } from '../route'\nimport { unsafeHtml } from 'tempo-dom/lib/lifecycle/unsafe_html'\nimport { DOMTemplate } from 'tempo-dom/lib/template'\n\nexport const commentTemplate: DOMTemplate<Item, Action, unknown> = Lazy<\n  Item,\n  Action,\n  unknown\n>(() =>\n  LI<Item, Action, unknown>($ =>\n    $.DIV($ =>\n      $.class('comment-meta')\n        .Append(linkRoute({ route: item => Route.user(item.user) }))\n        .text(' ')\n        .text(s => s.time_ago)\n    )\n      .DIV($ => $.Lifecycle(unsafeHtml(s => s.content)))\n      .MapState(\n        s => s.comments ?? [],\n        $ => $.Append(commentsTemplate)\n      )\n  )\n)\n\nexport const commentsTemplate = Lazy<Item[], Action, unknown>(() =>\n  When(\n    comments => comments.length > 0,\n    $ => $.UL($ => $.ForEach($ => $.Append(commentTemplate)))\n  )\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { SECTION, SPAN, MatchBool } from 'tempo-dom/lib/html'\nimport { Feed, maxPage, Route } from '../route'\nimport { Action } from '../action'\nimport { linkRoute } from './link_route'\n\nconst paginationDesktop = MatchBool<\n  { feed: Feed; page: number; current: number },\n  Action,\n  unknown\n>({\n  condition: s => s.page === s.current,\n  true: SPAN($ => $.ariaCurrent('page').text(s => `${s.page}`)),\n  false: linkRoute(\n    { route: state => Route.feeds(state.feed, state.page) },\n    state => String(state.page)\n  )\n})\n\nconst previousPageLink = SECTION<{ feed: Feed; page: number }, Action, unknown>(\n  $ =>\n    $.MatchBool({\n      condition: s => s.page === 1,\n      true: SPAN($ => $.class('inactive').text('Previous')),\n      false: linkRoute(\n        { route: state => Route.feeds(state.feed, state.page - 1) },\n        'Previous'\n      )\n    })\n)\n\nconst nextPageLink = SECTION<{ feed: Feed; page: number }, Action, unknown>($ =>\n  $.MatchBool({\n    condition: s => maxPage(s.feed) === s.page,\n    true: SPAN($ => $.class('inactive').text('Next')),\n    false: linkRoute(\n      { route: state => Route.feeds(state.feed, state.page + 1) },\n      'Next'\n    )\n  })\n)\n\nconst pageRange = (\n  feed: Feed,\n  current: number\n): { feed: Feed; current: number; page: number }[] => {\n  const arr = new Array(maxPage(feed))\n    .fill({ feed, current, page: 0 })\n    .map((o, i) => ({ ...o, page: i + 1 }))\n  return arr\n}\n\nexport const paginationTemplate = SECTION<\n  { feed: Feed; page: number },\n  Action,\n  unknown\n>($ =>\n  $.class('pagination')\n    .Append(previousPageLink)\n    .NAV($ =>\n      $.MapState(\n        s => pageRange(s.feed, s.page),\n        $ => $.ForEach($ => $.Append(paginationDesktop))\n      )\n    )\n    .DIV($ =>\n      $.class('mobile')\n        .SPAN($ => $.text(s => String(s.page)))\n        .SPAN($ => $.text('/'))\n        .SPAN($ => $.text(s => String(maxPage(s.feed))))\n    )\n    .Append(nextPageLink)\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { FOOTER, SECTION, LI, H2, Match, Fragment } from 'tempo-dom/lib/html'\nimport { PageFeed, Item, External } from '../state'\nimport { Action } from '../action'\nimport { Route } from '../route'\nimport { linkRoute } from './link_route'\nimport { paginationTemplate } from './pagination'\n\nexport const itemUrlTemplate = Match<['url', 'kind'], Item, Action, unknown>({\n  path: ['url', 'kind'],\n  matcher: {\n    External: linkRoute<Item & { url: External }, Action, unknown>(\n      { route: item => Route.externalRoute(item.url.path) },\n      H2<Item, Action, unknown>($ => $.text((item: Item) => item.title)).build()\n    ),\n    Internal: linkRoute(\n      { route: item => Route.item(item.id) },\n      H2<Item, Action, unknown>($ => $.text((item: Item) => item.title)).build()\n    )\n  }\n})\n\nexport const listItemUrlTemplate = Match<\n  ['url', 'kind'],\n  Item,\n  Action,\n  unknown\n>({\n  path: ['url', 'kind'],\n  matcher: {\n    External: linkRoute<Item & { url: External }, Action, unknown>(\n      { route: item => Route.externalRoute(item.url.path) },\n      (item: Item) => item.title\n    ),\n    Internal: linkRoute(\n      { route: item => Route.item(item.id) },\n      (item: Item) => item.title\n    )\n  }\n})\n\nexport const itemFooterTemplate = FOOTER<Item, Action, unknown>($ =>\n  $.MatchBool({\n    condition: item => item.type === 'job',\n    true: item => item.time_ago,\n    false: Fragment($ =>\n      $.text(item => String(item.points))\n        .text(' points by ')\n        .Append(linkRoute({ route: item => Route.user(item.user) }))\n        .text(' ')\n        .text(item => item.time_ago)\n        .text(' | ')\n        .Append(\n          linkRoute(\n            { route: item => Route.item(item.id) },\n            item => String(item.comments_count),\n            ' comments'\n          )\n        )\n    )\n  })\n)\n\nconst listItemTemplate = LI<[Item, PageFeed, number], Action, unknown>($ =>\n  $.ASIDE($ =>\n    $.text(([_i, page, index]) => String((page.page - 1) * 30 + index + 1))\n  ).DIV($ =>\n    $.MapState(\n      ([item]) => item,\n      $ =>\n        $.Append(listItemUrlTemplate).SPAN($ =>\n          $.class('domain')\n            .text(s => s.domain)\n            .Append(itemFooterTemplate)\n        )\n    )\n  )\n)\n\nexport const pageFeedTemplate = SECTION<PageFeed, Action, unknown>($ =>\n  $.class('list-view')\n    .UL($ =>\n      $.Iterate(\n        s => s.items,\n        $ => $.Append(listItemTemplate)\n      )\n    )\n    .MapState(\n      s => ({ feed: s.feed, page: s.page }),\n      $ => $.Append(paginationTemplate)\n    )\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { ARTICLE } from 'tempo-dom/lib/html'\nimport { Article } from '../state'\nimport { Action } from '../action'\nimport { commentsTemplate } from './comments'\nimport { itemFooterTemplate, itemUrlTemplate } from './page_feed'\nimport { unsafeHtml } from 'tempo-dom/lib/lifecycle/unsafe_html'\n\nexport const articleTemplate = ARTICLE<Article, Action, unknown>($ =>\n  $.MapState(\n    s => s.item,\n    $ =>\n      $.SECTION($ =>\n        $.Append(itemUrlTemplate)\n          .SPAN($ => $.class('domain').text(s => s.domain))\n          .Append(itemFooterTemplate)\n      )\n        .DIV($ => $.Lifecycle(unsafeHtml(s => s.content)))\n        .SECTION($ =>\n          $.class('comments-view').MapState(\n            s => s.comments ?? [],\n            $ => $.Append(commentsTemplate)\n          )\n        )\n  )\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DIV } from 'tempo-dom/lib/html'\nimport { DOMChild } from 'tempo-dom/lib/template'\nimport { IBuilder } from 'tempo-dom/lib/impl/dom_builder'\n\nexport const notification: <State, Action, Query>(\n  ...children: (\n    | DOMChild<State, Action, Query>\n    | IBuilder<State, Action, Query>\n  )[]\n) => IBuilder<State, Action, Query> = <State, Action, Query>(\n  ...children: (\n    | DOMChild<State, Action, Query>\n    | IBuilder<State, Action, Query>\n  )[]\n) =>\n  DIV<State, Action, Query>($ =>\n    $.class('notification').AppendMany(...children)\n  )\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { matchKind } from 'tempo-std/lib//match'\n\nexport interface HttpNetworkError {\n  kind: 'HttpNetworkError'\n}\n\nexport interface HttpBadStatus {\n  kind: 'HttpBadStatus'\n  status: number\n}\n\nexport interface HttpBadBody {\n  kind: 'HttpBadBody'\n  message: string\n}\n\nexport type HttpError = HttpNetworkError | HttpBadStatus | HttpBadBody\n\nexport const HttpError = {\n  networkError: { kind: 'HttpNetworkError' } as HttpError,\n  badStatus: (status: number): HttpError => ({ kind: 'HttpBadStatus', status }),\n  badBody: (message: string): HttpError => ({ kind: 'HttpBadBody', message })\n}\n\nexport const errorToMessage = (error: HttpError) => matchKind<HttpError, string>(\n  error,\n  {\n    HttpNetworkError: () => 'NetworkError | You seem to be offline',\n    HttpBadStatus: (e) => `BadStatus | The server gave me a ${e.status} error`,\n    HttpBadBody: () => 'BadPayload | The server gave me back something I did not expect'\n  }\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Error } from '../state'\nimport { Action } from '../action'\nimport { notification } from './notification'\nimport { errorToMessage } from '../http_error'\n\nexport const errorTemplate = notification<Error, Action, unknown>(s =>\n  errorToMessage(s.error)\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DIV } from 'tempo-dom/lib/html'\nimport { notification } from './notification'\nimport { Loading } from '../state'\nimport { Action } from '../action'\n\nexport const loadingTemplate = notification<Loading, Action, unknown>(\n  DIV($ => $.class('spinner'))\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { notification } from './notification'\nimport { NotFound } from '../state'\nimport { Action } from '../action'\n\nexport const notFoundTemplate = notification<NotFound, Action, unknown>('404')\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { SECTION } from 'tempo-dom/lib/html'\nimport { Profile } from '../state'\nimport { Action } from '../action'\nimport { unsafeHtml } from 'tempo-dom/lib/lifecycle/unsafe_html'\n\nexport const profileTemplate = SECTION<Profile, Action, unknown>($ =>\n  $.class('user-view').MapState(\n    profile => profile.user,\n    $ =>\n      $.TABLE($ =>\n        $.TR($ =>\n          $.TD($ => $.text('user:')).TD($ => $.B($ => $.text(user => user.id)))\n        )\n          .TR($ =>\n            $.TD($ => $.text('created:')).TD($ => $.text(user => user.created))\n          )\n          .TR($ =>\n            $.TD($ => $.text('karma:')).TD($ =>\n              $.text(user => String(user.karma))\n            )\n          )\n          .When(\n            user => user.about !== undefined,\n            $ =>\n              $.TR($ =>\n                $.TD($ => $.text('about:')).TD($ =>\n                  $.Lifecycle(unsafeHtml(user => user.about))\n                )\n              )\n          )\n      )\n  )\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Action } from '../action'\nimport { Page } from '../state'\nimport { MatchKind } from 'tempo-dom/lib/html'\nimport { articleTemplate } from './article'\nimport { errorTemplate } from './error'\nimport { loadingTemplate } from './loading'\nimport { notFoundTemplate } from './not_found'\nimport { pageFeedTemplate } from './page_feed'\nimport { profileTemplate } from './profile'\n\nexport const pageTemplate = MatchKind<Page, Action>({\n  Article: articleTemplate,\n  Error: errorTemplate,\n  Loading: loadingTemplate,\n  NotFound: notFoundTemplate,\n  PageFeed: pageFeedTemplate,\n  Profile: profileTemplate\n})\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { MAIN } from 'tempo-dom/lib/html'\nimport { State } from '../state'\nimport { Action } from '../action'\nimport { appHeader } from './header'\nimport { pageTemplate } from './page'\n\nexport const template = MAIN<State, Action, unknown>($ =>\n  $.MapState(\n    s => s.route,\n    $ => $.Append(appHeader)\n  ).SECTION($ =>\n    $.id('content').MapState(\n      s => s.page,\n      $ => $.Append(pageTemplate)\n    )\n  )\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { HttpError } from './http_error'\nimport { Route, Feed } from './route'\n\nexport interface State {\n  readonly route: Route\n  readonly page: Page\n}\n\nexport const createState = (route: Route, page: Page): State =>\n  ({ route, page })\n\nexport interface PageFeed {\n  readonly kind: 'PageFeed'\n  readonly feed: Feed\n  readonly page: number\n  readonly items: Item[]\n}\n\nexport interface Article {\n  readonly kind: 'Article'\n  readonly item: Item\n}\n\nexport interface Profile {\n  readonly kind: 'Profile'\n  readonly user: User\n}\n\nexport interface Loading {\n  readonly kind: 'Loading'\n}\n\nexport interface Error {\n  readonly kind: 'Error'\n  readonly error: HttpError\n}\n\nexport interface NotFound {\n  readonly kind: 'NotFound'\n}\n\nexport type Page = PageFeed | Article | Profile | Loading | Error | NotFound\n\nexport const Page = {\n  feed: (feed: Feed, page: number, items: Item[]): Page => ({ kind: 'PageFeed', feed, page, items }),\n  article: (item: Item): Page => ({ kind: 'Article', item }),\n  profile: (user: User): Page => ({ kind: 'Profile', user }),\n  loading: { kind: 'Loading' } as Page,\n  error: (error: HttpError): Page => ({ kind: 'Error', error }),\n  notFound: { kind: 'NotFound' } as Page\n}\n\nexport interface Item {\n  readonly id: number\n  readonly title?: string\n  readonly points?: number\n  readonly user?: string\n  readonly time_ago: string\n  readonly url: ItemUrl\n  readonly domain?: string\n  readonly comments_count: number\n  readonly comments?: Item[]\n  readonly content?: string\n  readonly type: string\n}\n\nexport interface User {\n  readonly about?: string\n  readonly created: string\n  readonly id: string\n  readonly karma: number\n}\n\nexport interface External {\n  readonly kind: 'External'\n  readonly path: string\n}\n\nexport interface Internal {\n  readonly kind: 'Internal'\n}\n\nexport type ItemUrl = External | Internal\n\nexport const ItemUrl = {\n  external: (path: string): ItemUrl => ({ kind: 'External', path }),\n  internal: { kind: 'Internal' } as ItemUrl\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Action } from './action'\nimport { State, Page } from './state'\nimport { reduceOnKind } from 'tempo-core/lib/reducer'\nimport { match } from 'tempo-std/lib/result'\n\nexport const reducer = reduceOnKind<State, Action>({\n  LinkClicked: (state, action) => {\n    return {\n      ...state,\n      route: action.route,\n      page: action.route.kind === 'ExternalRoute' ? state.page : Page.loading\n    }\n  },\n  UrlChanged: (state, action) => {\n    if (state.route.kind === 'NotFoundRoute') {\n      return {\n        ...state,\n        page: Page.notFound\n      }\n    } else {\n      return state\n    }\n  },\n  GotItem: (state, action) => ({\n    ...state,\n    page: match(action.result, Page.article, Page.error)\n  }),\n  GotFeed: (state, action) => ({\n    ...state,\n    page: match(\n      action.result,\n      items => {\n        const page = state.route.kind === 'FeedsRoute' ? state.route.page : 1\n        return Page.feed(action.feed, page, items)\n      },\n      Page.error\n    )\n  }),\n  GotUser: (state, action) => ({\n    ...state,\n    page: match(action.result, Page.profile, Page.error)\n  })\n})\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\")\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Maybe } from './maybe'\nimport { map as mapArray } from './arrays'\nimport { Fun2, Fun3, Fun4, Fun5, Fun6 } from './types/functions'\nimport { Result, failure, success } from './result'\n\nexport type Some<T> = { kind: 'Some', value: T }\nexport type None = { kind: 'None' }\n\nexport type Option<T> =\n  | Some<T>\n  | None\n\nexport function some<T>(value: T): Option<T> {\n  return { kind: 'Some', value }\n}\nexport const none = { kind: 'None' } as Option<never>\nexport function ofValue<T>(value: T | undefined | null): Option<T> {\n  if (value == null)\n    return none\n  else\n    return some(value)\n}\n\nexport function ap<A, B>(opt: Option<A>, optf: Option<(a: A) => B>): Option<B> {\n  return flatten(map(optf, f => map(opt, v => f(v))))\n}\n\nexport function apN<A, B, C>(\n  a: Option<A>,\n  b: Option<B>,\n  f: Option<Fun2<A, B, C>>\n): Option<C>\nexport function apN<A, B, C, D>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  f: Option<Fun3<A, B, C, D>>\n): Option<D>\nexport function apN<A, B, C, D, E>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  f: Option<Fun4<A, B, C, D, E>>\n): Option<E>\nexport function apN<A, B, C, D, E, F>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  e: Option<E>,\n  f: Option<Fun5<A, B, C, D, E, F>>\n): Option<F>\nexport function apN<A, B, C, D, E, F, G>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  e: Option<E>,\n  g: Option<F>,\n  f: Option<Fun6<A, B, C, D, E, F, G>>\n): Option<G>\nexport function apN<Args extends any[], Ret>(\n  ...args: any[]\n): Option<Ret> {\n  const f = args.pop()\n  if (f.kind === 'None')\n    return none\n  for (const a of args)\n    if (a.kind === 'None') return none\n  const results = mapArray(args as { kind: 'Some', value: any }[], a => a.value)\n  return some(f.value(...results as Args))\n}\n\nexport function map<A, B>(opt: Option<A>, f: (a: A) => B): Option<B> {\n  switch (opt.kind) {\n    case 'None': return opt\n    case 'Some': return some(f(opt.value))\n  }\n}\n\nexport function mapN<A, B, C>(\n  a: Option<A>,\n  b: Option<B>,\n  f: Fun2<A, B, C>\n): Option<C>\nexport function mapN<A, B, C, D>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  f: Fun3<A, B, C, D>\n): Option<D>\nexport function mapN<A, B, C, D, E>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  f: Fun4<A, B, C, D, E>\n): Option<E>\nexport function mapN<A, B, C, D, E, F>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  e: Option<E>,\n  f: Fun5<A, B, C, D, E, F>\n): Option<F>\nexport function mapN<A, B, C, D, E, F, G>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  e: Option<E>,\n  g: Option<F>,\n  f: Fun6<A, B, C, D, E, F, G>\n): Option<G>\nexport function mapN<Args extends any[], Ret>(...args: any[]): Option<Ret> {\n  const f = args.pop()\n  for (const a of args)\n    if (a.kind === 'None') return none\n  const results = mapArray(args as { kind: 'Some', value: any }[], a => a.value)\n  return some(f(...results as Args))\n}\n\nexport function flatMap<A, B>(opt: Option<A>, f: (a: A) => Option<B>): Option<B> {\n  switch (opt.kind) {\n    case 'None': return opt\n    case 'Some': return f(opt.value)\n  }\n}\n\nexport function flatMapN<A, B, C>(\n  a: Option<A>,\n  b: Option<B>,\n  f: Fun2<A, B, Option<C>>\n): Option<C>\nexport function flatMapN<A, B, C, D>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  f: Fun3<A, B, C, Option<D>>\n): Option<D>\nexport function flatMapN<A, B, C, D, E>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  f: Fun4<A, B, C, D, Option<E>>\n): Option<E>\nexport function flatMapN<A, B, C, D, E, F>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  e: Option<E>,\n  f: Fun5<A, B, C, D, E, Option<F>>\n): Option<F>\nexport function flatMapN<A, B, C, D, E, F, G>(\n  a: Option<A>,\n  b: Option<B>,\n  c: Option<C>,\n  d: Option<D>,\n  e: Option<E>,\n  g: Option<F>,\n  f: Fun6<A, B, C, D, E, F, Option<G>>\n): Option<G>\nexport function flatMapN<Args extends any[], Ret>(\n  ...args: any[]\n): Option<Ret> {\n  const f = args.pop()\n  for (const a of args)\n    if (a.kind === 'None') return none\n  const results = mapArray(args as { kind: 'Some', value: any }[], a => a.value)\n  return f(...results as Args)\n}\n\nexport function equals<T>(\n  a: Option<T>,\n  b: Option<T>,\n  predicate: (a: T, b: T) => boolean\n): boolean {\n  if (a.kind !== b.kind)\n    return false\n  else if (a.kind === 'None' && b.kind === 'None')\n    return true\n  else\n    return predicate((a as { kind: 'Some', value: T }).value, (b as { kind: 'Some', value: T }).value)\n}\n\nexport function makeEquals<T>(predicate: (a: T, b: T) => boolean) {\n  return function(a: Option<T>, b: Option<T>) {\n    return equals(a, b, predicate)\n  }\n}\n\nexport function isNone<T>(option: Option<T>): option is None {\n  return option.kind === 'None'\n}\nexport function isSome<T>(option: Option<T>): option is Some<T> {\n  return option.kind === 'Some'\n}\n\nexport function filter<T>(option: Option<T>, predicate: (v: T) => boolean): Option<T> {\n  switch (option.kind) {\n    case 'None': return none\n    case 'Some':\n      if (predicate(option.value)) {\n        return option\n      } else {\n        return none\n      }\n  }\n}\n\nexport function getOrThrow<T, E>(option: Option<T>, exception: E): T {\n  switch (option.kind) {\n    case 'None': throw exception\n    case 'Some': return option.value\n  }\n}\n\nexport function toMaybe<T>(option: Option<T>): Maybe<T> {\n  switch (option.kind) {\n    case 'None': return undefined\n    case 'Some': return option.value\n  }\n}\n\nexport function getUnsafe<T>(option: Option<T>): T {\n  return getOrThrow(option, 'unable to extract value from None')\n}\n\nexport function getOrElse<T>(option: Option<T>, alt: T): T {\n  switch (option.kind) {\n    case 'None': return alt\n    case 'Some': return option.value\n  }\n}\n\nexport function getOrElseLazy<T>(option: Option<T>, alt: () => T): T {\n  switch (option.kind) {\n    case 'None': return alt()\n    case 'Some': return option.value\n  }\n}\n\nexport function toBoolean(option: Option<unknown>) {\n  switch (option.kind) {\n    case 'None': return false\n    case 'Some': return true\n  }\n}\n\nexport function toArray<T>(option: Option<T>): T[] {\n  switch (option.kind) {\n    case 'None': return []\n    case 'Some': return [option.value]\n  }\n}\n\nexport function toResult<T, E>(option: Option<T>, error: E): Result<T, E> {\n  switch (option.kind) {\n    case 'None': return failure(error)\n    case 'Some': return success(option.value)\n  }\n}\n\nexport function toResultLazy<T, E>(option: Option<T>, errorf: () => E): Result<T, E> {\n  switch (option.kind) {\n    case 'None': return failure(errorf())\n    case 'Some': return success(option.value)\n  }\n}\n\nexport function flatten<T>(option: Option<Option<T>>): Option<T> {\n  switch (option.kind) {\n    case 'None': return none\n    case 'Some': return option.value\n  }\n}\n\nexport function cata<A, B>(f: (a: A) => B, option: Option<A>, ifNone: B): B {\n  switch (option.kind) {\n    case 'None': return ifNone\n    case 'Some': return f(option.value)\n  }\n}\n\nexport function cataLazy<A, B>(f: (a: A) => B, option: Option<A>, ifNone: () => B): B {\n  switch (option.kind) {\n    case 'None': return ifNone()\n    case 'Some': return f(option.value)\n  }\n}\n\nexport function foldLeft<T, B>(f: (acc: B, curr: T) => B, option: Option<T>,\n                               b: B): B {\n  switch (option.kind) {\n    case 'None': return b\n    case 'Some': return f(b, option.value)\n  }\n}\n\nexport function all<T>(f: (v: T) => boolean, option: Option<T>): boolean {\n  switch (option.kind) {\n    case 'None': return true\n    case 'Some': return f(option.value)\n  }\n}\n\nexport function any<T>(f: (v: T) => boolean, option: Option<T>): boolean {\n  switch (option.kind) {\n    case 'None': return false\n    case 'Some': return f(option.value)\n  }\n}\n\nexport function each<T>(f: (v: T) => void, option: Option<T>): void {\n  switch (option.kind) {\n    case 'None': return\n    case 'Some': return f(option.value)\n  }\n}\n\nexport function firstSome<A>(...args: Option<A>[]): Option<A> {\n  for (const a of args) {\n    if (isSome(a))\n      return a\n  }\n  return none\n}\n\nexport function recover<T>(result: Option<T>, whenFailure: T) {\n  switch (result.kind) {\n    case 'None': return some(whenFailure)\n    case 'Some': return result\n  }\n}\n\nexport function recoverLazy<T>(result: Option<T>, whenFailuref: () => T) {\n  switch (result.kind) {\n    case 'None': return some(whenFailuref())\n    case 'Some': return result\n  }\n}\n\nexport function combine<A, B>(a: Option<A>,\n                              b: Option<B>): Option<[A, B]> {\n  return mapN(a, b, (a, b) => [a, b])\n}\n\nexport function spread<A, B, C>(f: (a: A, b: B) => C, v: Option<[A, B]>): Option<C> {\n  return map(v, (t) => f(t[0], t[1]))\n}\n\nexport type T<V> = Option<V>\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\")\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Maybe, nothing, just } from './maybe'\nimport { map as mapArray } from './arrays'\nimport { Fun2, Fun3, Fun4, Fun5, Fun6 } from './types/functions'\nimport { Option, none, some } from './option'\n\nexport type Success<T> = { kind: 'Success', value: T }\nexport type Failure<E> = { kind: 'Failure', error: E }\n\nexport type Result<T, E> =\n  | Success<T>\n  | Failure<E>\n\nexport function success<T, E>(value: T): Result<T, E> { return { kind: 'Success', value } }\nexport function failure<T, E>(error: E): Result<T, E> { return { kind: 'Failure', error } }\n\nexport function ofNullable<T, E>(value: T | undefined | null, error: E): Result<T, E> {\n  if (value == null)\n    return failure(error)\n  else\n    return success(value)\n}\n\nexport function ap<A, B, Err>(result: Result<A, Err>, resultf: Result<(a: A) => B, Err>): Result<B, Err> {\n  return flatten(map(resultf, f => map(result, v => f(v))))\n}\nexport function apN<A, B, C, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  f: Result<Fun2<A, B, C>, Err>\n): Result<C, Err>\nexport function apN<A, B, C, D, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  f: Result<Fun3<A, B, C, D>, Err>\n): Result<D, Err>\nexport function apN<A, B, C, D, E, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  f: Result<Fun4<A, B, C, D, E>, Err>\n): Result<E, Err>\nexport function apN<A, B, C, D, E, F, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  e: Result<E, Err>,\n  f: Result<Fun5<A, B, C, D, E, F>, Err>\n): Result<F, Err>\nexport function apN<A, B, C, D, E, F, G, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  e: Result<E, Err>,\n  g: Result<F, Err>,\n  f: Result<Fun6<A, B, C, D, E, F, G>, Err>\n): Result<G, Err>\nexport function apN<Args extends any[], Err, Ret>(\n  ...args: any[]\n): Result<Ret, Err> {\n  const f = args.pop()\n  if (f.kind === 'Failure')\n    return f\n  for (const a of args)\n    if (a.kind === 'Failure') return a\n  const results = mapArray(args as { kind: 'Success', value: any }[], a => a.value)\n  return success(f.value(...results as Args))\n}\n\nexport function apNWithCombine<A, B, C, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  f: Result<Fun2<A, B, C>, Err>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<C, Err>\nexport function apNWithCombine<A, B, C, D, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  f: Result<Fun3<A, B, C, D>, Err>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<D, Err>\nexport function apNWithCombine<A, B, C, D, E, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  f: Result<Fun4<A, B, C, D, E>, Err>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<E, Err>\nexport function apNWithCombine<A, B, C, D, E, F, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  e: Result<E, Err>,\n  f: Result<Fun5<A, B, C, D, E, F>, Err>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<F, Err>\nexport function apNWithCombine<A, B, C, D, E, F, G, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  e: Result<E, Err>,\n  g: Result<F, Err>,\n  f: Result<Fun6<A, B, C, D, E, F, G>, Err>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<G, Err>\nexport function apNWithCombine<Args extends any[], Err, Ret>(\n  ...args: any[]\n): Result<Ret, Err> {\n  const combineErrors = args.pop()\n  const f = args.pop()\n  let err: Err | null = null\n  if (f.kind === 'Failure')\n    err = f.error\n  for (const a of args)\n    if (a.kind === 'Failure') {\n      if (err !== null) {\n        err = combineErrors(err, a.error)\n      } else {\n        err = a.error\n      }\n    }\n  if (err !== null) {\n    return failure(err)\n  } else {\n    const results = mapArray(args as { kind: 'Success', value: any }[], a => a.value)\n    return success((f as Success<(...args: Args) => Ret>).value(...results as Args))\n  }\n}\n\nexport function forEach<A, Err>(result: Result<A, Err>, f: (a: A) => void): void {\n  switch (result.kind) {\n    case 'Failure': return\n    case 'Success': f(result.value)\n  }\n}\n\nexport function map<A, B, Err>(result: Result<A, Err>, f: (a: A) => B): Result<B, Err> {\n  switch (result.kind) {\n    case 'Failure': return result\n    case 'Success': return success(f(result.value))\n  }\n}\n\nexport function mapError<A, E1, E2>(result: Result<A, E1>, f: (e: E1) => E2): Result<A, E2> {\n  switch (result.kind) {\n    case 'Failure': return failure(f(result.error))\n    case 'Success': return success(result.value)\n  }\n}\n\nexport function mapN<A, B, C, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  f: Fun2<A, B, C>\n): Result<C, Err>\nexport function mapN<A, B, C, D, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  f: Fun3<A, B, C, D>\n): Result<D, Err>\nexport function mapN<A, B, C, D, E, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  f: Fun4<A, B, C, D, E>\n): Result<E, Err>\nexport function mapN<A, B, C, D, E, F, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  e: Result<E, Err>,\n  f: Fun5<A, B, C, D, E, F>\n): Result<F, Err>\nexport function mapN<A, B, C, D, E, F, G, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  e: Result<E, Err>,\n  g: Result<F, Err>,\n  f: Fun6<A, B, C, D, E, F, G>\n): Result<G, Err>\nexport function mapN<Args extends any[], Err, Ret>(\n  ...args: any[]\n): Result<Ret, Err> {\n  const f = args.pop()\n  for (const a of args) {\n    if (a.kind === 'Failure')\n      return a\n  }\n  const results = mapArray(args as { kind: 'Success', value: any }[], a => a.value)\n  return success(f(...results as Args))\n}\n\nexport function mapNWithCombine<A, B, C, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  f: Fun2<A, B, C>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<C, Err>\nexport function mapNWithCombine<A, B, C, D, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  f: Fun3<A, B, C, D>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<D, Err>\nexport function mapNWithCombine<A, B, C, D, E, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  f: Fun4<A, B, C, D, E>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<E, Err>\nexport function mapNWithCombine<A, B, C, D, E, F, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  e: Result<E, Err>,\n  f: Fun5<A, B, C, D, E, F>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<F, Err>\nexport function mapNWithCombine<A, B, C, D, E, F, G, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  c: Result<C, Err>,\n  d: Result<D, Err>,\n  e: Result<E, Err>,\n  g: Result<F, Err>,\n  f: Fun6<A, B, C, D, E, F, G>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<G, Err>\nexport function mapNWithCombine<Args extends any[], Err, Ret>(\n  ...args: any[]\n): Result<Ret, Err> {\n  const combineErrors = args.pop()\n  const f = args.pop()\n  let error: Err | null = null\n  for (const a of args) {\n    if (a.kind === 'Failure') {\n      if (error !== null)\n        error = combineErrors(error, a.error)\n      else\n        error = a.error\n    }\n  }\n  if (error !== null) {\n    return failure(error)\n  } else {\n    const results = mapArray(args as { kind: 'Success', value: any }[], a => a.value)\n    return success(f(...results as Args))\n  }\n}\n\nexport function flatMap<A, B, Err>(result: Result<A, Err>, f: (a: A) => Result<B, Err>): Result<B, Err> {\n  switch (result.kind) {\n    case 'Failure': return result\n    case 'Success': return f(result.value)\n  }\n}\n\nexport function flatMapN<A, B, C, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  f: Fun2<A, B, Result<C, Err>>\n): Result<C, Err>\nexport function flatMapN<A, B, C, D, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>, c: Result<C, Err>,\n  f: Fun3<A, B, C, Result<D, Err>>\n): Result<D, Err>\nexport function flatMapN<A, B, C, D, E, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>, c: Result<C, Err>, d: Result<D, Err>,\n  f: Fun4<A, B, C, D, Result<E, Err>>\n): Result<E, Err>\nexport function flatMapN<A, B, C, D, E, F, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>, c: Result<C, Err>, d: Result<D, Err>, e: Result<E, Err>,\n  f: Fun5<A, B, C, D, E, Result<F, Err>>\n): Result<F, Err>\nexport function flatMapN<A, B, C, D, E, F, G, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>, c: Result<C, Err>, d: Result<D, Err>, e: Result<E, Err>,\n  g: Result<F, Err>,\n  f: Fun6<A, B, C, D, E, F, Result<G, Err>>\n): Result<G, Err>\nexport function flatMapN<Args extends any[], Err, Ret>(\n  ...args: any[]\n): Result<Ret, Err> {\n  const f = args.pop()\n  for (const a of args) {\n    if (a.kind === 'Failure') {\n      return a\n    }\n  }\n  const results = mapArray(args as { kind: 'Success', value: any }[], a => a.value)\n  return f(...results as Args)\n}\n\nexport function flatMapNWithCombine<A, B, C, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>,\n  f: Fun2<A, B, Result<C, Err>>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<C, Err>\nexport function flatMapNWithCombine<A, B, C, D, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>, c: Result<C, Err>,\n  f: Fun3<A, B, C, Result<D, Err>>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<D, Err>\nexport function flatMapNWithCombine<A, B, C, D, E, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>, c: Result<C, Err>, d: Result<D, Err>,\n  f: Fun4<A, B, C, D, Result<E, Err>>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<E, Err>\nexport function flatMapNWithCombine<A, B, C, D, E, F, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>, c: Result<C, Err>, d: Result<D, Err>, e: Result<E, Err>,\n  f: Fun5<A, B, C, D, E, Result<F, Err>>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<F, Err>\nexport function flatMapNWithCombine<A, B, C, D, E, F, G, Err>(\n  a: Result<A, Err>,\n  b: Result<B, Err>, c: Result<C, Err>, d: Result<D, Err>, e: Result<E, Err>,\n  g: Result<F, Err>,\n  f: Fun6<A, B, C, D, E, F, Result<G, Err>>,\n  combineErrors: (e1: Err, e2: Err) => Err\n): Result<G, Err>\nexport function flatMapNWithCombine<Args extends any[], Err, Ret>(\n  ...args: any[]\n): Result<Ret, Err> {\n  const combineErrors = args.pop()\n  const f = args.pop()\n  let error: Err | null = null\n  for (const a of args) {\n    if (a.kind === 'Failure') {\n      if (error !== null)\n        error = combineErrors(error, a.error)\n      else\n        error = a.error\n    }\n  }\n  if (error !== null) {\n    return failure(error)\n  } else {\n    const results = mapArray(args as { kind: 'Success', value: any }[], a => a.value)\n    return f(...results as Args)\n  }\n}\n\nexport function equals<T, E>(\n  a: Result<T, E>,\n  b: Result<T, E>,\n  predicate: (a: T, b: T) => boolean\n): boolean {\n  if (a.kind !== b.kind)\n    return false\n  else if (a.kind === 'Failure' && b.kind === 'Failure')\n    return true\n  else\n    return predicate((a as { kind: 'Success', value: T }).value, (b as { kind: 'Success', value: T }).value)\n}\n\nexport function makeEquals<T, E>(predicate: (a: T, b: T) => boolean) {\n  return function(a: Result<T, E>, b: Result<T, E>) {\n    return equals(a, b, predicate)\n  }\n}\n\nexport function isFailure<T, E>(result: Result<T, E>): result is Failure<E> {\n  return result.kind === 'Failure'\n}\n\nexport function isSuccess<T, E>(result: Result<T, E>): result is Success<T> {\n  return result.kind === 'Success'\n}\n\nexport function filter<T, E>(result: Result<T, E>, predicate: (v: T) => boolean, error: E): Result<T, E> {\n  switch (result.kind) {\n    case 'Failure': return result\n    case 'Success':\n      if (predicate(result.value)) {\n        return result\n      } else {\n        return failure(error)\n      }\n  }\n}\n\nexport function filterLazy<T, E>(result: Result<T, E>, predicate: (v: T) => boolean, errorf: () => E): Result<T, E> {\n  switch (result.kind) {\n    case 'Failure': return result\n    case 'Success':\n      if (predicate(result.value)) {\n        return result\n      } else {\n        return failure(errorf())\n      }\n  }\n}\n\nexport function getOrThrow<T, E>(result: Result<T, E>): Maybe<T> {\n  switch (result.kind) {\n    case 'Failure': throw result.error\n    case 'Success': return result.value\n  }\n}\n\nexport function getOrElse<T, E>(result: Result<T, E>, alt: T): T {\n  switch (result.kind) {\n    case 'Failure': return alt\n    case 'Success': return result.value\n  }\n}\n\nexport function getOrElseLazy<T, E>(result: Result<T, E>, alt: () => T): T {\n  switch (result.kind) {\n    case 'Failure': return alt()\n    case 'Success': return result.value\n  }\n}\n\nexport function toBoolean(result: Result<unknown, unknown>) {\n  switch (result.kind) {\n    case 'Failure': return false\n    case 'Success': return true\n  }\n}\n\nexport function toArray<T, E>(result: Result<T, E>): T[] {\n  switch (result.kind) {\n    case 'Failure': return []\n    case 'Success': return [result.value]\n  }\n}\n\nexport function toMaybe<T, E>(result: Result<T, E>): Maybe<T> {\n  switch (result.kind) {\n    case 'Failure': return nothing\n    case 'Success': return just(result.value)\n  }\n}\n\nexport function toOption<T, E>(result: Result<T, E>): Option<T> {\n  switch (result.kind) {\n    case 'Failure': return none\n    case 'Success': return some(result.value)\n  }\n}\n\nexport function flatten<T, E>(result: Result<Result<T, E>, E>): Result<T, E> {\n  switch (result.kind) {\n    case 'Failure': return failure(result.error)\n    case 'Success': return result.value\n  }\n}\n\nexport function match<A, B, Err>(result: Result<A, Err>, f: (a: A) => B, fErr: (e: Err) => B): B {\n  switch (result.kind) {\n    case 'Success': return f(result.value)\n    case 'Failure': return fErr(result.error)\n  }\n}\n\nexport function cata<A, B, Err>(result: Result<A, Err>, f: (a: A) => B, ifNone: B): B {\n  switch (result.kind) {\n    case 'Failure': return ifNone\n    case 'Success': return f(result.value)\n  }\n}\n\nexport function cataLazy<A, B, Err>(result: Result<A, Err>, f: (a: A) => B, ifNone: () => B): B {\n  switch (result.kind) {\n    case 'Failure': return ifNone()\n    case 'Success': return f(result.value)\n  }\n}\n\nexport function foldLeft<T, B, Err>(result: Result<T, Err>, f: (acc: B, curr: T) => B, b: B): B {\n  switch (result.kind) {\n    case 'Failure': return b\n    case 'Success': return f(b, result.value)\n  }\n}\n\nexport function all<T, E>(result: Result<T, E>, f: (v: T) => boolean): boolean {\n  switch (result.kind) {\n    case 'Failure': return true\n    case 'Success': return f(result.value)\n  }\n}\n\nexport function any<T, E>(result: Result<T, E>, f: (v: T) => boolean): boolean {\n  switch (result.kind) {\n    case 'Failure': return false\n    case 'Success': return f(result.value)\n  }\n}\n\nexport function each<T, E>(result: Result<T, E>, f: (v: T) => void): void {\n  switch (result.kind) {\n    case 'Failure': return\n    case 'Success': return f(result.value)\n  }\n}\n\nexport function firstSuccess<A, Err>(...args: Result<A, Err>[]): Result<A, Err> {\n  for (const a of args) {\n    if (isSuccess(a))\n      return a\n  }\n  for (const a of args) {\n    return a\n  }\n  throw 'cannot use `firstSuccess` with empty argument list'\n}\n\nexport function recover<T, E>(result: Result<T, E>, whenFailure: T): Result<T, E> {\n  switch (result.kind) {\n    case 'Failure': return success(whenFailure)\n    case 'Success': return result\n  }\n}\n\nexport function recoverFromError<T, E>(result: Result<T, E>, whenFailuref: (e: E) => T) {\n  switch (result.kind) {\n    case 'Failure': return success(whenFailuref(result.error))\n    case 'Success': return result\n  }\n}\n\nexport function swap<T, E>(result: Result<T, E>): Result<E, T> {\n  switch (result.kind) {\n    case 'Failure': return success(result.error)\n    case 'Success': return failure(result.value)\n  }\n}\n\nexport function combine<A, B, Err>(a: Result<A, Err>,\n                                   b: Result<B, Err>): Result<[A, B], Err> {\n  return mapN(a, b, (a, b) => [a, b])\n}\n\nexport function spread<A, B, C, Err>(f: (a: A, b: B) => C, v: Result<[A, B], Err>): Result<C, Err> {\n  return map(v, (t) => f(t[0], t[1]))\n}\n\nexport type T<V, E> = Result<V, E>\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Action } from './action'\nimport { State, Page } from './state'\nimport { reduceOnKind } from 'tempo-core/lib/reducer'\nimport { match } from 'tempo-std/lib/result'\n\nexport const reducer = reduceOnKind<State, Action>({\n  LinkClicked: (state, action) => {\n    return {\n      ...state,\n      route: action.route,\n      page: action.route.kind === 'ExternalRoute' ? state.page : Page.loading\n    }\n  },\n  UrlChanged: (state, action) => {\n    if (state.route.kind === 'NotFoundRoute') {\n      return {\n        ...state,\n        page: Page.notFound\n      }\n    } else {\n      return state\n    }\n  },\n  GotItem: (state, action) => ({\n    ...state,\n    page: match(action.result, Page.article, Page.error)\n  }),\n  GotFeed: (state, action) => ({\n    ...state,\n    page: match(\n      action.result,\n      items => {\n        const page = state.route.kind === 'FeedsRoute' ? state.route.page : 1\n        return Page.feed(action.feed, page, items)\n      },\n      Page.error\n    )\n  }),\n  GotUser: (state, action) => ({\n    ...state,\n    page: match(action.result, Page.profile, Page.error)\n  })\n})\n","import * as TAGS from './tags';\nimport * as ATTRS from './attrs';\nimport * as EXPRESSIONS from './regexp';\nimport {\n  addToSet,\n  clone,\n  freeze,\n  objectKeys,\n  arrayForEach,\n  arrayIndexOf,\n  arrayJoin,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringIndexOf,\n  stringTrim,\n  regExpTest,\n  regExpCreate,\n  typeErrorCreate,\n} from './utils';\n\nconst getGlobal = () => (typeof window === 'undefined' ? null : window);\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {Document} document The document object (to determine policy name suffix)\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported).\n */\nconst _createTrustedTypesPolicy = function (trustedTypes, document) {\n  if (\n    typeof trustedTypes !== 'object' ||\n    typeof trustedTypes.createPolicy !== 'function'\n  ) {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (\n    document.currentScript &&\n    document.currentScript.hasAttribute(ATTR_NAME)\n  ) {\n    suffix = document.currentScript.getAttribute(ATTR_NAME);\n  }\n\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn(\n      'TrustedTypes policy ' + policyName + ' could not be created.'\n    );\n    return null;\n  }\n};\n\nfunction createDOMPurify(window = getGlobal()) {\n  const DOMPurify = (root) => createDOMPurify(root);\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = VERSION;\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  const originalDocument = window.document;\n  let removeTitle = false;\n\n  let { document } = window;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    Text,\n    Comment,\n    DOMParser,\n    trustedTypes,\n  } = window;\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  const trustedTypesPolicy = _createTrustedTypesPolicy(\n    trustedTypes,\n    originalDocument\n  );\n  const emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n\n  const {\n    implementation,\n    createNodeIterator,\n    getElementsByTagName,\n    createDocumentFragment,\n  } = document;\n  const { importNode } = originalDocument;\n\n  let hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported =\n    implementation &&\n    typeof implementation.createHTMLDocument !== 'undefined' &&\n    document.documentMode !== 9;\n\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n  } = EXPRESSIONS;\n\n  let { IS_ALLOWED_URI } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n    ...TAGS.html,\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.mathMl,\n    ...TAGS.text,\n  ]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n    ...ATTRS.html,\n    ...ATTRS.svg,\n    ...ATTRS.mathMl,\n    ...ATTRS.xml,\n  ]);\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Output should be safe for jQuery's $() factory? */\n  let SAFE_FOR_JQUERY = false;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n   * `Node` is imported into the current `Document`. If this flag is not enabled the\n   * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n   * DOMPurify. */\n  let RETURN_DOM_IMPORT = false;\n\n  /* Try to return a Trusted Type object instead of a string, retrun a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks? */\n  let SANITIZE_DOM = true;\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  const FORBID_CONTENTS = addToSet({}, [\n    'annotation-xml',\n    'audio',\n    'colgroup',\n    'desc',\n    'foreignobject',\n    'head',\n    'iframe',\n    'math',\n    'mi',\n    'mn',\n    'mo',\n    'ms',\n    'mtext',\n    'noembed',\n    'noframes',\n    'plaintext',\n    'script',\n    'style',\n    'svg',\n    'template',\n    'thead',\n    'title',\n    'video',\n    'xmp',\n  ]);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n    'audio',\n    'video',\n    'img',\n    'source',\n    'image',\n    'track',\n  ]);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n    'alt',\n    'class',\n    'for',\n    'id',\n    'label',\n    'name',\n    'pattern',\n    'placeholder',\n    'summary',\n    'title',\n    'value',\n    'style',\n    'xmlns',\n  ]);\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function (cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS =\n      'ALLOWED_TAGS' in cfg\n        ? addToSet({}, cfg.ALLOWED_TAGS)\n        : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR =\n      'ALLOWED_ATTR' in cfg\n        ? addToSet({}, cfg.ALLOWED_ATTR)\n        : DEFAULT_ALLOWED_ATTR;\n    URI_SAFE_ATTRIBUTES =\n      'ADD_URI_SAFE_ATTR' in cfg\n        ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR)\n        : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS =\n      'ADD_DATA_URI_TAGS' in cfg\n        ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS)\n        : DEFAULT_DATA_URI_TAGS;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    SAFE_FOR_JQUERY = cfg.SAFE_FOR_JQUERY || false; // Default false\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_DOM_IMPORT = cfg.RETURN_DOM_IMPORT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [...TAGS.text]);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, TAGS.html);\n        addToSet(ALLOWED_ATTR, ATTRS.html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svgFilters);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, TAGS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  const _forceRemove = function (node) {\n    arrayPush(DOMPurify.removed, { element: node });\n    try {\n      // eslint-disable-next-line unicorn/prefer-node-remove\n      node.parentNode.removeChild(node);\n    } catch (_) {\n      node.outerHTML = emptyHTML;\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  const _removeAttribute = function (name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node,\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node,\n      });\n    }\n\n    node.removeAttribute(name);\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  const _initDocument = function (dirty) {\n    /* Create a HTML document */\n    let doc;\n    let leadingWhitespace;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    const dirtyPayload = trustedTypesPolicy\n      ? trustedTypesPolicy.createHTML(dirty)\n      : dirty;\n    /* Use the DOMParser API by default, fallback later if needs be */\n    try {\n      doc = new DOMParser().parseFromString(dirtyPayload, 'text/html');\n    } catch (_) {}\n\n    /* Remove title to fix a mXSS bug in older MS Edge */\n    if (removeTitle) {\n      addToSet(FORBID_TAGS, ['title']);\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createHTMLDocument('');\n      const { body } = doc;\n      body.parentNode.removeChild(body.parentNode.firstElementChild);\n      body.outerHTML = dirtyPayload;\n    }\n\n    if (dirty && leadingWhitespace) {\n      doc.body.insertBefore(\n        document.createTextNode(leadingWhitespace),\n        doc.body.childNodes[0] || null\n      );\n    }\n\n    /* Work on whole document or just its body */\n    return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n  };\n\n  /* Here we test for a broken feature in Edge that might cause mXSS */\n  if (DOMPurify.isSupported) {\n    (function () {\n      try {\n        const doc = _initDocument('<x/><title>&lt;/title&gt;&lt;img&gt;');\n        if (regExpTest(/<\\/title/, doc.querySelector('title').innerHTML)) {\n          removeTitle = true;\n        }\n      } catch (_) {}\n    })();\n  }\n\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n  const _createIterator = function (root) {\n    return createNodeIterator.call(\n      root.ownerDocument || root,\n      root,\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT,\n      () => {\n        return NodeFilter.FILTER_ACCEPT;\n      },\n      false\n    );\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  const _isClobbered = function (elm) {\n    if (elm instanceof Text || elm instanceof Comment) {\n      return false;\n    }\n\n    if (\n      typeof elm.nodeName !== 'string' ||\n      typeof elm.textContent !== 'string' ||\n      typeof elm.removeChild !== 'function' ||\n      !(elm.attributes instanceof NamedNodeMap) ||\n      typeof elm.removeAttribute !== 'function' ||\n      typeof elm.setAttribute !== 'function' ||\n      typeof elm.namespaceURI !== 'string'\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  const _isNode = function (object) {\n    return typeof Node === 'object'\n      ? object instanceof Node\n      : object &&\n          typeof object === 'object' &&\n          typeof object.nodeType === 'number' &&\n          typeof object.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  const _executeHook = function (entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    arrayForEach(hooks[entryPoint], (hook) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  // eslint-disable-next-line complexity\n  const _sanitizeElements = function (currentNode) {\n    let content;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = stringToLowerCase(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS,\n    });\n\n    /* Take care of an mXSS pattern using p, br inside svg, math */\n    if (\n      (tagName === 'svg' || tagName === 'math') &&\n      currentNode.querySelectorAll('p, br').length !== 0\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Keep content except for black-listed elements */\n      if (\n        KEEP_CONTENT &&\n        !FORBID_CONTENTS[tagName] &&\n        typeof currentNode.insertAdjacentHTML === 'function'\n      ) {\n        try {\n          const htmlToInsert = currentNode.innerHTML;\n          currentNode.insertAdjacentHTML(\n            'AfterEnd',\n            trustedTypesPolicy\n              ? trustedTypesPolicy.createHTML(htmlToInsert)\n              : htmlToInsert\n          );\n        } catch (_) {}\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove in case a noscript/noembed XSS is suspected */\n    if (\n      tagName === 'noscript' &&\n      regExpTest(/<\\/noscript/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    if (\n      tagName === 'noembed' &&\n      regExpTest(/<\\/noembed/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Convert markup to cover jQuery behavior */\n    if (\n      SAFE_FOR_JQUERY &&\n      !currentNode.firstElementChild &&\n      (!currentNode.content || !currentNode.content.firstElementChild) &&\n      regExpTest(/</g, currentNode.textContent)\n    ) {\n      arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n      if (currentNode.innerHTML) {\n        currentNode.innerHTML = stringReplace(\n          currentNode.innerHTML,\n          /</g,\n          '&lt;'\n        );\n      } else {\n        currentNode.innerHTML = stringReplace(\n          currentNode.textContent,\n          /</g,\n          '&lt;'\n        );\n      }\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = stringReplace(content, MUSTACHE_EXPR, ' ');\n      content = stringReplace(content, ERB_EXPR, ' ');\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function (lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (\n      SANITIZE_DOM &&\n      (lcName === 'id' || lcName === 'name') &&\n      (value in document || value in formElement)\n    ) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && regExpTest(DATA_ATTR, lcName)) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      return false;\n\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (\n      regExpTest(IS_ALLOWED_URI, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if (\n      (lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') &&\n      lcTag !== 'script' &&\n      stringIndexOf(value, 'data:') === 0 &&\n      DATA_URI_TAGS[lcTag]\n    ) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (\n      ALLOW_UNKNOWN_PROTOCOLS &&\n      !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Check for binary attributes */\n      // eslint-disable-next-line no-negated-condition\n    } else if (!value) {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    } else {\n      return false;\n    }\n\n    return true;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  // eslint-disable-next-line complexity\n  const _sanitizeAttributes = function (currentNode) {\n    let attr;\n    let value;\n    let lcName;\n    let idAttr;\n    let l;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    let { attributes } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes) {\n      return;\n    }\n\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      const { name, namespaceURI } = attr;\n      value = stringTrim(attr.value);\n      lcName = stringToLowerCase(name);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Remove attribute */\n      // Safari (iOS + Mac), last tested v8.0.5, crashes if you try to\n      // remove a \"name\" attribute from an <img> tag that has an \"id\"\n      // attribute at the time.\n      if (\n        lcName === 'name' &&\n        currentNode.nodeName === 'IMG' &&\n        attributes.id\n      ) {\n        idAttr = attributes.id;\n        attributes = arraySlice(attributes, []);\n        _removeAttribute('id', currentNode);\n        _removeAttribute(name, currentNode);\n        if (arrayIndexOf(attributes, idAttr) > l) {\n          currentNode.setAttribute('id', idAttr.value);\n        }\n      } else if (\n        // This works around a bug in Safari, where input[type=file]\n        // cannot be dynamically set after type has been removed\n        currentNode.nodeName === 'INPUT' &&\n        lcName === 'type' &&\n        value === 'file' &&\n        hookEvent.keepAttr &&\n        (ALLOWED_ATTR[lcName] || !FORBID_ATTR[lcName])\n      ) {\n        continue;\n      } else {\n        // This avoids a crash in Safari v9.0 with double-ids.\n        // The trick is to first set the id to be empty and then to\n        // remove the attribute\n        if (name === 'id') {\n          currentNode.setAttribute(name, '');\n        }\n\n        _removeAttribute(name, currentNode);\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (SAFE_FOR_JQUERY && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Take care of an mXSS pattern using namespace switches */\n      if (\n        regExpTest(/svg|math/i, currentNode.namespaceURI) &&\n        regExpTest(\n          regExpCreate(\n            '</(' + arrayJoin(objectKeys(FORBID_CONTENTS), '|') + ')',\n            'i'\n          ),\n          value\n        )\n      ) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        value = stringReplace(value, MUSTACHE_EXPR, ' ');\n        value = stringReplace(value, ERB_EXPR, ' ');\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = currentNode.nodeName.toLowerCase();\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        arrayPop(DOMPurify.removed);\n      } catch (_) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function (fragment) {\n    let shadowNode;\n    const shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while ((shadowNode = shadowIterator.nextNode())) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg) {\n    let body;\n    let importedNode;\n    let currentNode;\n    let oldNode;\n    let returnNode;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    if (!dirty) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw typeErrorCreate('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      }\n    }\n\n    /* Check we can run. Otherwise fall back or ignore */\n    if (!DOMPurify.isSupported) {\n      if (\n        typeof window.toStaticHTML === 'object' ||\n        typeof window.toStaticHTML === 'function'\n      ) {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        }\n\n        if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* No special handling necessary for in-place sanitization */\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!-->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (\n        !RETURN_DOM &&\n        !SAFE_FOR_TEMPLATES &&\n        !WHOLE_DOCUMENT &&\n        RETURN_TRUSTED_TYPE &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1\n      ) {\n        return trustedTypesPolicy\n          ? trustedTypesPolicy.createHTML(dirty)\n          : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : emptyHTML;\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while ((currentNode = nodeIterator.nextNode())) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    oldNode = null;\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (RETURN_DOM_IMPORT) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR, ' ');\n      serializedHTML = stringReplace(serializedHTML, ERB_EXPR, ' ');\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML(serializedHTML)\n      : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    const lcTag = stringToLowerCase(tag);\n    const lcName = stringToLowerCase(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      arrayPop(hooks[entryPoint]);\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nexport default createDOMPurify();\n","const { hasOwnProperty, setPrototypeOf, isFrozen, keys: objectKeys } = Object;\n\nlet { freeze, seal } = Object; // eslint-disable-line import/no-mutable-exports\nlet { apply, construct } = typeof Reflect !== 'undefined' && Reflect;\n\nif (!apply) {\n  apply = function (fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!freeze) {\n  freeze = function (x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function (x) {\n    return x;\n  };\n}\n\nif (!construct) {\n  construct = function (Func, args) {\n    return new Func(...args);\n  };\n}\n\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayIndexOf = unapply(Array.prototype.indexOf);\nconst arrayJoin = unapply(Array.prototype.join);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySlice = unapply(Array.prototype.slice);\n\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\n\nconst regExpTest = unapply(RegExp.prototype.test);\nconst regExpCreate = unconstruct(RegExp);\n\nconst typeErrorCreate = unconstruct(TypeError);\n\nexport function unapply(func) {\n  return (thisArg, ...args) => apply(func, thisArg, args);\n}\n\nexport function unconstruct(func) {\n  return (...args) => construct(func, args);\n}\n\n/* Add properties to a lookup table */\nexport function addToSet(set, array) {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = stringToLowerCase(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/* Shallow clone an object */\nexport function clone(object) {\n  const newObject = {};\n\n  let property;\n  for (property in object) {\n    if (apply(hasOwnProperty, object, [property])) {\n      newObject[property] = object[property];\n    }\n  }\n\n  return newObject;\n}\n\nexport {\n  // Array\n  arrayForEach,\n  arrayIndexOf,\n  arrayJoin,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  // Object\n  freeze,\n  hasOwnProperty,\n  isFrozen,\n  objectKeys,\n  setPrototypeOf,\n  seal,\n  // RegExp\n  regExpCreate,\n  regExpTest,\n  // String\n  stringIndexOf,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringTrim,\n  // Errors\n  typeErrorCreate,\n};\n","import { freeze } from './utils';\n\nexport const html = freeze([\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'decorator',\n  'del',\n  'details',\n  'dfn',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meter',\n  'nav',\n  'nobr',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'section',\n  'select',\n  'shadow',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n]);\n\n// SVG\nexport const svg = freeze([\n  'svg',\n  'a',\n  'altglyph',\n  'altglyphdef',\n  'altglyphitem',\n  'animatecolor',\n  'animatemotion',\n  'animatetransform',\n  'audio',\n  'canvas',\n  'circle',\n  'clippath',\n  'defs',\n  'desc',\n  'ellipse',\n  'filter',\n  'font',\n  'g',\n  'glyph',\n  'glyphref',\n  'hkern',\n  'image',\n  'line',\n  'lineargradient',\n  'marker',\n  'mask',\n  'metadata',\n  'mpath',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialgradient',\n  'rect',\n  'stop',\n  'style',\n  'switch',\n  'symbol',\n  'text',\n  'textpath',\n  'title',\n  'tref',\n  'tspan',\n  'video',\n  'view',\n  'vkern',\n]);\n\nexport const svgFilters = freeze([\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n]);\n\nexport const mathMl = freeze([\n  'math',\n  'menclose',\n  'merror',\n  'mfenced',\n  'mfrac',\n  'mglyph',\n  'mi',\n  'mlabeledtr',\n  'mmultiscripts',\n  'mn',\n  'mo',\n  'mover',\n  'mpadded',\n  'mphantom',\n  'mroot',\n  'mrow',\n  'ms',\n  'mspace',\n  'msqrt',\n  'mstyle',\n  'msub',\n  'msup',\n  'msubsup',\n  'mtable',\n  'mtd',\n  'mtext',\n  'mtr',\n  'munder',\n  'munderover',\n]);\n\nexport const text = freeze(['#text']);\n","import { freeze } from './utils';\n\nexport const html = freeze([\n  'accept',\n  'action',\n  'align',\n  'alt',\n  'autocapitalize',\n  'autocomplete',\n  'autopictureinpicture',\n  'autoplay',\n  'background',\n  'bgcolor',\n  'border',\n  'capture',\n  'cellpadding',\n  'cellspacing',\n  'checked',\n  'cite',\n  'class',\n  'clear',\n  'color',\n  'cols',\n  'colspan',\n  'controls',\n  'controlslist',\n  'coords',\n  'crossorigin',\n  'datetime',\n  'decoding',\n  'default',\n  'dir',\n  'disabled',\n  'disablepictureinpicture',\n  'disableremoteplayback',\n  'download',\n  'draggable',\n  'enctype',\n  'enterkeyhint',\n  'face',\n  'for',\n  'headers',\n  'height',\n  'hidden',\n  'high',\n  'href',\n  'hreflang',\n  'id',\n  'inputmode',\n  'integrity',\n  'ismap',\n  'kind',\n  'label',\n  'lang',\n  'list',\n  'loading',\n  'loop',\n  'low',\n  'max',\n  'maxlength',\n  'media',\n  'method',\n  'min',\n  'minlength',\n  'multiple',\n  'muted',\n  'name',\n  'noshade',\n  'novalidate',\n  'nowrap',\n  'open',\n  'optimum',\n  'pattern',\n  'placeholder',\n  'playsinline',\n  'poster',\n  'preload',\n  'pubdate',\n  'radiogroup',\n  'readonly',\n  'rel',\n  'required',\n  'rev',\n  'reversed',\n  'role',\n  'rows',\n  'rowspan',\n  'spellcheck',\n  'scope',\n  'selected',\n  'shape',\n  'size',\n  'sizes',\n  'span',\n  'srclang',\n  'start',\n  'src',\n  'srcset',\n  'step',\n  'style',\n  'summary',\n  'tabindex',\n  'title',\n  'translate',\n  'type',\n  'usemap',\n  'valign',\n  'value',\n  'width',\n  'xmlns',\n]);\n\nexport const svg = freeze([\n  'accent-height',\n  'accumulate',\n  'additive',\n  'alignment-baseline',\n  'ascent',\n  'attributename',\n  'attributetype',\n  'azimuth',\n  'basefrequency',\n  'baseline-shift',\n  'begin',\n  'bias',\n  'by',\n  'class',\n  'clip',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'diffuseconstant',\n  'direction',\n  'display',\n  'divisor',\n  'dur',\n  'edgemode',\n  'elevation',\n  'end',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'filterunits',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'fx',\n  'fy',\n  'g1',\n  'g2',\n  'glyph-name',\n  'glyphref',\n  'gradientunits',\n  'gradienttransform',\n  'height',\n  'href',\n  'id',\n  'image-rendering',\n  'in',\n  'in2',\n  'k',\n  'k1',\n  'k2',\n  'k3',\n  'k4',\n  'kerning',\n  'keypoints',\n  'keysplines',\n  'keytimes',\n  'lang',\n  'lengthadjust',\n  'letter-spacing',\n  'kernelmatrix',\n  'kernelunitlength',\n  'lighting-color',\n  'local',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'markerheight',\n  'markerunits',\n  'markerwidth',\n  'maskcontentunits',\n  'maskunits',\n  'max',\n  'mask',\n  'media',\n  'method',\n  'mode',\n  'min',\n  'name',\n  'numoctaves',\n  'offset',\n  'operator',\n  'opacity',\n  'order',\n  'orient',\n  'orientation',\n  'origin',\n  'overflow',\n  'paint-order',\n  'path',\n  'pathlength',\n  'patterncontentunits',\n  'patterntransform',\n  'patternunits',\n  'points',\n  'preservealpha',\n  'preserveaspectratio',\n  'primitiveunits',\n  'r',\n  'rx',\n  'ry',\n  'radius',\n  'refx',\n  'refy',\n  'repeatcount',\n  'repeatdur',\n  'restart',\n  'result',\n  'rotate',\n  'scale',\n  'seed',\n  'shape-rendering',\n  'specularconstant',\n  'specularexponent',\n  'spreadmethod',\n  'startoffset',\n  'stddeviation',\n  'stitchtiles',\n  'stop-color',\n  'stop-opacity',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke',\n  'stroke-width',\n  'style',\n  'surfacescale',\n  'tabindex',\n  'targetx',\n  'targety',\n  'transform',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'textlength',\n  'type',\n  'u1',\n  'u2',\n  'unicode',\n  'values',\n  'viewbox',\n  'visibility',\n  'version',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'width',\n  'word-spacing',\n  'wrap',\n  'writing-mode',\n  'xchannelselector',\n  'ychannelselector',\n  'x',\n  'x1',\n  'x2',\n  'xmlns',\n  'y',\n  'y1',\n  'y2',\n  'z',\n  'zoomandpan',\n]);\n\nexport const mathMl = freeze([\n  'accent',\n  'accentunder',\n  'align',\n  'bevelled',\n  'close',\n  'columnsalign',\n  'columnlines',\n  'columnspan',\n  'denomalign',\n  'depth',\n  'dir',\n  'display',\n  'displaystyle',\n  'encoding',\n  'fence',\n  'frame',\n  'height',\n  'href',\n  'id',\n  'largeop',\n  'length',\n  'linethickness',\n  'lspace',\n  'lquote',\n  'mathbackground',\n  'mathcolor',\n  'mathsize',\n  'mathvariant',\n  'maxsize',\n  'minsize',\n  'movablelimits',\n  'notation',\n  'numalign',\n  'open',\n  'rowalign',\n  'rowlines',\n  'rowspacing',\n  'rowspan',\n  'rspace',\n  'rquote',\n  'scriptlevel',\n  'scriptminsize',\n  'scriptsizemultiplier',\n  'selection',\n  'separator',\n  'separators',\n  'stretchy',\n  'subscriptshift',\n  'supscriptshift',\n  'symmetric',\n  'voffset',\n  'width',\n  'xmlns',\n]);\n\nexport const xml = freeze([\n  'xlink:href',\n  'xml:id',\n  'xlink:title',\n  'xml:space',\n  'xmlns:xlink',\n]);\n","import { seal } from './utils';\n\n// eslint-disable-next-line unicorn/better-regex\nexport const MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nexport const ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\nexport const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nexport const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nexport const IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nexport const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nexport const ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g // eslint-disable-line no-control-regex\n);\n","/*\n * @license\n *\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n *\n * Copyright (c) 2018,  . (MIT Licensed)\n * https://github.com/ts-stack/markdown\n */\nexport class ExtendRegexp {\n    constructor(regex, flags = '') {\n        this.source = regex.source;\n        this.flags = flags;\n    }\n    /**\n     * Extend regular expression.\n     *\n     * @param groupName Regular expression for search a group name.\n     * @param groupRegexp Regular expression of named group.\n     */\n    setGroup(groupName, groupRegexp) {\n        let newRegexp = typeof groupRegexp == 'string' ? groupRegexp : groupRegexp.source;\n        newRegexp = newRegexp.replace(/(^|[^\\[])\\^/g, '$1');\n        // Extend regexp.\n        this.source = this.source.replace(groupName, newRegexp);\n        return this;\n    }\n    /**\n     * Returns a result of extending a regular expression.\n     */\n    getRegexp() {\n        return new RegExp(this.source, this.flags);\n    }\n}\n","/**\n * @license\n *\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n *\n * Copyright (c) 2018,  . (MIT Licensed)\n * https://github.com/ts-stack/markdown\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst replacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    // tslint:disable-next-line:quotemark\n    \"'\": '&#39;',\n};\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nexport function escape(html, encode) {\n    if (encode) {\n        if (escapeTest.test(html)) {\n            return html.replace(escapeReplace, (ch) => replacements[ch]);\n        }\n    }\n    else {\n        if (escapeTestNoEncode.test(html)) {\n            return html.replace(escapeReplaceNoEncode, (ch) => replacements[ch]);\n        }\n    }\n    return html;\n}\nexport function unescape(html) {\n    // Explicitly match decimal, hex, and named HTML entities\n    return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/gi, function (_, n) {\n        n = n.toLowerCase();\n        if (n === 'colon') {\n            return ':';\n        }\n        if (n.charAt(0) === '#') {\n            return n.charAt(1) === 'x'\n                ? String.fromCharCode(parseInt(n.substring(2), 16))\n                : String.fromCharCode(+n.substring(1));\n        }\n        return '';\n    });\n}\n","/**\n * @license\n *\n * Copyright (c) 2018,  . (MIT Licensed)\n * https://github.com/ts-stack/markdown\n */\nimport { escape, unescape } from './helpers';\nexport var TokenType;\n(function (TokenType) {\n    TokenType[TokenType[\"space\"] = 1] = \"space\";\n    TokenType[TokenType[\"text\"] = 2] = \"text\";\n    TokenType[TokenType[\"paragraph\"] = 3] = \"paragraph\";\n    TokenType[TokenType[\"heading\"] = 4] = \"heading\";\n    TokenType[TokenType[\"listStart\"] = 5] = \"listStart\";\n    TokenType[TokenType[\"listEnd\"] = 6] = \"listEnd\";\n    TokenType[TokenType[\"looseItemStart\"] = 7] = \"looseItemStart\";\n    TokenType[TokenType[\"looseItemEnd\"] = 8] = \"looseItemEnd\";\n    TokenType[TokenType[\"listItemStart\"] = 9] = \"listItemStart\";\n    TokenType[TokenType[\"listItemEnd\"] = 10] = \"listItemEnd\";\n    TokenType[TokenType[\"blockquoteStart\"] = 11] = \"blockquoteStart\";\n    TokenType[TokenType[\"blockquoteEnd\"] = 12] = \"blockquoteEnd\";\n    TokenType[TokenType[\"code\"] = 13] = \"code\";\n    TokenType[TokenType[\"table\"] = 14] = \"table\";\n    TokenType[TokenType[\"html\"] = 15] = \"html\";\n    TokenType[TokenType[\"hr\"] = 16] = \"hr\";\n})(TokenType || (TokenType = {}));\nexport class MarkedOptions {\n    constructor() {\n        this.gfm = true;\n        this.tables = true;\n        this.breaks = false;\n        this.pedantic = false;\n        this.sanitize = false;\n        this.mangle = true;\n        this.smartLists = false;\n        this.silent = false;\n        this.langPrefix = 'lang-';\n        this.smartypants = false;\n        this.headerPrefix = '';\n        /**\n         * Self-close the tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.)\n         * with a \"/\" as required by XHTML.\n         */\n        this.xhtml = false;\n        /**\n         * The function that will be using to escape HTML entities.\n         * By default using inner helper.\n         */\n        this.escape = escape;\n        /**\n         * The function that will be using to unescape HTML entities.\n         * By default using inner helper.\n         */\n        this.unescape = unescape;\n    }\n}\n","/**\n * @license\n *\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n *\n * Copyright (c) 2018,  . (MIT Licensed)\n * https://github.com/ts-stack/markdown\n */\nimport { Marked } from './marked';\nexport class Renderer {\n    constructor(options) {\n        this.options = options || Marked.options;\n    }\n    code(code, lang, escaped) {\n        if (this.options.highlight) {\n            const out = this.options.highlight(code, lang);\n            if (out != null && out !== code) {\n                escaped = true;\n                code = out;\n            }\n        }\n        if (!lang) {\n            return '\\n<pre><code>' + (escaped ? code : this.options.escape(code, true)) + '\\n</code></pre>\\n';\n        }\n        return ('\\n<pre><code class=\"' +\n            this.options.langPrefix +\n            this.options.escape(lang, true) +\n            '\">' +\n            (escaped ? code : this.options.escape(code, true)) +\n            '\\n</code></pre>\\n');\n    }\n    blockquote(quote) {\n        return '<blockquote>\\n' + quote + '</blockquote>\\n';\n    }\n    html(html) {\n        return html;\n    }\n    heading(text, level, raw) {\n        const id = this.options.headerPrefix + raw.toLowerCase().replace(/[^\\w]+/g, '-');\n        return `<h${level} id=\"${id}\">${text}</h${level}>\\n`;\n    }\n    hr() {\n        return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    }\n    list(body, ordered) {\n        const type = ordered ? 'ol' : 'ul';\n        return `\\n<${type}>\\n${body}</${type}>\\n`;\n    }\n    listitem(text) {\n        return '<li>' + text + '</li>\\n';\n    }\n    paragraph(text) {\n        return '<p>' + text + '</p>\\n';\n    }\n    table(header, body) {\n        return `\n<table>\n<thead>\n${header}</thead>\n<tbody>\n${body}</tbody>\n</table>\n`;\n    }\n    tablerow(content) {\n        return '<tr>\\n' + content + '</tr>\\n';\n    }\n    tablecell(content, flags) {\n        const type = flags.header ? 'th' : 'td';\n        const tag = flags.align ? '<' + type + ' style=\"text-align:' + flags.align + '\">' : '<' + type + '>';\n        return tag + content + '</' + type + '>\\n';\n    }\n    // *** Inline level renderer methods. ***\n    strong(text) {\n        return '<strong>' + text + '</strong>';\n    }\n    em(text) {\n        return '<em>' + text + '</em>';\n    }\n    codespan(text) {\n        return '<code>' + text + '</code>';\n    }\n    br() {\n        return this.options.xhtml ? '<br/>' : '<br>';\n    }\n    del(text) {\n        return '<del>' + text + '</del>';\n    }\n    link(href, title, text) {\n        if (this.options.sanitize) {\n            let prot;\n            try {\n                prot = decodeURIComponent(this.options.unescape(href))\n                    .replace(/[^\\w:]/g, '')\n                    .toLowerCase();\n            }\n            catch (e) {\n                return text;\n            }\n            if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n                return text;\n            }\n        }\n        let out = '<a href=\"' + href + '\"';\n        if (title) {\n            out += ' title=\"' + title + '\"';\n        }\n        out += '>' + text + '</a>';\n        return out;\n    }\n    image(href, title, text) {\n        let out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n        if (title) {\n            out += ' title=\"' + title + '\"';\n        }\n        out += this.options.xhtml ? '/>' : '>';\n        return out;\n    }\n    text(text) {\n        return text;\n    }\n}\n","/**\n * @license\n *\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n *\n * Copyright (c) 2018,  . (MIT Licensed)\n * https://github.com/ts-stack/markdown\n */\nimport { ExtendRegexp } from './extend-regexp';\nimport { Marked } from './marked';\nimport { Renderer } from './renderer';\n/**\n * Inline Lexer & Compiler.\n */\nexport class InlineLexer {\n    constructor(staticThis, links, options = Marked.options, renderer) {\n        this.staticThis = staticThis;\n        this.links = links;\n        this.options = options;\n        this.renderer = renderer || this.options.renderer || new Renderer(this.options);\n        if (!this.links) {\n            throw new Error(`InlineLexer requires 'links' parameter.`);\n        }\n        this.setRules();\n    }\n    /**\n     * Static Lexing/Compiling Method.\n     */\n    static output(src, links, options) {\n        const inlineLexer = new this(this, links, options);\n        return inlineLexer.output(src);\n    }\n    static getRulesBase() {\n        if (this.rulesBase) {\n            return this.rulesBase;\n        }\n        /**\n         * Inline-Level Grammar.\n         */\n        const base = {\n            escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n            autolink: /^<([^ <>]+(@|:\\/)[^ <>]+)>/,\n            tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^<'\">])*?>/,\n            link: /^!?\\[(inside)\\]\\(href\\)/,\n            reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n            nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n            strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n            em: /^\\b_((?:[^_]|__)+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n            code: /^(`+)([\\s\\S]*?[^`])\\1(?!`)/,\n            br: /^ {2,}\\n(?!\\s*$)/,\n            text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/,\n            _inside: /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/,\n            _href: /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/\n        };\n        base.link = new ExtendRegexp(base.link)\n            .setGroup('inside', base._inside)\n            .setGroup('href', base._href)\n            .getRegexp();\n        base.reflink = new ExtendRegexp(base.reflink).setGroup('inside', base._inside).getRegexp();\n        return (this.rulesBase = base);\n    }\n    static getRulesPedantic() {\n        if (this.rulesPedantic) {\n            return this.rulesPedantic;\n        }\n        return (this.rulesPedantic = {\n            ...this.getRulesBase(),\n            ...{\n                strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n                em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n            }\n        });\n    }\n    static getRulesGfm() {\n        if (this.rulesGfm) {\n            return this.rulesGfm;\n        }\n        const base = this.getRulesBase();\n        const escape = new ExtendRegexp(base.escape).setGroup('])', '~|])').getRegexp();\n        const text = new ExtendRegexp(base.text)\n            .setGroup(']|', '~]|')\n            .setGroup('|', '|https?://|')\n            .getRegexp();\n        return (this.rulesGfm = {\n            ...base,\n            ...{\n                escape,\n                url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n                del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n                text\n            }\n        });\n    }\n    static getRulesBreaks() {\n        if (this.rulesBreaks) {\n            return this.rulesBreaks;\n        }\n        const inline = this.getRulesGfm();\n        const gfm = this.getRulesGfm();\n        return (this.rulesBreaks = {\n            ...gfm,\n            ...{\n                br: new ExtendRegexp(inline.br).setGroup('{2,}', '*').getRegexp(),\n                text: new ExtendRegexp(gfm.text).setGroup('{2,}', '*').getRegexp()\n            }\n        });\n    }\n    setRules() {\n        if (this.options.gfm) {\n            if (this.options.breaks) {\n                this.rules = this.staticThis.getRulesBreaks();\n            }\n            else {\n                this.rules = this.staticThis.getRulesGfm();\n            }\n        }\n        else if (this.options.pedantic) {\n            this.rules = this.staticThis.getRulesPedantic();\n        }\n        else {\n            this.rules = this.staticThis.getRulesBase();\n        }\n        this.hasRulesGfm = this.rules.url !== undefined;\n    }\n    /**\n     * Lexing/Compiling.\n     */\n    output(nextPart) {\n        nextPart = nextPart;\n        let execArr;\n        let out = '';\n        while (nextPart) {\n            // escape\n            if ((execArr = this.rules.escape.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                out += execArr[1];\n                continue;\n            }\n            // autolink\n            if ((execArr = this.rules.autolink.exec(nextPart))) {\n                let text;\n                let href;\n                nextPart = nextPart.substring(execArr[0].length);\n                if (execArr[2] === '@') {\n                    text = this.options.escape(execArr[1].charAt(6) === ':' ? this.mangle(execArr[1].substring(7)) : this.mangle(execArr[1]));\n                    href = this.mangle('mailto:') + text;\n                }\n                else {\n                    text = this.options.escape(execArr[1]);\n                    href = text;\n                }\n                out += this.renderer.link(href, null, text);\n                continue;\n            }\n            // url (gfm)\n            if (!this.inLink && this.hasRulesGfm && (execArr = this.rules.url.exec(nextPart))) {\n                let text;\n                let href;\n                nextPart = nextPart.substring(execArr[0].length);\n                text = this.options.escape(execArr[1]);\n                href = text;\n                out += this.renderer.link(href, null, text);\n                continue;\n            }\n            // tag\n            if ((execArr = this.rules.tag.exec(nextPart))) {\n                if (!this.inLink && /^<a /i.test(execArr[0])) {\n                    this.inLink = true;\n                }\n                else if (this.inLink && /^<\\/a>/i.test(execArr[0])) {\n                    this.inLink = false;\n                }\n                nextPart = nextPart.substring(execArr[0].length);\n                out += this.options.sanitize\n                    ? this.options.sanitizer\n                        ? this.options.sanitizer(execArr[0])\n                        : this.options.escape(execArr[0])\n                    : execArr[0];\n                continue;\n            }\n            // link\n            if ((execArr = this.rules.link.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                this.inLink = true;\n                out += this.outputLink(execArr, {\n                    href: execArr[2],\n                    title: execArr[3]\n                });\n                this.inLink = false;\n                continue;\n            }\n            // reflink, nolink\n            if ((execArr = this.rules.reflink.exec(nextPart)) || (execArr = this.rules.nolink.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                const keyLink = (execArr[2] || execArr[1]).replace(/\\s+/g, ' ');\n                const link = this.links[keyLink.toLowerCase()];\n                if (!link || !link.href) {\n                    out += execArr[0].charAt(0);\n                    nextPart = execArr[0].substring(1) + nextPart;\n                    continue;\n                }\n                this.inLink = true;\n                out += this.outputLink(execArr, link);\n                this.inLink = false;\n                continue;\n            }\n            // strong\n            if ((execArr = this.rules.strong.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                out += this.renderer.strong(this.output(execArr[2] || execArr[1]));\n                continue;\n            }\n            // em\n            if ((execArr = this.rules.em.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                out += this.renderer.em(this.output(execArr[2] || execArr[1]));\n                continue;\n            }\n            // code\n            if ((execArr = this.rules.code.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                out += this.renderer.codespan(this.options.escape(execArr[2].trim(), true));\n                continue;\n            }\n            // br\n            if ((execArr = this.rules.br.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                out += this.renderer.br();\n                continue;\n            }\n            // del (gfm)\n            if (this.hasRulesGfm && (execArr = this.rules.del.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                out += this.renderer.del(this.output(execArr[1]));\n                continue;\n            }\n            // text\n            if ((execArr = this.rules.text.exec(nextPart))) {\n                nextPart = nextPart.substring(execArr[0].length);\n                out += this.renderer.text(this.options.escape(this.smartypants(execArr[0])));\n                continue;\n            }\n            if (nextPart) {\n                throw new Error('Infinite loop on byte: ' + nextPart.charCodeAt(0));\n            }\n        }\n        return out;\n    }\n    /**\n     * Compile Link.\n     */\n    outputLink(execArr, link) {\n        const href = this.options.escape(link.href);\n        const title = link.title ? this.options.escape(link.title) : null;\n        return execArr[0].charAt(0) !== '!'\n            ? this.renderer.link(href, title, this.output(execArr[1]))\n            : this.renderer.image(href, title, this.options.escape(execArr[1]));\n    }\n    /**\n     * Smartypants Transformations.\n     */\n    smartypants(text) {\n        if (!this.options.smartypants) {\n            return text;\n        }\n        return (text\n            // em-dashes\n            .replace(/---/g, '\\u2014')\n            // en-dashes\n            .replace(/--/g, '\\u2013')\n            // opening singles\n            .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n            // closing singles & apostrophes\n            .replace(/'/g, '\\u2019')\n            // opening doubles\n            .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n            // closing doubles\n            .replace(/\"/g, '\\u201d')\n            // ellipses\n            .replace(/\\.{3}/g, '\\u2026'));\n    }\n    /**\n     * Mangle Links.\n     */\n    mangle(text) {\n        if (!this.options.mangle) {\n            return text;\n        }\n        let out = '';\n        const length = text.length;\n        for (let i = 0; i < length; i++) {\n            let str;\n            if (Math.random() > 0.5) {\n                str = 'x' + text.charCodeAt(i).toString(16);\n            }\n            out += '&#' + str + ';';\n        }\n        return out;\n    }\n}\n","/**\n * @license\n *\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n *\n * Copyright (c) 2018,  . (MIT Licensed)\n * https://github.com/ts-stack/markdown\n */\nimport { InlineLexer } from './inline-lexer';\nimport { TokenType } from './interfaces';\nimport { Marked } from './marked';\nimport { Renderer } from './renderer';\n/**\n * Parsing & Compiling.\n */\nexport class Parser {\n    constructor(options) {\n        this.simpleRenderers = [];\n        this.line = 0;\n        this.tokens = [];\n        this.token = null;\n        this.options = options || Marked.options;\n        this.renderer = this.options.renderer || new Renderer(this.options);\n    }\n    static parse(tokens, links, options) {\n        const parser = new this(options);\n        return parser.parse(links, tokens);\n    }\n    parse(links, tokens) {\n        this.inlineLexer = new InlineLexer(InlineLexer, links, this.options, this.renderer);\n        this.tokens = tokens.reverse();\n        let out = '';\n        while (this.next()) {\n            out += this.tok();\n        }\n        return out;\n    }\n    debug(links, tokens) {\n        this.inlineLexer = new InlineLexer(InlineLexer, links, this.options, this.renderer);\n        this.tokens = tokens.reverse();\n        let out = '';\n        while (this.next()) {\n            const outToken = this.tok();\n            this.token.line = this.line += outToken.split('\\n').length - 1;\n            out += outToken;\n        }\n        return out;\n    }\n    next() {\n        return (this.token = this.tokens.pop());\n    }\n    getNextElement() {\n        return this.tokens[this.tokens.length - 1];\n    }\n    parseText() {\n        let body = this.token.text;\n        let nextElement;\n        while ((nextElement = this.getNextElement()) && nextElement.type == TokenType.text) {\n            body += '\\n' + this.next().text;\n        }\n        return this.inlineLexer.output(body);\n    }\n    tok() {\n        switch (this.token.type) {\n            case TokenType.space: {\n                return '';\n            }\n            case TokenType.paragraph: {\n                return this.renderer.paragraph(this.inlineLexer.output(this.token.text));\n            }\n            case TokenType.text: {\n                if (this.options.isNoP) {\n                    return this.parseText();\n                }\n                else {\n                    return this.renderer.paragraph(this.parseText());\n                }\n            }\n            case TokenType.heading: {\n                return this.renderer.heading(this.inlineLexer.output(this.token.text), this.token.depth, this.token.text);\n            }\n            case TokenType.listStart: {\n                let body = '';\n                const ordered = this.token.ordered;\n                while (this.next().type != TokenType.listEnd) {\n                    body += this.tok();\n                }\n                return this.renderer.list(body, ordered);\n            }\n            case TokenType.listItemStart: {\n                let body = '';\n                while (this.next().type != TokenType.listItemEnd) {\n                    body += this.token.type == TokenType.text ? this.parseText() : this.tok();\n                }\n                return this.renderer.listitem(body);\n            }\n            case TokenType.looseItemStart: {\n                let body = '';\n                while (this.next().type != TokenType.listItemEnd) {\n                    body += this.tok();\n                }\n                return this.renderer.listitem(body);\n            }\n            case TokenType.code: {\n                return this.renderer.code(this.token.text, this.token.lang, this.token.escaped);\n            }\n            case TokenType.table: {\n                let header = '';\n                let body = '';\n                let cell;\n                // header\n                cell = '';\n                for (let i = 0; i < this.token.header.length; i++) {\n                    const flags = { header: true, align: this.token.align[i] };\n                    const out = this.inlineLexer.output(this.token.header[i]);\n                    cell += this.renderer.tablecell(out, flags);\n                }\n                header += this.renderer.tablerow(cell);\n                for (const row of this.token.cells) {\n                    cell = '';\n                    for (let j = 0; j < row.length; j++) {\n                        cell += this.renderer.tablecell(this.inlineLexer.output(row[j]), {\n                            header: false,\n                            align: this.token.align[j]\n                        });\n                    }\n                    body += this.renderer.tablerow(cell);\n                }\n                return this.renderer.table(header, body);\n            }\n            case TokenType.blockquoteStart: {\n                let body = '';\n                while (this.next().type != TokenType.blockquoteEnd) {\n                    body += this.tok();\n                }\n                return this.renderer.blockquote(body);\n            }\n            case TokenType.hr: {\n                return this.renderer.hr();\n            }\n            case TokenType.html: {\n                const html = !this.token.pre && !this.options.pedantic ? this.inlineLexer.output(this.token.text) : this.token.text;\n                return this.renderer.html(html);\n            }\n            default: {\n                if (this.simpleRenderers.length) {\n                    for (let i = 0; i < this.simpleRenderers.length; i++) {\n                        if (this.token.type == 'simpleRule' + (i + 1)) {\n                            return this.simpleRenderers[i].call(this.renderer, this.token.execArr);\n                        }\n                    }\n                }\n                const errMsg = `Token with \"${this.token.type}\" type was not found.`;\n                if (this.options.silent) {\n                    console.log(errMsg);\n                }\n                else {\n                    throw new Error(errMsg);\n                }\n            }\n        }\n    }\n}\n","/**\n * @license\n *\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n *\n * Copyright (c) 2018,  . (MIT Licensed)\n * https://github.com/ts-stack/markdown\n */\nimport { BlockLexer } from './block-lexer';\nimport { MarkedOptions, TokenType } from './interfaces';\nimport { Parser } from './parser';\nlet Marked = /** @class */ (() => {\n    class Marked {\n        /**\n         * Merges the default options with options that will be set.\n         *\n         * @param options Hash of options.\n         */\n        static setOptions(options) {\n            Object.assign(this.options, options);\n            return this;\n        }\n        /**\n         * Setting simple block rule.\n         */\n        static setBlockRule(regexp, renderer = () => '') {\n            BlockLexer.simpleRules.push(regexp);\n            this.simpleRenderers.push(renderer);\n            return this;\n        }\n        /**\n         * Accepts Markdown text and returns text in HTML format.\n         *\n         * @param src String of markdown source to be compiled.\n         * @param options Hash of options. They replace, but do not merge with the default options.\n         * If you want the merging, you can to do this via `Marked.setOptions()`.\n         */\n        static parse(src, options = this.options) {\n            try {\n                const { tokens, links } = this.callBlockLexer(src, options);\n                return this.callParser(tokens, links, options);\n            }\n            catch (e) {\n                return this.callMe(e);\n            }\n        }\n        /**\n         * Accepts Markdown text and returns object with text in HTML format,\n         * tokens and links from `BlockLexer.parser()`.\n         *\n         * @param src String of markdown source to be compiled.\n         * @param options Hash of options. They replace, but do not merge with the default options.\n         * If you want the merging, you can to do this via `Marked.setOptions()`.\n         */\n        static debug(src, options = this.options) {\n            const { tokens, links } = this.callBlockLexer(src, options);\n            let origin = tokens.slice();\n            const parser = new Parser(options);\n            parser.simpleRenderers = this.simpleRenderers;\n            const result = parser.debug(links, tokens);\n            /**\n             * Translates a token type into a readable form,\n             * and moves `line` field to a first place in a token object.\n             */\n            origin = origin.map(token => {\n                token.type = TokenType[token.type] || token.type;\n                const line = token.line;\n                delete token.line;\n                if (line) {\n                    return { ...{ line }, ...token };\n                }\n                else {\n                    return token;\n                }\n            });\n            return { tokens: origin, links, result };\n        }\n        static callBlockLexer(src = '', options) {\n            if (typeof src != 'string') {\n                throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof src}'`);\n            }\n            // Preprocessing.\n            src = src\n                .replace(/\\r\\n|\\r/g, '\\n')\n                .replace(/\\t/g, '    ')\n                .replace(/\\u00a0/g, ' ')\n                .replace(/\\u2424/g, '\\n')\n                .replace(/^ +$/gm, '');\n            return BlockLexer.lex(src, options, true);\n        }\n        static callParser(tokens, links, options) {\n            if (this.simpleRenderers.length) {\n                const parser = new Parser(options);\n                parser.simpleRenderers = this.simpleRenderers;\n                return parser.parse(links, tokens);\n            }\n            else {\n                return Parser.parse(tokens, links, options);\n            }\n        }\n        static callMe(err) {\n            err.message += '\\nPlease report this to https://github.com/ts-stack/markdown';\n            if (this.options.silent) {\n                return '<p>An error occured:</p><pre>' + this.options.escape(err.message + '', true) + '</pre>';\n            }\n            throw err;\n        }\n    }\n    Marked.options = new MarkedOptions();\n    Marked.simpleRenderers = [];\n    return Marked;\n})();\nexport { Marked };\n","/**\n * @license\n *\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n *\n * Copyright (c) 2018,  . (MIT Licensed)\n * https://github.com/ts-stack/markdown\n */\nimport { ExtendRegexp } from './extend-regexp';\nimport { TokenType } from './interfaces';\nimport { Marked } from './marked';\nlet BlockLexer = /** @class */ (() => {\n    class BlockLexer {\n        constructor(staticThis, options) {\n            this.staticThis = staticThis;\n            this.links = {};\n            this.tokens = [];\n            this.options = options || Marked.options;\n            this.setRules();\n        }\n        /**\n         * Accepts Markdown text and returns object with tokens and links.\n         *\n         * @param src String of markdown source to be compiled.\n         * @param options Hash of options.\n         */\n        static lex(src, options, top, isBlockQuote) {\n            const lexer = new this(this, options);\n            return lexer.getTokens(src, top, isBlockQuote);\n        }\n        static getRulesBase() {\n            if (this.rulesBase) {\n                return this.rulesBase;\n            }\n            const base = {\n                newline: /^\\n+/,\n                code: /^( {4}[^\\n]+\\n*)+/,\n                hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n                heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n                lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n                blockquote: /^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+/,\n                list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n                html: /^ *(?:comment *(?:\\n|\\s*$)|closed *(?:\\n{2,}|\\s*$)|closing *(?:\\n{2,}|\\s*$))/,\n                def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n                paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n                text: /^[^\\n]+/,\n                bullet: /(?:[*+-]|\\d+\\.)/,\n                item: /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/\n            };\n            base.item = new ExtendRegexp(base.item, 'gm').setGroup(/bull/g, base.bullet).getRegexp();\n            base.list = new ExtendRegexp(base.list)\n                .setGroup(/bull/g, base.bullet)\n                .setGroup('hr', '\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))')\n                .setGroup('def', '\\\\n+(?=' + base.def.source + ')')\n                .getRegexp();\n            const tag = '(?!(?:' +\n                'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code' +\n                '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo' +\n                '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|[^\\\\w\\\\s@]*@)\\\\b';\n            base.html = new ExtendRegexp(base.html)\n                .setGroup('comment', /<!--[\\s\\S]*?-->/)\n                .setGroup('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n                .setGroup('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n                .setGroup(/tag/g, tag)\n                .getRegexp();\n            base.paragraph = new ExtendRegexp(base.paragraph)\n                .setGroup('hr', base.hr)\n                .setGroup('heading', base.heading)\n                .setGroup('lheading', base.lheading)\n                .setGroup('blockquote', base.blockquote)\n                .setGroup('tag', '<' + tag)\n                .setGroup('def', base.def)\n                .getRegexp();\n            return (this.rulesBase = base);\n        }\n        static getRulesGfm() {\n            if (this.rulesGfm) {\n                return this.rulesGfm;\n            }\n            const base = this.getRulesBase();\n            const gfm = {\n                ...base,\n                ...{\n                    fences: /^ *(`{3,}|~{3,})[ \\.]*(\\S+)? *\\n([\\s\\S]*?)\\s*\\1 *(?:\\n+|$)/,\n                    paragraph: /^/,\n                    heading: /^ *(#{1,6}) +([^\\n]+?) *#* *(?:\\n+|$)/\n                }\n            };\n            const group1 = gfm.fences.source.replace('\\\\1', '\\\\2');\n            const group2 = base.list.source.replace('\\\\1', '\\\\3');\n            gfm.paragraph = new ExtendRegexp(base.paragraph).setGroup('(?!', `(?!${group1}|${group2}|`).getRegexp();\n            return (this.rulesGfm = gfm);\n        }\n        static getRulesTable() {\n            if (this.rulesTables) {\n                return this.rulesTables;\n            }\n            return (this.rulesTables = {\n                ...this.getRulesGfm(),\n                ...{\n                    nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n                    table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n                }\n            });\n        }\n        setRules() {\n            if (this.options.gfm) {\n                if (this.options.tables) {\n                    this.rules = this.staticThis.getRulesTable();\n                }\n                else {\n                    this.rules = this.staticThis.getRulesGfm();\n                }\n            }\n            else {\n                this.rules = this.staticThis.getRulesBase();\n            }\n            this.hasRulesGfm = this.rules.fences !== undefined;\n            this.hasRulesTables = this.rules.table !== undefined;\n        }\n        /**\n         * Lexing.\n         */\n        getTokens(src, top, isBlockQuote) {\n            let nextPart = src;\n            let execArr;\n            mainLoop: while (nextPart) {\n                // newline\n                if ((execArr = this.rules.newline.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    if (execArr[0].length > 1) {\n                        this.tokens.push({ type: TokenType.space });\n                    }\n                }\n                // code\n                if ((execArr = this.rules.code.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    const code = execArr[0].replace(/^ {4}/gm, '');\n                    this.tokens.push({\n                        type: TokenType.code,\n                        text: !this.options.pedantic ? code.replace(/\\n+$/, '') : code\n                    });\n                    continue;\n                }\n                // fences code (gfm)\n                if (this.hasRulesGfm && (execArr = this.rules.fences.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    this.tokens.push({\n                        type: TokenType.code,\n                        lang: execArr[2],\n                        text: execArr[3] || ''\n                    });\n                    continue;\n                }\n                // heading\n                if ((execArr = this.rules.heading.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    this.tokens.push({\n                        type: TokenType.heading,\n                        depth: execArr[1].length,\n                        text: execArr[2]\n                    });\n                    continue;\n                }\n                // table no leading pipe (gfm)\n                if (top && this.hasRulesTables && (execArr = this.rules.nptable.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    const item = {\n                        type: TokenType.table,\n                        header: execArr[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n                        align: execArr[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n                        cells: []\n                    };\n                    for (let i = 0; i < item.align.length; i++) {\n                        if (/^ *-+: *$/.test(item.align[i])) {\n                            item.align[i] = 'right';\n                        }\n                        else if (/^ *:-+: *$/.test(item.align[i])) {\n                            item.align[i] = 'center';\n                        }\n                        else if (/^ *:-+ *$/.test(item.align[i])) {\n                            item.align[i] = 'left';\n                        }\n                        else {\n                            item.align[i] = null;\n                        }\n                    }\n                    const td = execArr[3].replace(/\\n$/, '').split('\\n');\n                    for (let i = 0; i < td.length; i++) {\n                        item.cells[i] = td[i].split(/ *\\| */);\n                    }\n                    this.tokens.push(item);\n                    continue;\n                }\n                // lheading\n                if ((execArr = this.rules.lheading.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    this.tokens.push({\n                        type: TokenType.heading,\n                        depth: execArr[2] === '=' ? 1 : 2,\n                        text: execArr[1]\n                    });\n                    continue;\n                }\n                // hr\n                if ((execArr = this.rules.hr.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    this.tokens.push({ type: TokenType.hr });\n                    continue;\n                }\n                // blockquote\n                if ((execArr = this.rules.blockquote.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    this.tokens.push({ type: TokenType.blockquoteStart });\n                    const str = execArr[0].replace(/^ *> ?/gm, '');\n                    // Pass `top` to keep the current\n                    // \"toplevel\" state. This is exactly\n                    // how markdown.pl works.\n                    this.getTokens(str);\n                    this.tokens.push({ type: TokenType.blockquoteEnd });\n                    continue;\n                }\n                // list\n                if ((execArr = this.rules.list.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    const bull = execArr[2];\n                    this.tokens.push({ type: TokenType.listStart, ordered: bull.length > 1 });\n                    // Get each top-level item.\n                    const str = execArr[0].match(this.rules.item);\n                    const length = str.length;\n                    let next = false;\n                    let space;\n                    let blockBullet;\n                    let loose;\n                    for (let i = 0; i < length; i++) {\n                        let item = str[i];\n                        // Remove the list item's bullet so it is seen as the next token.\n                        space = item.length;\n                        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n                        // Outdent whatever the list item contains. Hacky.\n                        if (item.indexOf('\\n ') !== -1) {\n                            space -= item.length;\n                            item = !this.options.pedantic\n                                ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n                                : item.replace(/^ {1,4}/gm, '');\n                        }\n                        // Determine whether the next list item belongs here.\n                        // Backpedal if it does not belong in this list.\n                        if (this.options.smartLists && i !== length - 1) {\n                            blockBullet = this.staticThis.getRulesBase().bullet.exec(str[i + 1])[0];\n                            if (bull !== blockBullet && !(bull.length > 1 && blockBullet.length > 1)) {\n                                nextPart = str.slice(i + 1).join('\\n') + nextPart;\n                                i = length - 1;\n                            }\n                        }\n                        // Determine whether item is loose or not.\n                        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n                        // for discount behavior.\n                        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n                        if (i !== length - 1) {\n                            next = item.charAt(item.length - 1) === '\\n';\n                            if (!loose) {\n                                loose = next;\n                            }\n                        }\n                        this.tokens.push({ type: loose ? TokenType.looseItemStart : TokenType.listItemStart });\n                        // Recurse.\n                        this.getTokens(item, false, isBlockQuote);\n                        this.tokens.push({ type: TokenType.listItemEnd });\n                    }\n                    this.tokens.push({ type: TokenType.listEnd });\n                    continue;\n                }\n                // html\n                if ((execArr = this.rules.html.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    const attr = execArr[1];\n                    const isPre = attr === 'pre' || attr === 'script' || attr === 'style';\n                    this.tokens.push({\n                        type: this.options.sanitize ? TokenType.paragraph : TokenType.html,\n                        pre: !this.options.sanitizer && isPre,\n                        text: execArr[0]\n                    });\n                    continue;\n                }\n                // def\n                if (top && (execArr = this.rules.def.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    this.links[execArr[1].toLowerCase()] = {\n                        href: execArr[2],\n                        title: execArr[3]\n                    };\n                    continue;\n                }\n                // table (gfm)\n                if (top && this.hasRulesTables && (execArr = this.rules.table.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    const item = {\n                        type: TokenType.table,\n                        header: execArr[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n                        align: execArr[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n                        cells: []\n                    };\n                    for (let i = 0; i < item.align.length; i++) {\n                        if (/^ *-+: *$/.test(item.align[i])) {\n                            item.align[i] = 'right';\n                        }\n                        else if (/^ *:-+: *$/.test(item.align[i])) {\n                            item.align[i] = 'center';\n                        }\n                        else if (/^ *:-+ *$/.test(item.align[i])) {\n                            item.align[i] = 'left';\n                        }\n                        else {\n                            item.align[i] = null;\n                        }\n                    }\n                    const td = execArr[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n');\n                    for (let i = 0; i < td.length; i++) {\n                        item.cells[i] = td[i].replace(/^ *\\| *| *\\| *$/g, '').split(/ *\\| */);\n                    }\n                    this.tokens.push(item);\n                    continue;\n                }\n                // simple rules\n                if (this.staticThis.simpleRules.length) {\n                    const simpleRules = this.staticThis.simpleRules;\n                    for (let i = 0; i < simpleRules.length; i++) {\n                        if ((execArr = simpleRules[i].exec(nextPart))) {\n                            nextPart = nextPart.substring(execArr[0].length);\n                            const type = 'simpleRule' + (i + 1);\n                            this.tokens.push({ type, execArr });\n                            continue mainLoop;\n                        }\n                    }\n                }\n                // top-level paragraph\n                if (top && (execArr = this.rules.paragraph.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    if (execArr[1].slice(-1) === '\\n') {\n                        this.tokens.push({\n                            type: TokenType.paragraph,\n                            text: execArr[1].slice(0, -1)\n                        });\n                    }\n                    else {\n                        this.tokens.push({\n                            type: this.tokens.length > 0 ? TokenType.paragraph : TokenType.text,\n                            text: execArr[1]\n                        });\n                    }\n                    continue;\n                }\n                // text\n                // Top-level should never reach here.\n                if ((execArr = this.rules.text.exec(nextPart))) {\n                    nextPart = nextPart.substring(execArr[0].length);\n                    this.tokens.push({ type: TokenType.text, text: execArr[0] });\n                    continue;\n                }\n                if (nextPart) {\n                    throw new Error('Infinite loop on byte: ' + nextPart.charCodeAt(0) + `, near text '${nextPart.slice(0, 30)}...'`);\n                }\n            }\n            return { tokens: this.tokens, links: this.links };\n        }\n    }\n    BlockLexer.simpleRules = [];\n    return BlockLexer;\n})();\nexport { BlockLexer };\n","export * from './block-lexer';\nexport * from './helpers';\nexport * from './inline-lexer';\nexport * from './interfaces';\nexport * from './marked';\nexport * from './parser';\nexport * from './renderer';\nexport * from './extend-regexp';\n",null,"/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Item, ItemUrl, User } from './state'\nimport { sanitize } from 'dompurify'\nimport { Marked } from '@ts-stack/markdown'\n\nimport {\n  ValueDecoder,\n  decodeValue,\n  objectValue,\n  integerValue,\n  stringValue,\n  arrayValue,\n  nullValue\n} from 'partsing/value'\n\nimport { lazy } from 'partsing/core/decoder'\n\nconst itemUrlDecoder = stringValue.map(\n  (s: string): ItemUrl => {\n    if (s.indexOf('item?id=') >= 0) {\n      return ItemUrl.internal\n    } else {\n      return ItemUrl.external(s)\n    }\n  }\n)\n\nconst markdownToHtml = (s: string) => {\n  return sanitize(Marked.parse(s))\n}\n\nconst itemDecoder: ValueDecoder<Item> = objectValue(\n  {\n    id: integerValue,\n    title: stringValue,\n    points: nullValue.map(() => 0).or(integerValue),\n    user: nullValue.map(() => '').or(stringValue),\n    time_ago: stringValue,\n    url: itemUrlDecoder,\n    domain: stringValue,\n    comments_count: integerValue,\n    comments: lazy(() => arrayValue(itemDecoder)),\n    content: stringValue.map(markdownToHtml),\n    type: stringValue\n  },\n  ['comments', 'content', 'domain', 'points', 'title', 'user']\n)\n\nexport const decodeItem = decodeValue<Item>(itemDecoder)\nexport const decodeFeed = decodeValue<Item[]>(arrayValue(itemDecoder))\n\nconst userDecoder = objectValue(\n  {\n    about: stringValue.map(markdownToHtml),\n    created: stringValue,\n    id: stringValue,\n    karma: integerValue\n  },\n  ['about']\n)\n\nexport const decodeUser = decodeValue<User>(userDecoder)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DecodeResult } from 'partsing/core/result'\nimport { HttpError } from './http_error'\nimport { Feed } from './route'\nimport { decodeItem, decodeUser, decodeFeed } from './decoders'\nimport { success, failure, Result } from 'tempo-std/lib/result'\n\nconst RESET_CACHE_AFTER = 120000\nconst base = 'https://api.hnpwa.com'\n\nconst makeUrl = (path: string[]) => {\n  return `${base}/${path.join('/')}`\n}\n\nconst cache = new Map<string, any>()\n\nconst makeRequest = async <Out>(\n  path: string[],\n  parse: (input: any) => DecodeResult<any, Out, string>\n): Promise<Result<Out, HttpError>> => {\n  const endpoint = makeUrl(path)\n  if (cache.has(endpoint)) {\n    return cache.get(endpoint)\n  } else {\n    const output = await (async () => {\n      const response = await fetch(endpoint)\n      try {\n        if (response.status === 200) {\n          const json = await response.json()\n          const result = parse(json)\n          if (result.isSuccess()) {\n            return success<Out, HttpError>(result.value)\n          } else {\n            return failure<Out, HttpError>(\n              HttpError.badBody(result.failures.join(';'))\n            )\n          }\n        } else {\n          return failure<Out, HttpError>(HttpError.badStatus(response.status))\n        }\n      } catch (e) {\n        console.error(e)\n        return failure<Out, HttpError>(HttpError.networkError)\n      }\n    })()\n    cache.set(endpoint, output)\n    setTimeout(() => {\n      cache.delete(endpoint)\n    }, RESET_CACHE_AFTER) // reset cache entry after elapsed time\n    return output\n  }\n}\n\nconst feedName = (feed: Feed) => {\n  switch (feed) {\n    case Feed.ask:\n      return 'ask'\n    case Feed.jobs:\n      return 'jobs'\n    case Feed.new:\n      return 'newest'\n    case Feed.top:\n      return 'news'\n    case Feed.show:\n      return 'show'\n    default:\n      throw `unkown value ${feed}`\n  }\n}\n\nexport const Request = {\n  item(id: number) {\n    const path = ['v0', 'item', `${id}.json`]\n    return makeRequest(path, decodeItem)\n  },\n  user(id: string) {\n    const path = ['v0', 'user', `${id}.json`]\n    return makeRequest(path, decodeUser)\n  },\n  feed(feed: Feed, page: number) {\n    const name = feedName(feed)\n    const path = ['v0', name, `${page}.json`]\n    return makeRequest(path, decodeFeed)\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nconst githubPrefix = '/demo/hnpwa'\nexport const isGithub = location.pathname.startsWith(githubPrefix)\n\nexport const getCurrentPath = () => {\n  if (isGithub) {\n    const base = location.hash\n    if (!base || base === '#')\n      return '/'\n    else\n      return base.substring(1)\n  } else {\n    return location.pathname\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { State } from './state'\nimport { Action } from './action'\nimport { toTitle, Route, toUrl, Feed } from './route'\nimport { matchKind } from 'tempo-std/lib//match'\nimport { Request } from './request'\nimport { isGithub } from './config'\n\nexport const setTitle = (state: State) => {\n  const title = (page => {\n    switch (page.kind) {\n      case 'Article':\n        return page.item.title\n      case 'Profile':\n        return page.user.id\n      default:\n        return toTitle(state.route)\n    }\n  })(state.page)\n  document.title = `${title} | Tempo HNPWA`\n}\n\nexport const loadRoute = (dispatch: (action: Action) => void) => (\n  route: Route\n) => {\n  matchKind<Route, void>(route, {\n    FeedsRoute: async r => {\n      const result = await Request.feed(r.feed, r.page)\n      dispatch(Action.gotFeed(r.feed, result))\n    },\n    ItemRoute: async r => {\n      const result = await Request.item(r.item)\n      dispatch(Action.gotItem(r.item, result))\n    },\n    NotFoundRoute: () => {},\n    RootRoute: async r => {\n      const result = await Request.feed(Feed.top, 1)\n      dispatch(Action.gotFeed(Feed.top, result))\n    },\n    UserRoute: async r => {\n      const result = await Request.user(r.user)\n      dispatch(Action.gotUser(r.user, result))\n    },\n    ExternalRoute: () => {}\n  })\n}\n\nlet current = ''\nexport const middleware = (dispatch: (action: Action) => void) => (\n  state: State,\n  action: Action,\n  _: State\n) => {\n  switch (action.kind) {\n    case 'LinkClicked':\n      if (action.route.kind === 'ExternalRoute') {\n        window.open(action.route.path, '_blank')\n      } else if (action.route.kind !== 'NotFoundRoute') {\n        const url = toUrl(action.route)\n        if (url !== current) {\n          const toSet = isGithub ? `#${url}` : url\n          history.pushState(action.route, '', toSet)\n          current = url\n        }\n        dispatch(Action.urlChanged(url))\n      }\n      break\n    case 'UrlChanged':\n      loadRoute(dispatch)(state.route)\n      break\n    default:\n  }\n  setTitle(state)\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Tempo } from 'tempo-dom/lib/tempo'\nimport { template } from './templates/app'\nimport { reducer } from './reducer'\nimport { createState, Page } from './state'\nimport { Route } from './route'\nimport { middleware, setTitle } from './middleware'\nimport { Action } from './action'\nimport { getCurrentPath } from './config'\n\nconst route = Route.fromUrl(getCurrentPath())\n\nconst state = createState(Route.root, Page.loading)\n\ndocument.body.innerHTML = ''\n\nconst { dispatch } = Tempo.render({ state, reducer, template, middleware })\n\nsetTitle(state)\n\ndispatch(Action.linkClicked(route))\n\nwindow.addEventListener('popstate', event => {\n  const route = Route.fromUrl(getCurrentPath())\n  dispatch(Action.linkClicked(route))\n})\n"]}