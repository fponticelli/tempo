{"version":3,"sources":["../../src/impl/set_attribute.ts","../../src/impl/attributes_mapper.ts","../../src/impl/dom.ts","../src/context.ts","../../src/impl/text.ts","../src/objects.ts","../../src/impl/dom_builder.ts","../src/value.ts","../src/maybe.ts","../src/arrays.ts","../src/equals.ts","../../src/impl/component.ts","../src/lifecycle.ts","../../src/impl/element.ts","../../src/impl/map_state.ts","../../src/impl/fragment.ts","../../src/impl/map_action.ts","../../src/impl/map_query.ts","../../src/impl/until.ts","../../src/impl/simple_component.ts","../../src/impl/portal.ts","../../src/impl/lazy.ts","../../src/impl/match_bool_template.ts","../src/html.ts","../../src/impl/hold_state.ts","../../src/impl/adapter.ts","../../src/impl/svg_builder.ts","../../src/impl/html_builder.ts","../../src/impl/match_template.ts","../../src/impl/match_value_template.ts","../../src/impl/html.ts","../src/tempo.ts","main.ts"],"names":[],"mappings":"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","file":"main.c6e2ad9f.js","sourceRoot":"../src","sourcesContent":["/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nexport function setAttribute(\n  el: Element,\n  name: string,\n  value: string | undefined\n) {\n  if (value == null || value === '') {\n    el.removeAttribute(name)\n  } else {\n    el.setAttribute(name, value)\n  }\n}\n\nexport function setNumberProperty(\n  el: Element,\n  name: string,\n  value: string | undefined\n) {\n  const anyEl = el as any\n  if (value == null) {\n    anyEl[name] = null\n  } else {\n    anyEl[name] = Number(value)\n  }\n}\n\nexport function setProperty(\n  el: Element,\n  name: string,\n  value: string | undefined\n) {\n  const anyEl = el as any\n  if (value == null) {\n    anyEl[name] = null\n  } else {\n    anyEl[name] = value\n  }\n}\n\nexport function setBoolProperty(\n  el: Element,\n  name: string,\n  value: string | undefined\n) {\n  const anyEl = el as any\n  if (value == null) {\n    anyEl[name] = null\n  } else {\n    anyEl[name] = value === name\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport {\n  setBoolProperty,\n  setNumberProperty,\n  setProperty\n} from './set_attribute'\n\nexport const attributeNameMap: Record<string, string> = {\n  acceptcharset: 'accept-charset',\n  acceptCharset: 'accept-charset',\n  asattr: 'as',\n  asAttr: 'as',\n  classname: 'class',\n  className: 'class',\n  httpequiv: 'http-equiv',\n  httpEquiv: 'http-equiv',\n  htmlfor: 'for',\n  htmlFor: 'for'\n}\n\nexport const htmlAttributeMap: Record<\n  string,\n  (el: Element, name: string, value: any) => void\n> = {\n  // html\n  checked: setBoolProperty,\n  multiple: setBoolProperty,\n  muted: setBoolProperty,\n  selected: setBoolProperty,\n  value: setProperty,\n\n  // svg\n  useCurrentView: setBoolProperty,\n  currentView: setProperty,\n  currentScale: setNumberProperty\n\n  // 'accept-charset': setSpaceSeparated,\n  // acceptcharset: setSpaceSeparated,\n  // async: setBoolAttribute,\n  // autofocus: setBoolAttribute,\n  // autoplay: setBoolAttribute,\n  // class: setSpaceSeparated,\n  // contenteditable: setEnumBoolAttribute,\n  // controls: setBoolAttribute,\n  // default: setBoolAttribute,\n  // defer: setBoolAttribute,\n  // disabled: setBoolAttribute,\n  // draggable: setEnumBoolAttribute,\n  // formnovalidate: setBoolAttribute,\n  // headers: setSpaceSeparated,\n  // hidden: setBoolAttribute,\n  // ismap: setBoolAttribute,\n  // itemscope: setBoolAttribute,\n  // loop: setBoolAttribute,\n  // nomodule: setBoolAttribute,\n  // novalidate: setBoolAttribute,\n  // open: setBoolAttribute,\n  // ping: setSpaceSeparated,\n  // playsinline: setBoolAttribute,\n  // readonly: setBoolAttribute,\n  // rel: setSpaceSeparated,\n  // required: setBoolAttribute,\n  // reversed: setBoolAttribute,\n  // sizes: setCommaSeparated,\n  // srcset: setCommaSeparated,\n  // style: setStyleAttribute,\n  // typemustmatch: setBoolAttribute,\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { htmlAttributeMap as attributeMap } from './attributes_mapper'\nimport { setAttribute } from './set_attribute'\n\nexport function removeNode(node: Node) {\n  const el = node as HTMLElement\n  if (el && el.onblur) {\n    el.onblur = null\n  }\n  if (!node || node.ownerDocument === undefined) return\n  if (node.parentElement) {\n    node.parentElement.removeChild(node)\n  }\n}\n\nexport function insertFBefore(ref: Node) {\n  return function (node: Node) {\n    if (ref.parentElement != null) {\n      ref.parentElement.insertBefore(node, ref)\n    }\n  }\n}\n\nexport function makeCreateElement(name: string) {\n  return (doc: Document) => (doc.createElement(name) as any) as HTMLElement\n}\n\nexport function makeCreateElementNS(namespace: string, name: string) {\n  return (doc: Document) => doc.createElementNS(namespace, name) as HTMLElement // TODO\n}\n\nexport type Acc<State> = ((state: State) => void)[]\n\nexport function setElAttribute(\n  el: HTMLElement,\n  name: string,\n  value: string | undefined\n) {\n  if (attributeMap[name] !== undefined) {\n    attributeMap[name](el, name, value)\n  } else {\n    setAttribute(el, name, value)\n  }\n  // let set = attributeMap[name] || setAttribute\n  // set(el, name, value)\n}\n\nexport function setElStyle(\n  el: HTMLElement,\n  name: string,\n  value: string | undefined\n) {\n  if (value == null) {\n    el.style.removeProperty(name)\n  } else {\n    el.style.setProperty(name, value)\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { insertFBefore as makeInsertBefore } from './impl/dom'\n\nexport class DOMContext<Action> {\n  static fromElement<Action>(\n    element: Element,\n    dispatch: (action: Action) => void\n  ): DOMContext<Action> {\n    return new DOMContext<Action>(\n      element.ownerDocument || (window && window.document),\n      (node: Node) => element.appendChild(node),\n      dispatch\n    )\n  }\n\n  constructor(\n    readonly doc: Document,\n    readonly append: (node: Node) => void,\n    readonly dispatch: (action: Action) => void\n  ) {}\n\n  mapAction<OtherAction>(f: (action: OtherAction) => Action) {\n    return new DOMContext<OtherAction>(\n      this.doc,\n      this.append,\n      (action: OtherAction) => this.dispatch(f(action))\n    )\n  }\n\n  conditionalMapAction<OtherAction>(\n    f: (action: OtherAction) => Action | undefined\n  ) {\n    return new DOMContext<OtherAction>(\n      this.doc,\n      this.append,\n      (action: OtherAction) => {\n        const newAction = f(action)\n        if (newAction !== undefined) {\n          this.dispatch(newAction)\n        }\n      }\n    )\n  }\n\n  withAppendToReference() {\n    const ref = this.doc.createTextNode('')\n    this.append(ref)\n    return {\n      ctx: this.withAppend(makeInsertBefore(ref)),\n      ref\n    }\n  }\n\n  withAppend(append: (node: Node) => void) {\n    return new DOMContext<Action>(this.doc, append, this.dispatch)\n  }\n\n  withDispatch<OtherAction>(dispatch: (action: OtherAction) => void) {\n    return new DOMContext<OtherAction>(this.doc, this.append, dispatch)\n  }\n\n  withInterceptDispatch(dispatch: (action: Action) => void) {\n    return new DOMContext<Action>(this.doc, this.append, (action: Action) => {\n      dispatch(action)\n      this.dispatch(action)\n    })\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { DerivedValue } from 'tempo-core/lib/value'\nimport { removeNode } from './dom'\nimport { DOMTemplate } from '../template'\nimport { DOMContext } from '../context'\nimport { TextValue } from '../value'\n\nclass DerivedTextTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  constructor(readonly makeContent: DerivedValue<State, string>) {}\n\n  render(ctx: DOMContext<Action>, state: State): View<State, Query> {\n    const { makeContent } = this\n    let content = makeContent(state) || ''\n    const node = ctx.doc.createTextNode(content)\n    ctx.append(node)\n    return {\n      change(state: State) {\n        const newContent = makeContent(state) || ''\n        if (newContent !== content) {\n          node.nodeValue = newContent\n          if (newContent.length < 5000) content = newContent\n        }\n      },\n      destroy() {\n        removeNode(node)\n      },\n      request(_: Query) {}\n    }\n  }\n}\n\nclass LiteralTextTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  constructor(readonly content: string) {}\n  render(ctx: DOMContext<Action>, _: State): View<State, Query> {\n    const node = ctx.doc.createTextNode(this.content)\n    ctx.append(node)\n    return {\n      change(_: State) {},\n      destroy() {\n        removeNode(node)\n      },\n      request(_: Query) {}\n    }\n  }\n}\n\nexport function text<State, Action, Query = unknown>(\n  content: TextValue<State>\n): DOMTemplate<State, Action, Query> {\n  if (typeof content === 'function') {\n    return new DerivedTextTemplate<State, Action, Query>(\n      content as DerivedValue<State, string>\n    )\n  } else {\n    return new LiteralTextTemplate<State, Action, Query>(content || '')\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { TupleToUnion } from './types/tuples'\nimport { Merge } from './types/objects'\n\nexport function keys<T>(object: T): (keyof T)[] {\n  return (Object.keys(object) as any) as (keyof T)[]\n}\n\nexport function removeFields<T, F extends (keyof T)[]>(\n  ob: T,\n  ...fields: F\n): Omit<T, TupleToUnion<F>> {\n  return keys(ob).reduce((acc: any, key) => {\n    if (fields.indexOf(key) < 0) acc[key] = ob[key]\n    return acc\n  }, {} as any) as Omit<T, TupleToUnion<F>>\n}\n\nexport function merge<A extends {}, B extends {}>(a: A, b: B): Merge<A, B> {\n  return Object.assign({}, a, b) as Merge<A, B>\n}\n","import { DOMTemplate, DOMChild } from '../template'\nimport { text } from './text'\nimport { DerivedOrLiteralValue, DerivedValue } from 'tempo-core/lib/value'\nimport { keys } from 'tempo-std/lib/objects'\n\nexport type ListOrRecordValue<T extends string> = T | T[] | Record<T, boolean>\nexport type ListValue<T> = T | T[]\n\nexport interface IBuilder<State, Action, Query> {\n  build(): DOMTemplate<State, Action, Query>\n}\n\nexport function childOrBuilderToTemplate<State, Action, Query>(\n  src: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n): DOMTemplate<State, Action, Query> {\n  if (src === undefined) {\n    return text('')\n  } else if (typeof (src as any).build === 'function') {\n    return (src as IBuilder<State, Action, Query>).build()\n  } else if (typeof src === 'string' || typeof src === 'function') {\n    return text(src)\n  } else {\n    return src as DOMTemplate<State, Action, Query>\n  }\n}\n\nexport function extractLiterals<State>(\n  record: Record<string, DerivedOrLiteralValue<State, string>>\n) {\n  return keys(record).reduce((list, name) => {\n    if (typeof record[name] === 'string') {\n      list.push({ name, value: record[name] as string })\n    }\n    return list\n  }, [] as { name: string; value: string }[])\n}\n\nexport function extractDerived<State>(\n  record: Record<string, DerivedOrLiteralValue<State, string>>\n) {\n  return keys(record).reduce((list, name) => {\n    if (typeof record[name] === 'function') {\n      list.push({\n        name,\n        resolve: record[name] as DerivedValue<State, string>\n      })\n    }\n    return list\n  }, [] as { name: string; resolve: DerivedValue<State, string> }[])\n}\nexport function listOrRecordToString(\n  src: ListOrRecordValue<string>,\n  separator: string\n) {\n  if (typeof src === 'string') {\n    return src\n  } else if (src == null) {\n    return undefined\n  } else if (Array.isArray(src)) {\n    return src.join(separator)\n  } else {\n    return keys(src)\n      .reduce((list, key) => {\n        if (src[key]) list.push(key)\n        return list\n      }, [] as string[])\n      .join(separator)\n  }\n}\n\nexport function numbersListToString(src: ListValue<number>) {\n  src = Array.isArray(src) ? src : [src]\n  return src.join(' ')\n}\n\nexport function numberPairsListToString(src: [number, number][]) {\n  return src.map(([a, b]) => `${a},${b}`).join(' ')\n}\n\nexport function listOrRecordToSpaceSeparated(src: ListOrRecordValue<string>) {\n  return listOrRecordToString(src, ' ')\n}\n\nexport function lostOrRecordToCommaSeparated(src: ListOrRecordValue<string>) {\n  return listOrRecordToString(src, ', ')\n}\n\nexport function stylesToString(src: string | Record<string, string>) {\n  if (typeof src === 'string') {\n    return src\n  } else {\n    return keys(src)\n      .reduce((list, key) => {\n        if (src[key]) list.push(`${key}: ${src[key]};`)\n        return list\n      }, [] as string[])\n      .join(' ')\n  }\n}\n\nexport function booleanToString(src: boolean) {\n  return `${src}`\n}\n\nexport function toggleToString(name: string) {\n  return (src: boolean) => (src ? name : '')\n}\n\nexport class DOMBuilder<State, Action, Query> {\n  protected _children: DOMTemplate<State, Action, Query>[] = []\n  // children\n  Append(\n    el: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  ): this {\n    this._children.push(childOrBuilderToTemplate(el))\n    return this\n  }\n  AppendMany(\n    ...els: (DOMChild<State, Action, Query> | IBuilder<State, Action, Query>)[]\n  ): this {\n    this._children.push(...els.map(childOrBuilderToTemplate))\n    return this\n  }\n\n  // transform\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { keys } from 'tempo-std/lib/objects'\nimport { DerivedOrLiteralValue, DerivedValue } from 'tempo-core/lib/value'\n\nexport type Attribute<State, Value> =\n  | DerivedOrLiteralValue<State, Value | undefined>\n  | undefined\nexport type TextValue<S> = Attribute<S, string>\nexport type EventHandler<S, Action> = (\n  state: S,\n  event: Event,\n  element: Element\n) => Action | undefined\nexport type EventHandlerTE<S, Action, Ev extends Event, El extends Element> = (\n  state: S,\n  event: Ev,\n  element: El\n) => Action | undefined\nexport type StyleAttribute<State, Value> = DerivedOrLiteralValue<\n  State,\n  Value | undefined\n>\n\nexport type ValueOfAttribute<\n  Att extends Attribute<any, any>\n> = Att extends Attribute<any, infer Value> ? Value : never\n\nexport function applyAttributes<State, A, B, C>(\n  attrA: Attribute<State, A>,\n  attrB: Attribute<State, B>,\n  apply: (a: A, b: B) => C\n): Attribute<State, C> {\n  if (attrA === undefined) return undefined\n  if (attrB === undefined) return undefined\n  if (typeof attrA === 'function' && typeof attrB === 'function') {\n    return (state: State) => {\n      const resA = (attrA as DerivedValue<State, A>)(state)\n      const resB = (attrB as DerivedValue<State, B>)(state)\n      if (resA !== undefined && resB !== undefined) return apply(resA, resB)\n      else return undefined\n    }\n  } else if (typeof attrA === 'function') {\n    return (state: State) => {\n      const resA = (attrA as DerivedValue<State, A>)(state)\n      if (resA !== undefined) return apply(resA, attrB as B)\n      else return undefined\n    }\n  } else if (typeof attrB === 'function') {\n    return (state: State) => {\n      const resB = (attrB as DerivedValue<State, B>)(state)\n      if (resB !== undefined) return apply(attrA as A, resB)\n      else return undefined\n    }\n  } else {\n    return apply(attrA, attrB)\n  }\n}\n\nexport function mapAttribute<State, A, B>(\n  attr: Attribute<State, A>,\n  map: (a: A) => B\n): Attribute<State, B> {\n  if (attr === undefined) {\n    return undefined\n  } else if (typeof attr === 'function') {\n    return (state: State) => {\n      const res = (attr as DerivedValue<State, A>)(state)\n      if (res !== undefined) return map(res)\n      else return undefined\n    }\n  } else {\n    return map(attr)\n  }\n}\n\nexport function mapAttributeOrElse<State, A, B>(\n  attr: Attribute<State, A>,\n  map: (a: A) => B,\n  alt: B\n): Attribute<State, B> {\n  if (attr === undefined) {\n    return alt\n  } else if (typeof attr === 'function') {\n    return (state: State) => {\n      const res = (attr as DerivedValue<State, A>)(state)\n      if (res !== undefined) return map(res)\n      else return alt\n    }\n  } else {\n    return map(attr)\n  }\n}\n\nexport function mapAttributes<\n  State,\n  T extends { [_ in string]: Attribute<State, any> },\n  B\n>(\n  attributes: T,\n  map: (values: { [K in keyof T]?: ValueOfAttribute<T[K]> }) => B\n): Attribute<State, B> {\n  const ks = keys(attributes)\n  const isDynamic = ks.some(k => typeof attributes[k] === 'function')\n  if (isDynamic) {\n    return (state: State) => {\n      const o = ks.reduce((acc: T, k: keyof T) => {\n        acc[k] = resolveAttribute(attributes[k])(state) as T[typeof k]\n        return acc\n      }, {} as T)\n      return map(o)\n    }\n  } else {\n    return map(attributes as T)\n  }\n}\n\nexport function attributeToHandler<State, Value, Action>(\n  attr: Attribute<State, Value>,\n  handler: EventHandler<Value, Action>\n): EventHandler<State, Action> | undefined {\n  if (attr === undefined || handler === undefined) {\n    return () => {\n      return undefined\n    }\n  } else if (typeof attr === 'function') {\n    return (state: State, event: Event, element: Element) => {\n      const res = (attr as DerivedValue<State, Value>)(state)\n      if (res !== undefined) return handler(res, event, element)\n      else return undefined\n    }\n  } else {\n    return (_: State, event: Event, element: Element) => {\n      return handler(attr, event, element)\n    }\n  }\n}\n\nexport function resolveAttribute<State, Value>(attr: Attribute<State, Value>) {\n  if (typeof attr === 'function') {\n    return attr as DerivedValue<State, Value>\n  } else {\n    return (_: State): Value | undefined => attr\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nexport type Maybe<T> = Just<T> | Nothing\n\nexport type Nothing = undefined | null\nexport type Just<T> = T\n\nexport const nothing: Maybe<never> = undefined\nexport function just<T>(value: T): Maybe<T> {\n  return value\n}\n\nexport function isNothing<T>(maybe: Maybe<T>): maybe is Nothing {\n  return maybe == null\n}\nexport function isJust<T>(maybe: Maybe<T>): maybe is Just<T> {\n  return maybe != null\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\n/**\n * Utility functions to manipulate `Array` values.\n */\n\nimport { Maybe, nothing } from './maybe'\nimport { Ordering, Compare } from './ord'\nimport { Primitive } from './primitive'\nimport { keys } from './objects'\n\nexport function map<A, B>(arr: A[], f: (a: A) => B): B[] {\n  const length = arr.length\n  const buff = new Array(length)\n  for (let i = 0; i < length; i++) {\n    buff[i] = f(arr[i])\n  }\n  return buff\n}\n\nexport function flatMap<A, B>(arr: A[], f: (a: A) => B[]): B[] {\n  const buff = new Array()\n  for (const el of arr) {\n    buff.push(...f(el))\n  }\n  return buff\n}\n\nexport function head<A>(arr: A[]): Maybe<A> {\n  return arr.length > 0 ? arr[0] : nothing\n}\n\nexport function tail<A>(arr: A[]): A[] {\n  return arr.slice(1)\n}\n\nexport function equals<T>(\n  a: T[],\n  b: T[],\n  predicate: (a: T, b: T) => boolean\n): boolean {\n  if (a.length !== b.length) return false\n  else {\n    for (let i = 0; i < a.length; i++) {\n      if (!predicate(a[i], b[i])) return false\n    }\n    return true\n  }\n}\n\nexport function makeEquals<T>(predicate: (a: T, b: T) => boolean) {\n  return function (a: T[], b: T[]) {\n    return equals(a, b, predicate)\n  }\n}\n\nexport function isEmpty<T>(arr: T[]): arr is [] {\n  return arr.length === 0\n}\n\nexport function hasValues<T>(arr: T[]): arr is [T, ...T[]] {\n  return arr.length > 0\n}\n\nexport function filter<T>(arr: T[], predicate: (v: T) => boolean): T[] {\n  const buff = [] as T[]\n  for (const a of arr) if (predicate(a)) buff.push(a)\n  return buff\n}\n\nexport function flatten<T>(arr: T[][]): T[] {\n  return ([] as T[]).concat(...arr)\n}\n\nexport function foldLeft<T, B>(arr: T[], f: (acc: B, curr: T) => B, b: B): B {\n  for (const a of arr) {\n    b = f(b, a)\n  }\n  return b\n}\n\nexport function all<T>(arr: T[], predicate: (v: T) => boolean): boolean {\n  for (const a of arr) {\n    if (!predicate(a)) {\n      return false\n    }\n  }\n  return true\n}\n\nexport function any<T>(arr: T[], predicate: (v: T) => boolean): boolean {\n  for (const a of arr) {\n    if (predicate(a)) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function each<T>(arr: T[], f: (v: T) => void): void {\n  for (const a of arr) f(a)\n}\n\nexport function concat<A>(...arrs: A[][]): A[] {\n  return ([] as A[]).concat(...arrs)\n}\n\nexport function makeCompare<A>(comparef: Compare<A>, shorterFirst = true) {\n  return function (a: A[], b: A[]) {\n    if (a.length < b.length) {\n      return -1 * (shorterFirst ? 1 : -1)\n    } else if (a.length > b.length) {\n      return 1 * (shorterFirst ? 1 : -1)\n    }\n    for (let i = 0; i < a.length; i++) {\n      const ord = comparef(a[i], b[i])\n      if (ord !== 0) return ord\n    }\n    return 0\n  }\n}\n\nexport function sort<A>(compare: (a: A, b: A) => Ordering, arr: A[]): A[] {\n  return arr.slice().sort(compare)\n}\n\nexport function range<A>(length: number, f: (index: number) => A): A[] {\n  const buff = new Array(length) as A[]\n  for (let i = 0; i < length; i++) buff[i] = f(i)\n  return buff\n}\n\nexport function numbersRange(length: number, startAt = 0) {\n  return range(length, i => startAt + i)\n}\n\nexport function fill<A>(length: number, value: A): A[] {\n  return range(length, () => value)\n}\n\nexport function distinctPrimitive<T extends Primitive>(values: T[]): T[] {\n  return Array.from(new Set(values))\n}\n\nexport function distinctByPredicate<T>(\n  values: T[],\n  predicate: (a: T) => string\n): T[] {\n  const map = {} as Record<string, T>\n  values.forEach(v => {\n    map[predicate(v)] = v\n  })\n  return keys(map).map(k => map[k])\n}\n\nexport function remove<A>(\n  arr: A[],\n  item: A,\n  predicate?: (a: A) => boolean\n): boolean {\n  let index\n  if (predicate !== undefined) {\n    index = arr.findIndex(predicate)\n  } else {\n    index = arr.indexOf(item)\n  }\n  if (index < 0) {\n    return false\n  } else {\n    arr.splice(index, 1)\n    return true\n  }\n}\n\nexport function ofIterableIterator<A>(it: IterableIterator<A>): A[] {\n  const buff = [] as A[]\n  for (let r = it.next(); !r.done; r = it.next()) {\n    buff.push(r.value)\n  }\n  return buff\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nexport function strictEqual<A>(a: A, b: A): boolean {\n  return a === b || (a !== a && b !== b)\n}\n\nexport function deepEqual<A>(a: A, b: A): boolean {\n  if (strictEqual(a, b)) return true\n  if (a == null || b == null) return false\n  const aIsArr = Array.isArray(a)\n  const bIsArr = Array.isArray(b)\n\n  if (aIsArr !== bIsArr) return false\n  if (aIsArr) {\n    const aArr: never[] = a as any\n    const bArr: never[] = b as any\n    const aLength = aArr.length\n    if (aLength !== bArr.length) return false\n    for (let i = 0; i < aLength; i++) {\n      if (!deepEqual(aArr[i], bArr[i])) return false\n    }\n    return true\n  }\n\n  const aIsDate = a instanceof Date\n  const bIsDate = b instanceof Date\n  if (aIsDate !== bIsDate) return false\n  if (aIsDate) {\n    const aDate: Date = a as never\n    const bDate: Date = b as never\n    return +aDate === +bDate\n  }\n\n  const aIsSet = a instanceof Set\n  const bIsSet = b instanceof Set\n  if (aIsSet !== bIsSet) return false\n  if (aIsSet) {\n    const aSet: Set<any> = a as never\n    const bSet: Set<any> = b as never\n    if (aSet.size !== bSet.size) return false\n    const it = aSet.keys()\n    while (true) {\n      const curr = it.next()\n      if (curr.done) break\n      if (!bSet.has(curr.value)) return false\n    }\n    return true\n  }\n\n  const aIsMap = a instanceof Map\n  const bIsMap = b instanceof Map\n  if (aIsMap !== bIsMap) return false\n  if (aIsMap) {\n    const aMap: Map<any, any> = a as never\n    const bMap: Map<any, any> = b as never\n    const aMapLength = aMap.size\n    if (aMapLength !== bMap.size) return false\n    const it = aMap.keys()\n    while (true) {\n      const curr = it.next()\n      if (curr.done) break\n      if (!deepEqual(aMap.get(curr.value), bMap.get(curr.value))) return false\n    }\n    return true\n  }\n\n  const aIsObj = typeof a === 'object'\n  const bIsObj = typeof b === 'object'\n  if (aIsObj !== bIsObj) return false\n  if (aIsObj) {\n    const aObj: any = a\n    const bObj: any = b\n    const aFields = Object.keys(aObj)\n    const bFields = Object.keys(bObj)\n    const aLength = aFields.length\n\n    if (aLength !== bFields.length) return false\n\n    for (let i = 0; i < aLength; i++) {\n      const field = aFields[i]\n      if (!bObj.hasOwnProperty(field)) return false\n      if (!deepEqual(aObj[field], bObj[field])) return false\n    }\n\n    return true\n  }\n\n  return false\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { map } from 'tempo-std/lib/arrays'\nimport { View } from 'tempo-core/lib/view'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\nimport { strictEqual } from 'tempo-std/lib/equals'\n\nexport interface ComponentView<State, Action, Query>\n  extends View<State, Query> {\n  dispatch: (action: Action) => void\n  state: State\n}\n\nexport class ComponentTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly children: DOMTemplate<State, Action, Query>[]\n  constructor(\n    readonly delayed: boolean,\n    readonly reducer: (state: State, action: Action) => State,\n    readonly equal: undefined | ((a: State, b: State) => boolean),\n    children: (\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(\n    ctx: DOMContext<Action>,\n    state: State\n  ): ComponentView<State, Action, Query> {\n    const equals = this.equal ?? strictEqual\n    let update: (state: State) => void\n    if (this.delayed) {\n      let shouldRender = true\n      update = (state: State) => {\n        view.state = state\n        if (shouldRender) {\n          shouldRender = false\n          setTimeout(() => {\n            view.change(view.state)\n            shouldRender = true\n          })\n        }\n      }\n    } else {\n      update = (state: State) => {\n        view.state = state\n        view.change(state)\n      }\n    }\n\n    const innerDispatch = (action: Action) => {\n      const newState = this.reducer(view.state, action)\n      if (!equals(newState, view.state)) {\n        // view.state = newState\n        update(newState)\n      }\n      ctx.dispatch(action)\n    }\n    const newCtx = ctx.withDispatch(innerDispatch)\n    const views = map(this.children, child => child.render(newCtx, state))\n    const view = {\n      change: (state: State) => {\n        view.state = state\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      },\n      state,\n      dispatch: (action: Action) => {\n        innerDispatch(action)\n      }\n    }\n    return view\n  }\n}\n","import { DOMContext } from './context'\n\nexport interface Lifecycle<State> {\n  beforeChange(state: State): void\n  afterChange(state: State): void\n  beforeDestroy(): void\n}\n\nexport type MakeLifecycle<State, Action> = (\n  state: State,\n  element: HTMLElement,\n  ctx: DOMContext<Action>\n) => Lifecycle<State>\n\nexport function compose<State, Action>(\n  a: MakeLifecycle<State, Action>,\n  b: MakeLifecycle<State, Action>\n): MakeLifecycle<State, Action> {\n  return (state: State, element: HTMLElement, ctx: DOMContext<Action>) => {\n    const al = a(state, element, ctx)\n    const bl = b(state, element, ctx)\n    return {\n      beforeChange(state: State) {\n        al.beforeChange(state)\n        bl.beforeChange(state)\n      },\n      afterChange(state: State) {\n        al.afterChange(state)\n        bl.afterChange(state)\n      },\n      beforeDestroy() {\n        al.beforeDestroy()\n        bl.beforeDestroy()\n      }\n    }\n  }\n}\n\nexport function makeEmptyLifecycle<State, Action, HTMLElement>(\n  state: State,\n  element: HTMLElement,\n  ctx: DOMContext<Action>\n) {\n  return {\n    beforeChange(state: State) {},\n    afterChange(state: State) {},\n    beforeDestroy() {}\n  }\n}\n\nexport function focusElement<State, Action, HTMLElement>(\n  state: State,\n  element: HTMLElement,\n  ctx: DOMContext<Action>\n) {\n  ;((element as unknown) as HTMLInputElement).focus() // TODO\n  return {\n    beforeChange(state: State) {},\n    afterChange(state: State) {},\n    beforeDestroy() {}\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate } from '../template'\nimport { DOMContext } from '../context'\nimport { View } from 'tempo-core/lib/view'\nimport { removeNode, setElAttribute, setElStyle } from './dom'\nimport { EventHandler } from '../value'\nimport { map } from 'tempo-std/lib/arrays'\n\nimport { MakeLifecycle } from '../lifecycle'\nimport { DerivedValue } from 'tempo-core/lib/value'\n\nexport class DOMElement<State, Action, Query = unknown>\n  implements DOMTemplate<State, Action, Query> {\n  constructor(\n    public createElement: (doc: Document) => HTMLElement,\n    public literalAttrs: { name: string; value: string }[],\n    public derivedAttrs: {\n      name: string\n      resolve: DerivedValue<State, string | undefined>\n    }[],\n    public literalStyles: { name: string; value: string }[],\n    public derivedStyles: {\n      name: string\n      resolve: DerivedValue<State, string | undefined>\n    }[],\n    public handlers: {\n      name: string\n      callback: EventHandler<State, Action>\n    }[],\n    public makeLifecycle: MakeLifecycle<State, Action>,\n    public respond: (\n      query: Query,\n      el: HTMLElement,\n      ctx: DOMContext<Action>\n    ) => void,\n    public children: DOMTemplate<State, Action, Query>[]\n  ) {}\n\n  render(ctx: DOMContext<Action>, state: State): View<State, Query> {\n    const { respond } = this\n    let localState = state\n    const el = this.createElement(ctx.doc)\n\n    for (const att of this.literalAttrs) setElAttribute(el, att.name, att.value)\n    for (const att of this.derivedAttrs) {\n      setElAttribute(el, att.name, att.resolve(localState))\n    }\n\n    for (const stl of this.literalStyles) setElStyle(el, stl.name, stl.value)\n    for (const stl of this.derivedStyles) {\n      setElStyle(el, stl.name, stl.resolve(localState))\n    }\n\n    for (const handler of this.handlers) {\n      el.addEventListener(\n        handler.name,\n        (event: Event) => {\n          const action = handler.callback(localState, event, el)\n          if (action !== undefined) {\n            ctx.dispatch(action)\n          }\n        },\n        false\n      )\n    }\n\n    // children\n    const appendChild = (n: Node) => el.appendChild(n)\n    const newCtx = ctx.withAppend(appendChild)\n    const views = map(this.children, child => child.render(newCtx, localState))\n\n    ctx.append(el)\n\n    const lifecycle = this.makeLifecycle(localState, el, ctx)\n\n    return {\n      change: (state: State) => {\n        localState = state\n        lifecycle.beforeChange(localState)\n\n        for (const att of this.derivedAttrs) {\n          setElAttribute(el, att.name, att.resolve(localState))\n        }\n        for (const stl of this.derivedStyles) {\n          setElStyle(el, stl.name, stl.resolve(localState))\n        }\n        for (const view of views) {\n          view.change(localState)\n        }\n\n        lifecycle.afterChange(localState)\n      },\n      destroy: () => {\n        lifecycle.beforeDestroy()\n        removeNode(el)\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        respond(query, el, ctx)\n        for (const view of views) {\n          view.request(query)\n        }\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { View } from 'tempo-core/lib/view'\nimport { DOMContext } from '../context'\nimport { removeNode } from './dom'\nimport { map as mapArray } from 'tempo-std/lib/arrays'\nimport { Attribute, resolveAttribute } from '../value'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n// import { strictEqual } from 'tempo-std/lib/equals'\n\nexport class MapStateTemplate<OuterState, InnerState, Action, Query>\n  implements DOMTemplate<OuterState, Action, Query> {\n  readonly children: DOMTemplate<InnerState, Action, Query>[]\n  constructor(\n    readonly map: Attribute<OuterState, InnerState>,\n    readonly orElse: DOMTemplate<OuterState, Action, Query>,\n    readonly equals: undefined | ((a: InnerState, b: InnerState) => boolean),\n    children: (\n      | DOMChild<InnerState, Action, Query>\n      | IBuilder<InnerState, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: OuterState): View<OuterState, Query> {\n    const { children, map, orElse } = this\n    // const equals = this.equals ?? strictEqual\n\n    let views: View<InnerState | OuterState, Query>[] = []\n\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n\n    let current: InnerState | undefined = undefined\n    const next = resolveAttribute(map)(state)\n\n    if (next === undefined) {\n      views = [orElse.render(newCtx, state)]\n    } else {\n      current = next\n      views = mapArray(children, c => c.render(newCtx, next))\n    }\n\n    function destroy() {\n      for (const view of views) view.destroy()\n    }\n\n    return {\n      change: (state: OuterState) => {\n        const next = resolveAttribute(map)(state)\n        if (next !== undefined) {\n          if (current === undefined) {\n            destroy()\n            current = next\n            views = mapArray(children, c => c.render(newCtx, next))\n          } else {\n            // if (!equals(current, next)) { // TODO remporarely removed\n            current = next\n            for (const view of views) view.change(next)\n          }\n        } else {\n          if (current !== undefined) {\n            current = undefined\n            destroy()\n            views = [orElse.render(newCtx, state)]\n          } else {\n            for (const view of views) view.change(state)\n          }\n        }\n      },\n      destroy: () => {\n        destroy()\n        removeNode(ref)\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { map } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class FragmentTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly children: DOMTemplate<State, Action, Query>[]\n  constructor(\n    children: (\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: State): View<State, Query> {\n    const views = map(this.children, child => child.render(ctx, state))\n    return {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { View } from 'tempo-core/lib/view'\nimport { DOMContext } from '../context'\nimport { map as mapArray } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class MapActionTemplate<State, OuterAction, InnerAction, Query>\n  implements DOMTemplate<State, OuterAction, Query> {\n  readonly children: DOMTemplate<State, InnerAction, Query>[]\n  constructor(\n    readonly map: (value: InnerAction) => OuterAction | undefined,\n    children: (\n      | DOMChild<State, InnerAction, Query>\n      | IBuilder<State, InnerAction, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<OuterAction>, state: State): View<State, Query> {\n    const { children, map } = this\n    const newCtx = ctx.conditionalMapAction(map)\n    const views = mapArray(children, c => c.render(newCtx, state))\n    return {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n  }\n}\n","import { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { View } from 'tempo-core/lib/view'\nimport { map as mapArray } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class MapQueryTemplate<State, Action, OuterQuery, InnerQuery>\n  implements DOMTemplate<State, Action, OuterQuery> {\n  readonly children: DOMTemplate<State, Action, InnerQuery>[]\n  constructor(\n    readonly map: (value: OuterQuery) => InnerQuery | undefined,\n    children: (\n      | DOMChild<State, Action, InnerQuery>\n      | IBuilder<State, Action, InnerQuery>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: State): View<State, OuterQuery> {\n    const { children, map } = this\n    const views = mapArray(children, c => c.render(ctx, state))\n    return {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: OuterQuery) => {\n        const innerQuery = map(query)\n        if (innerQuery !== undefined) {\n          views.forEach(view => view.request(innerQuery))\n        }\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { DOMContext } from '../context'\nimport { DOMTemplate, DOMChild } from '../template'\nimport { removeNode } from './dom'\nimport { map } from 'tempo-std/lib/arrays'\nimport { Attribute, resolveAttribute } from '../value'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class UntilTemplate<OuterState, InnerState, Action, Query>\n  implements DOMTemplate<OuterState, Action, Query> {\n  readonly children: DOMTemplate<InnerState, Action, Query>[]\n  constructor(\n    readonly next: Attribute<{ state: OuterState; index: number }, InnerState>,\n    children: (\n      | DOMChild<InnerState, Action, Query>\n      | IBuilder<InnerState, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: OuterState): View<OuterState, Query> {\n    const { children } = this\n    const next = this.next\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n    let childrenViews: View<InnerState, Query>[][] = []\n    // TODO, when next is a static literal it can be optimized to only render once\n    const view = {\n      change: (state: OuterState) => {\n        const currentLength = childrenViews.length\n        let index = 0\n        while (true) {\n          const value = resolveAttribute(next)({ state, index })\n          if (value === undefined) break\n          if (index < currentLength) {\n            // replace existing\n            const filteredViews = childrenViews[index]\n            for (const view of filteredViews) view.change(value!)\n          } else {\n            // add node\n            childrenViews.push(map(children, el => el.render(newCtx, value!)))\n          }\n          index++\n        }\n        let i = index\n        // remove extra nodes\n        while (i < currentLength) {\n          for (const c of childrenViews[i]) c.destroy()\n          i++\n        }\n        childrenViews = childrenViews.slice(0, index)\n      },\n      destroy: () => {\n        removeNode(ref)\n        for (const childViews of childrenViews)\n          for (const view of childViews) view.destroy()\n        childrenViews = []\n      },\n      request: (query: Query) => {\n        for (const childViews of childrenViews)\n          for (const view of childViews) view.request(query)\n      }\n    }\n    view.change(state)\n    return view\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { map } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport type SimpleComponent<State, Query> = DOMTemplate<State, State, Query>\n\nexport class SimpleComponentTemplate<State, Query>\n  implements SimpleComponent<State, Query> {\n  readonly children: DOMTemplate<State, State, Query>[]\n  constructor(\n    readonly delayed: boolean,\n    children: (DOMChild<State, State, Query> | IBuilder<State, State, Query>)[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<State>, state: State) {\n    let update: (state: State) => void\n    if (this.delayed) {\n      let shouldRender = true\n      update = (state: State) => {\n        if (shouldRender) {\n          shouldRender = false\n          setTimeout(() => {\n            view.change(state)\n            shouldRender = true\n          })\n        }\n      }\n    } else {\n      update = (state: State) => {\n        view.change(state)\n      }\n    }\n\n    const newCtx = ctx.withInterceptDispatch(update)\n    const views = map(this.children, child => child.render(newCtx, state))\n\n    const view = {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n    return view\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { map } from 'tempo-std/lib/arrays'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class PortalTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly children: DOMTemplate<State, Action, Query>[]\n  constructor(\n    readonly append: (doc: Document, node: Node) => void,\n    children: (\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n    )[]\n  ) {\n    this.children = children.map(childOrBuilderToTemplate)\n  }\n\n  render(ctx: DOMContext<Action>, state: State) {\n    const append = (node: Node) => this.append(ctx.doc, node)\n    const newCtx = ctx.withAppend(append)\n    const views = map(this.children, child => child.render(newCtx, state))\n    return {\n      change: (state: State) => {\n        for (const view of views) view.change(state)\n      },\n      destroy: () => {\n        for (const view of views) view.destroy()\n      },\n      request: (query: Query) => {\n        for (const view of views) view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { DOMContext } from '../context'\nimport { DOMTemplate } from '../template'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class LazyTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  constructor(\n    readonly f: () =>\n      | DOMTemplate<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  ) {}\n\n  private template: DOMTemplate<State, Action, Query> | undefined\n  render(ctx: DOMContext<Action>, state: State): View<State, Query> {\n    if (this.template === undefined) {\n      this.template = childOrBuilderToTemplate(this.f())\n    }\n    return this.template.render(ctx, state)\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { removeNode } from './dom'\nimport { Attribute, resolveAttribute } from '../value'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\n\nexport class MatchBoolTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly trueTemplate: DOMTemplate<State, Action, Query>\n  readonly falseTemplate: DOMTemplate<State, Action, Query>\n  constructor(\n    readonly condition: Attribute<State, boolean>,\n    trueTemplate:\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>,\n    falseTemplate:\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  ) {\n    this.trueTemplate = childOrBuilderToTemplate(trueTemplate)\n    this.falseTemplate = childOrBuilderToTemplate(falseTemplate)\n  }\n  render(ctx: DOMContext<Action>, state: State) {\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n    const { trueTemplate, falseTemplate } = this\n    const condition = resolveAttribute(this.condition)\n    let lastEvaluation = condition(state)\n    let view = lastEvaluation\n      ? trueTemplate.render(newCtx, state)\n      : falseTemplate.render(newCtx, state)\n    return {\n      change: (state: State) => {\n        const newEvaluation = condition(state)\n        if (newEvaluation === lastEvaluation) {\n          view.change(state)\n        } else {\n          view.destroy()\n          lastEvaluation = newEvaluation\n          view = newEvaluation\n            ? trueTemplate.render(newCtx, state)\n            : falseTemplate.render(newCtx, state)\n        }\n      },\n      destroy: () => {\n        removeNode(ref)\n        view.destroy()\n      },\n      request: (query: Query) => {\n        view.request(query)\n      }\n    }\n  }\n}\n","export * from './impl/html'\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate } from '../template'\nimport { DOMContext } from '../context'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\nimport { MapState } from '../html'\n\nexport type ReleaseF<\n  StateA,\n  StateB,\n  StateC,\n  Action,\n  Query,\n  Builder extends IBuilder<StateC, Action, Query>\n> = (\n  merge: (a: StateA, b: StateB) => StateC,\n  init: (builder: Builder) => void\n) => DOMTemplate<StateB, Action, Query> | IBuilder<StateB, Action, Query>\nexport type HoldF<\n  StateA,\n  StateB,\n  StateC,\n  Action,\n  Query,\n  Builder extends IBuilder<StateC, Action, Query>\n> = (\n  releasef: ReleaseF<StateA, StateB, StateC, Action, Query, Builder>\n) => DOMTemplate<StateA, Action, Query> | IBuilder<StateA, Action, Query>\n\nexport class HoldStateTemplate<\n  StateA,\n  StateB,\n  StateC,\n  Action,\n  Query,\n  Builder extends IBuilder<StateC, Action, Query>\n> implements DOMTemplate<StateA, Action, Query> {\n  private template!: DOMTemplate<StateA, Action, Query>\n  constructor(\n    readonly holdf: HoldF<StateA, StateB, StateC, Action, Query, Builder>,\n    readonly builder: Builder\n  ) {}\n  render(ctx: DOMContext<Action>, state: StateA) {\n    let localState = state\n    if (this.template === undefined) {\n      this.template = childOrBuilderToTemplate(\n        this.holdf((merge, init) => {\n          init(this.builder)\n          return MapState<StateB, StateC, Action, Query>(\n            (b: StateB) => merge(localState, b),\n            $ => $.Append(this.builder)\n          )\n        })\n      )\n    }\n\n    const view = this.template.render(ctx, localState)\n    return {\n      change(state: StateA) {\n        localState = state\n        view.change(localState)\n      },\n      request(query: Query) {\n        view.request(query)\n      },\n      destroy() {\n        view.destroy\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View } from 'tempo-core/lib/view'\nimport { ComponentTemplate } from './component'\nimport { DOMTemplate } from '../template'\nimport { DOMContext } from '../context'\nimport { Attribute, resolveAttribute } from '../value'\n\nexport class AdapterTemplate<\n  OuterState,\n  InnerState,\n  OuterAction,\n  InnerAction,\n  Query\n> implements DOMTemplate<OuterState, OuterAction, Query> {\n  constructor(\n    readonly bootstrapState: (outer: OuterState) => InnerState,\n    readonly mergeStates: Attribute<\n      { outerState: OuterState; innerState: InnerState },\n      InnerState\n    >,\n    readonly propagate: (\n      args: PropagateArg<OuterState, InnerState, OuterAction, InnerAction>\n    ) => void,\n    readonly child: ComponentTemplate<InnerState, InnerAction, Query>\n  ) {}\n\n  render(\n    ctx: DOMContext<OuterAction>,\n    outerState: OuterState\n  ): View<OuterState, Query> {\n    let innerState = this.bootstrapState(outerState)\n    innerState =\n      resolveAttribute(this.mergeStates)({\n        outerState,\n        innerState\n      }) ?? innerState\n\n    const newCtx = ctx.withDispatch((action: InnerAction) =>\n      dispatchPropagate(viewComponent.state, action)\n    )\n\n    const viewComponent = this.child.render(newCtx, innerState)\n\n    const dispatchPropagate = (innerState: InnerState, action: InnerAction) => {\n      this.propagate({\n        action,\n        innerState,\n        outerState,\n        dispatchInner: (action: InnerAction) => viewComponent.dispatch(action),\n        dispatchOuter: (action: OuterAction) => ctx.dispatch(action)\n      })\n    }\n\n    return {\n      change: (outerState: OuterState) => {\n        const newState = resolveAttribute(this.mergeStates)({\n          outerState,\n          innerState: viewComponent.state\n        })\n        if (newState !== undefined) {\n          viewComponent.change(newState)\n        }\n      },\n      destroy: () => {\n        viewComponent.destroy()\n      },\n      request: (query: Query) => {\n        viewComponent.request(query)\n      }\n    }\n  }\n}\n\nexport interface PropagateArg<\n  OuterState,\n  InnerState,\n  OuterAction,\n  InnerAction\n> {\n  action: InnerAction\n  innerState: InnerState\n  outerState: OuterState\n  dispatchInner: (action: InnerAction) => void\n  dispatchOuter: (action: OuterAction) => void\n}\n","import { HoldF, HoldStateTemplate } from './hold_state'\nimport {\n  DOMBuilder,\n  IBuilder,\n  extractLiterals,\n  extractDerived,\n  booleanToString,\n  ListOrRecordValue,\n  listOrRecordToSpaceSeparated,\n  stylesToString,\n  numbersListToString,\n  numberPairsListToString\n} from './dom_builder'\nimport { DerivedOrLiteralValue, DerivedValue } from 'tempo-core/lib/value'\nimport {\n  Attribute,\n  resolveAttribute,\n  mapAttribute,\n  EventHandler,\n  EventHandlerTE\n} from '../value'\nimport { DOMContext } from '../context'\nimport { MakeLifecycle, makeEmptyLifecycle } from '../lifecycle'\nimport { makeCreateElementNS } from './dom'\nimport { keys } from 'tempo-std/lib/objects'\nimport { DOMElement } from './element'\nimport { FragmentTemplate as FragmentSVGTemplate } from './fragment'\nimport { PropagateArg, AdapterTemplate } from './adapter'\nimport { ComponentTemplate } from './component'\nimport { MapActionTemplate } from './map_action'\nimport { MapQueryTemplate } from './map_query'\nimport { DOMChild, DOMTemplate } from '../template'\nimport { MapStateTemplate } from './map_state'\nimport { PortalTemplate } from './portal'\nimport { SimpleComponentTemplate } from './simple_component'\nimport { UntilTemplate } from './until'\nimport { MatchBoolTemplate } from './match_bool_template'\nimport { LazyTemplate } from './lazy'\nimport { text } from './text'\n\nexport const SVG_NS = 'http://www.w3.org/2000/svg'\n\nexport class BaseSVGBuilder<State, Action, Query> extends DOMBuilder<\n  State,\n  Action,\n  Query\n> {\n  SvgEl(\n    init: (\n      builder: SVGElementBuilder<State, Action, Query, SVGElement>\n    ) => void = () => {}\n  ): this {\n    const builder = svgEl<State, Action, Query>(name)\n    init(builder)\n    this._children.push(builder.build())\n    return this\n  }\n\n  // transform\n  Adapter<StateB, ActionB>(props: {\n    bootstrapState: (outer: State) => StateB\n    mergeStates?: Attribute<\n      {\n        outerState: State\n        innerState: StateB\n      },\n      StateB\n    >\n    propagate?: (args: PropagateArg<State, StateB, Action, ActionB>) => void\n    child: ComponentTemplate<StateB, ActionB, Query>\n  }) {\n    return this.Append(\n      new AdapterTemplate(\n        props.bootstrapState,\n        props.mergeStates,\n        props.propagate || (() => undefined),\n        props.child\n      )\n    )\n  }\n\n  Component(\n    reducer: (state: State, action: Action) => State,\n    init: (builder: ComponentSVGBuilder<State, Action, Query>) => void\n  ) {\n    const builder = new ComponentSVGBuilder<State, Action, Query>(reducer)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  LocalAdapter(props: {\n    propagate?: (args: PropagateArg<State, State, Action, Action>) => void\n    child: ComponentTemplate<State, Action, Query>\n  }) {\n    return this.Append(\n      new AdapterTemplate(\n        state => state,\n        ({ outerState }) => outerState,\n        props.propagate || (() => undefined),\n        props.child\n      )\n    )\n  }\n\n  HoldState<StateB, StateC>(\n    holdf: HoldF<\n      State,\n      StateB,\n      StateC,\n      Action,\n      Query,\n      FragmentSVGBuilder<StateC, Action, Query>\n    >\n  ): this {\n    return this.Append(\n      new HoldStateTemplate(\n        holdf,\n        new FragmentSVGBuilder<StateC, Action, Query>()\n      )\n    )\n  }\n\n  MapState<StateB>(\n    map: (state: State) => StateB | undefined,\n    init: (builder: MapStateSVGBuilder<State, StateB, Action, Query>) => void\n  ) {\n    const builder = new MapStateSVGBuilder<State, StateB, Action, Query>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapField<Key extends keyof State>(\n    field: Key,\n    init: (\n      builder: MapStateSVGBuilder<State, State[Key], Action, Query>\n    ) => void\n  ) {\n    return this.MapState<State[Key]>((v: State): State[Key] => v[field], init)\n  }\n\n  MapStateAndKeep<StateB>(\n    map: (state: State) => StateB | undefined,\n    init: (\n      builder: MapStateSVGBuilder<State, [StateB, State], Action, Query>\n    ) => void\n  ) {\n    const builder = new MapStateSVGBuilder<\n      State,\n      [StateB, State],\n      Action,\n      Query\n    >((state: State) => {\n      const inner = resolveAttribute(map)(state)\n      if (inner !== undefined) {\n        return [inner, state]\n      } else {\n        return undefined\n      }\n    })\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapAction<ActionB>(\n    map: DerivedValue<ActionB, Action>,\n    init: (builder: MapActionSVGBuilder<State, Action, ActionB, Query>) => void\n  ) {\n    const builder = new MapActionSVGBuilder<State, Action, ActionB, Query>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapQuery<QueryB>(\n    map: DerivedValue<Query, QueryB>,\n    init: (builder: MapQuerySVGBuilder<State, Action, Query, QueryB>) => void\n  ) {\n    const builder = new MapQuerySVGBuilder<State, Action, Query, QueryB>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MatchBool(props: {\n    condition: Attribute<State, boolean>\n    true: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n    false: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  }): this {\n    return this.Append(\n      new MatchBoolTemplate<State, Action, Query>(\n        props.condition,\n        props.true,\n        props.false\n      )\n    )\n  }\n\n  Lazy(\n    lazyf: () =>\n      | DOMTemplate<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  ) {\n    return this.Append(new LazyTemplate(lazyf))\n  }\n\n  ForEach(\n    init: (\n      builder: UntilSVGBuilder<\n        State,\n        State extends any[] ? State[number] : never,\n        Action,\n        Query\n      >\n    ) => void\n  ): this {\n    return this.Until(\n      ({\n        state,\n        index\n      }: {\n        state: State\n        index: number\n      }): State extends any[] ? State[number] : never => (state as any)[index],\n      init\n    )\n  }\n\n  Fragment(init: (builder: FragmentSVGBuilder<State, Action, Query>) => void) {\n    const builder = new FragmentSVGBuilder<State, Action, Query>()\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  Iterate<Items extends any[]>(\n    map: DerivedValue<State, Items>,\n    init: (\n      builder: UntilSVGBuilder<\n        [Items, State],\n        [Items[number], State, number],\n        Action,\n        Query\n      >\n    ) => void\n  ) {\n    return this.MapState<[Items, State]>(\n      (outer: State): [Items, State] | undefined => {\n        const items = resolveAttribute(map)(outer)\n        return items !== undefined ? [items, outer] : undefined\n      },\n      $ => {\n        $.Until<[Items[number], State, number]>(\n          ({ state: [items, state], index }) =>\n            items[index] && [items[index], state, index],\n          init\n        )\n      }\n    )\n  }\n\n  Portal(\n    appendChild: (doc: Document, node: Node) => void,\n    init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new PortalSVGBuilder<State, Action, Query>(appendChild)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  PortalWithSelector(\n    selector: string,\n    init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => {\n      const el = doc.querySelector(selector)\n      if (!el) {\n        throw new Error(`selector doesn't match any element: \"${selector}\"`)\n      }\n      el.appendChild(node)\n    }, init)\n  }\n\n  HeadPortal(\n    init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => doc.head.appendChild(node), init)\n  }\n\n  BodyPortal(\n    init: (builder: PortalSVGBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => doc.body.appendChild(node), init)\n  }\n\n  // SimpleComponent(\n  //   init: (builder: SimpleComponentBuilder<State, Query>) => void\n  // ) {\n  //   const builder = new SimpleComponentBuilder<State, Query>()\n  //   init(builder)\n  //   return this.append(builder.build())\n  // }\n\n  Unless(\n    condition: DerivedValue<State, boolean>,\n    init: (builder: MapStateSVGBuilder<State, State, Action, Query>) => void\n  ) {\n    return this.When(s => !condition(s), init)\n  }\n\n  Until<StateB>(\n    next: DerivedValue<{ state: State; index: number }, StateB>,\n    init: (builder: UntilSVGBuilder<State, StateB, Action, Query>) => void\n  ) {\n    const builder = new UntilSVGBuilder<State, StateB, Action, Query>(next)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  When(\n    condition: DerivedValue<State, boolean>,\n    init: (builder: MapStateSVGBuilder<State, State, Action, Query>) => void\n  ) {\n    const builder = new MapStateSVGBuilder<State, State, Action, Query>(s => {\n      if (condition(s)) {\n        return s\n      } else {\n        return undefined\n      }\n    })\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  // derived children\n  A(\n    init?: (builder: SVGAnchorElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGAnchorElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  CIRCLE(\n    init?: (builder: SVGCircleElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGCircleElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  CLIP_PATH(\n    init?: (\n      builder: SVGElementBuilder<State, Action, Query, SVGClipPathElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGElementBuilder<State, Action, Query, SVGClipPathElement>(\n        'clipPath'\n      ),\n      init,\n      this\n    )\n  }\n  DEFS(\n    init?: (\n      builder: SVGElementBuilder<State, Action, Query, SVGDefsElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGElementBuilder<State, Action, Query, SVGDefsElement>('defs'),\n      init,\n      this\n    )\n  }\n  DESC(\n    init?: (\n      builder: SVGElementBuilder<State, Action, Query, SVGDescElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGElementBuilder<State, Action, Query, SVGDescElement>('desc'),\n      init,\n      this\n    )\n  }\n  ELLIPSE(\n    init?: (builder: SVGEllipseElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGEllipseElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_BLEND(\n    init?: (builder: SVGFEBlendElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEBlendElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_COLOR_MATRIX(\n    init?: (\n      builder: SVGFEColorMatrixElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEColorMatrixElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_COMPONENT_TRANSFER(\n    init?: (\n      builder: SVGFEComponentTransferElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEComponentTransferElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_COMPOSITE(\n    init?: (builder: SVGFeCompositeElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFeCompositeElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_CONVOLVE_MATRIX(\n    init?: (\n      builder: SVGFEConvolveMatrixElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEConvolveMatrixElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_DIFFUSE_LIGHTING(\n    init?: (\n      builder: SVGFEDiffuseLightingElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEDiffuseLightingElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_DISPLACEMENT_MAP(\n    init?: (\n      builder: SVGFEDisplacementMapElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEDisplacementMapElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_DISTANT_LIGHT(\n    init?: (\n      builder: SVGFEDistantLightElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEDistantLightElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FLOOD(\n    init?: (builder: SVGFEFloodElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFloodElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FUNC_A(\n    init?: (builder: SVGFEFuncAElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFuncAElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FUNC_B(\n    init?: (builder: SVGFEFuncBElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFuncBElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FUNC_G(\n    init?: (builder: SVGFEFuncGElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFuncGElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_FUNC_R(\n    init?: (builder: SVGFEFuncRElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEFuncRElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_GAUSSIAN_BLUR(\n    init?: (\n      builder: SVGFEGaussianBlurElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEGaussianBlurElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_IMAGE(\n    init?: (builder: SVGFEImageElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEImageElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_MERGE(\n    init?: (builder: SVGFEMergeElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEMergeElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_MERGE_NODE(\n    init?: (builder: SVGFEMergeNodeElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEMergeNodeElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_MORPHOLOGY(\n    init?: (\n      builder: SVGFEMorphologyElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEMorphologyElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_OFFSET(\n    init?: (builder: SVGFEOffsetElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFEOffsetElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_POINT_LIGHT(\n    init?: (\n      builder: SVGFEPointLightElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFEPointLightElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_SPECULAR_LIGHTING(\n    init?: (\n      builder: SVGFESpecularLightingElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFESpecularLightingElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_SPOTLIGHT(\n    init?: (builder: SVGFESpotLightElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFESpotLightElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_TILE(\n    init?: (builder: SVGFETileElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFETileElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FE_TURBULENCE(\n    init?: (\n      builder: SVGFETurbulenceElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGFETurbulenceElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FILTER(\n    init?: (builder: SVGFilterElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGFilterElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  FOREIGN_OBJECT(\n    init?: (\n      builder: SVGForeignObjectElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGForeignObjectElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  G(init?: (builder: SVGGElementBuilder<State, Action, Query>) => void): this {\n    return initBuilder(\n      new SVGGElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  IMAGE(\n    init?: (builder: SVGImageElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGImageElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  LINE(\n    init?: (builder: SVGLineElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGLineElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  LINEAR_GRADIENT(\n    init?: (\n      builder: SVGLinearGradientElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGLinearGradientElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  MARKER(\n    init?: (builder: SVGMarkerElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGMarkerElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  MASK(\n    init?: (builder: SVGMaskElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGMaskElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  METADATA(\n    init?: (builder: SVGMetadataElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGMetadataElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  PATH(\n    init?: (builder: SVGPathElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGPathElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  PATTERN(\n    init?: (builder: SVGPatternElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGPatternElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  POLYGON(\n    init?: (builder: SVGPolygonElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGPolygonElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  POLYLINE(\n    init?: (builder: SVGPolylineElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGPolylineElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  RADIALGRADIENT(\n    init?: (\n      builder: SVGRadialGradientElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new SVGRadialGradientElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  RECT(\n    init?: (builder: SVGRectElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGRectElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  SCRIPT(\n    init?: (builder: SVGScriptElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGScriptElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  STOP(\n    init?: (builder: SVGStopElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGStopElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  STYLE(\n    init?: (builder: SVGStyleElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGStyleElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  SVG(\n    init?: (builder: SVGSVGElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGSVGElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  SWITCH(\n    init?: (builder: SVGSwitchElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGSwitchElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  SYMBOL(\n    init?: (builder: SVGSymbolElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGSymbolElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TEXT(\n    init?: (builder: SVGTextElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGTextElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TEXT_PATH(\n    init?: (builder: SVGTextPathElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGTextPathElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TITLE(\n    init?: (builder: SVGTitleElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGTitleElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TSPAN(\n    init?: (builder: SVGTSpanElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGTSpanElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  USE(\n    init?: (builder: SVGUseElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGUseElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  VIEW(\n    init?: (builder: SVGViewElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGViewElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n}\n\n// dom generic\nexport function svgEl<State, Action, Query, El extends SVGElement = SVGElement>(\n  tagName: string\n) {\n  return new SVGElementBuilder<State, Action, Query, El>(tagName)\n}\n\nexport class SVGElementBuilder<State, Action, Query, El extends SVGElement>\n  extends BaseSVGBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _attributes: Record<string, DerivedOrLiteralValue<State, string>> = {}\n  private _styles: Record<string, DerivedOrLiteralValue<State, string>> = {}\n  private _handlers: Record<string, EventHandler<State, Action>> = {}\n  private _lifecycle: MakeLifecycle<State, Action> | undefined\n  private _respond:\n    | ((query: Query, el: El, ctx: DOMContext<Action>) => void)\n    | undefined\n\n  constructor(public tagName: string) {\n    super()\n  }\n\n  build(): DOMElement<State, Action, Query> {\n    return new DOMElement<State, Action, Query>(\n      makeCreateElementNS(SVG_NS, this.tagName),\n      extractLiterals(this._attributes),\n      extractDerived(this._attributes),\n      extractLiterals(this._styles),\n      extractDerived(this._styles),\n      keys(this._handlers).map(name => ({\n        name,\n        callback: this._handlers[name]\n      })),\n      this._lifecycle ?? makeEmptyLifecycle,\n      (this._respond as (\n        query: Query,\n        el: any,\n        ctx: DOMContext<Action>\n      ) => {}) ?? ((query: Query, el: any, ctx: DOMContext<Action>) => {}), // TODO better typing required\n      this._children\n    )\n  }\n\n  // attributes, styles and handlers\n  attr(name: string, value: Attribute<State, string>): this {\n    if (value != null) {\n      this._attributes[name] = value as DerivedOrLiteralValue<State, string>\n    }\n    return this\n  }\n  style(name: string, value: Attribute<State, string>): this {\n    if (value != null) {\n      this._styles[name] = value as DerivedOrLiteralValue<State, string>\n    }\n    return this\n  }\n  handle(name: string, callback: EventHandler<State, Action> | undefined) {\n    if (callback != null) {\n      this._handlers[name] = callback\n    }\n    return this\n  }\n  Lifecycle(makeLifecycle: MakeLifecycle<State, Action>): this {\n    this._lifecycle = makeLifecycle\n    return this\n  }\n  Respond(\n    response: (query: Query, el: El, ctx: DOMContext<Action>) => void\n  ): this {\n    this._respond = response\n    return this\n  }\n\n  // attribute shortcuts\n  aria(name: string, value: Attribute<State, string>) {\n    return this.attr(`aria-${name}`, value)\n  }\n  class(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('class', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  data(name: string, value: Attribute<State, string>) {\n    return this.attr(`data-${name}`, value)\n  }\n  id(value: Attribute<State, string>) {\n    return this.attr('id', value)\n  }\n  lang(value: Attribute<State, string>) {\n    return this.attr('lang', value)\n  }\n  styles(value: Attribute<State, string | Record<string, string>>) {\n    return this.attr('style', mapAttribute(value, stylesToString))\n  }\n  systemLanguage(value: Attribute<State, string>) {\n    return this.attr('systemLanguage', value)\n  }\n  tabIndex(value: Attribute<State, number>) {\n    return this.attr('tabindex', mapAttribute(value, String))\n  }\n\n  // presentation attributes // TODO\n  // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/clip-path\n  alignmentBaseline(\n    value: Attribute<\n      State,\n      | 'baseline'\n      | 'text-before-edge'\n      | 'middle'\n      | 'central'\n      | 'text-after-edge'\n      | 'ideographic'\n      | 'alphabetic'\n      | 'hanging'\n      | 'mathematical'\n      | 'top'\n      | 'center'\n      | 'bottom'\n    >\n  ) {\n    return this.attr('alignment-baseline', value)\n  }\n  baselineShift(value: Attribute<State, string>) {\n    return this.attr('baseline-shift', value)\n  }\n  clipPath(value: Attribute<State, string>) {\n    return this.attr('clip-path', value)\n  }\n  clipRule(value: Attribute<State, 'nonzero' | 'evenodd'>) {\n    return this.attr('clip-rule', value)\n  }\n  color(value: Attribute<State, string>) {\n    return this.attr('color', value)\n  }\n  colorInterpolation(value: Attribute<State, 'auto' | 'sRGB' | 'linearRGB'>) {\n    return this.attr('color-interpolation', value)\n  }\n  colorInterpolationFilters(\n    value: Attribute<State, 'auto' | 'sRGB' | 'linearRGB'>\n  ) {\n    return this.attr('color-interpolation-filters', value)\n  }\n  cursor(value: Attribute<State, string>) {\n    return this.attr('cursor', value)\n  }\n  direction(value: Attribute<State, 'ltr' | 'rtl'>) {\n    return this.attr('direction', value)\n  }\n  display(value: Attribute<State, string>) {\n    return this.attr('display', value)\n  }\n  dominantBaseline(\n    value: Attribute<\n      State,\n      | 'auto'\n      | 'text-bottom'\n      | 'alphabetic'\n      | 'ideographic'\n      | 'middle'\n      | 'central'\n      | 'mathematical'\n      | 'hanging'\n      | 'text-top'\n    >\n  ) {\n    return this.attr('dominant-baseline', value)\n  }\n\n  fill(value: Attribute<State, string>) {\n    return this.attr('fill', value)\n  }\n  fillOpacity(value: Attribute<State, number | string>): this {\n    return this.attr('fill-opacity', mapAttribute(value, String))\n  }\n  fillRule(value: Attribute<State, 'nonzero' | 'evenodd'>): this {\n    return this.attr('fill-rule', value)\n  }\n  filter(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr(\n      'filter',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  floodColor(value: Attribute<State, string>) {\n    return this.attr('flood-color', value)\n  }\n  floodOpacity(value: Attribute<State, number | string>): this {\n    return this.attr('flood-opacity', mapAttribute(value, String))\n  }\n  fontFamily(value: Attribute<State, string>) {\n    return this.attr('font-family', value)\n  }\n  fontSize(value: Attribute<State, number | string>): this {\n    return this.attr('font-size', mapAttribute(value, String))\n  }\n  fontSizeAdjust(value: Attribute<State, number | string>): this {\n    return this.attr('font-size-adjust', mapAttribute(value, String))\n  }\n  fontStretch(value: Attribute<State, string>) {\n    return this.attr('font-stretch', value)\n  }\n  fontStyle(value: Attribute<State, 'normal' | 'italic' | 'oblique'>) {\n    return this.attr('font-style', value)\n  }\n  fontVariant(value: Attribute<State, string>) {\n    return this.attr('font-variant', value)\n  }\n  fontWeight(\n    value: Attribute<State, number | 'normal' | 'bold' | 'bolder' | 'lighter'>\n  ) {\n    return this.attr('font-weight', mapAttribute(value, String))\n  }\n  imageRendering(\n    value: Attribute<State, 'auto' | 'optimizeSpeed' | 'optimizeQuality'>\n  ) {\n    return this.attr('image-rendering', value)\n  }\n  letterSpacing(value: Attribute<State, number | string>): this {\n    return this.attr('letter-spacing', mapAttribute(value, String))\n  }\n  lightingColor(value: Attribute<State, string>) {\n    return this.attr('lighting-color', value)\n  }\n  markerEnd(value: Attribute<State, string>) {\n    return this.attr('marker-end', value)\n  }\n  markerMid(value: Attribute<State, string>) {\n    return this.attr('marker-mid', value)\n  }\n  markerStart(value: Attribute<State, string>) {\n    return this.attr('marker-start', value)\n  }\n  mask(value: Attribute<State, string>) {\n    return this.attr('mask', value)\n  }\n  opacity(value: Attribute<State, number>) {\n    return this.attr('opacity', mapAttribute(value, String))\n  }\n  overflow(value: Attribute<State, 'visible' | 'hidden' | 'scroll' | 'auto'>) {\n    return this.attr('overflow', value)\n  }\n  pointerEvents(\n    value: Attribute<\n      State,\n      | 'bounding-box'\n      | 'visiblePainted'\n      | 'visibleFill'\n      | 'visibleStroke'\n      | 'visible'\n      | 'painted'\n      | 'fill'\n      | 'stroke'\n      | 'all'\n      | 'none'\n    >\n  ) {\n    return this.attr('pointer-events', value)\n  }\n  shapeRendering(\n    value: Attribute<\n      State,\n      'auto' | 'optimizeSpeed' | 'crispEdges' | 'geometricPrecision'\n    >\n  ) {\n    return this.attr('shape-rendering', value)\n  }\n  stopColor(value: Attribute<State, string>) {\n    return this.attr('stop-color', value)\n  }\n  stopOpacity(value: Attribute<State, number | string>) {\n    return this.attr('stop-opacity', mapAttribute(value, String))\n  }\n  stroke(value: Attribute<State, string>) {\n    return this.attr('stroke', value)\n  }\n  strokeDashArray(value: Attribute<State, string>) {\n    return this.attr('stroke-dasharray', value)\n  }\n  strokeDashoffset(value: Attribute<State, number | string>) {\n    return this.attr('stroke-dashoffset', mapAttribute(value, String))\n  }\n  strokeLineCap(value: Attribute<State, 'butt' | 'round' | 'square'>) {\n    return this.attr('stroke-linecap', value)\n  }\n  strokeLineJoin(\n    value: Attribute<State, 'arcs' | 'bevel |miter' | 'miter-clip' | 'round'>\n  ) {\n    return this.attr('stroke-linejoin', value)\n  }\n  strokeMiterLimit(value: Attribute<State, number>) {\n    return this.attr('stroke-miterlimit', mapAttribute(value, String))\n  }\n  strokeOpacity(value: Attribute<State, number | string>): this {\n    return this.attr('stroke-opacity', mapAttribute(value, String))\n  }\n  strokeWidth(value: Attribute<State, number | string>): this {\n    return this.attr('stroke-width', mapAttribute(value, String))\n  }\n  textAnchor(value: Attribute<State, 'start' | 'middle' | 'end'>) {\n    return this.attr('text-anchor', value)\n  }\n  textDecoration(value: Attribute<State, string>) {\n    return this.attr('text-decoration', value)\n  }\n  textRendering(\n    value: Attribute<\n      State,\n      'auto' | 'optimizeSpeed' | 'optimizeLegibility' | 'geometricPrecision'\n    >\n  ) {\n    return this.attr('text-rendering', value)\n  }\n  transform(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'transform',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  unicodeBidi(\n    value: Attribute<\n      State,\n      | 'normal'\n      | 'embed'\n      | 'isolate'\n      | 'bidi-override'\n      | 'isolate-override'\n      | 'plaintext'\n    >\n  ) {\n    return this.attr('unicode-bidi', value)\n  }\n  vectorEffect(\n    value: Attribute<\n      State,\n      | 'none'\n      | 'non-scaling-stroke'\n      | 'non-scaling-size'\n      | 'non-rotation'\n      | 'fixed-position'\n    >\n  ) {\n    return this.attr('vector-effect', value)\n  }\n  visibility(value: Attribute<State, 'visible' | 'hidden' | 'collapse'>) {\n    return this.attr('visibility', value)\n  }\n  wordSpacing(value: Attribute<State, number | string>) {\n    return this.attr('word-spacing', mapAttribute(value, String))\n  }\n  writingMode(\n    value: Attribute<State, 'horizontal-tb' | 'vertical-rl' | 'vertical-lr'>\n  ) {\n    return this.attr('writing-mode', value)\n  }\n\n  // aria\n  ariaActiveDescendant(value: Attribute<State, string>) {\n    return this.attr('aria-activedescendant', value)\n  }\n  ariaAtomic(value: Attribute<State, boolean>) {\n    return this.attr('aria-atomic', mapAttribute(value, booleanToString))\n  }\n  ariaAutocomplete(\n    value: Attribute<State, 'inline' | 'list' | 'both' | 'none'>\n  ) {\n    return this.attr('aria-autocomplete', value)\n  }\n  ariaBusy(value: Attribute<State, boolean>) {\n    return this.attr('aria-busy', mapAttribute(value, booleanToString))\n  }\n  ariaChecked(\n    value: Attribute<State, 'true' | 'false' | 'mixed' | true | false>\n  ) {\n    return this.attr(\n      'aria-checked',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaColCount(value: Attribute<State, number>) {\n    return this.attr('aria-colcount', mapAttribute(value, String))\n  }\n  ariaColIndex(value: Attribute<State, number>) {\n    return this.attr('aria-colindex', mapAttribute(value, String))\n  }\n  ariaColSpan(value: Attribute<State, number>) {\n    return this.attr('aria-colspan', mapAttribute(value, String))\n  }\n  ariaControls(value: Attribute<State, string>) {\n    return this.attr('aria-controls', value)\n  }\n  ariaCurrent(\n    value: Attribute<\n      State,\n      | 'page'\n      | 'step'\n      | 'location'\n      | 'date'\n      | 'time'\n      | 'true'\n      | 'false'\n      | true\n      | false\n    >\n  ) {\n    return this.attr(\n      'aria-current',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaDescribedBy(value: Attribute<State, string>) {\n    return this.attr('aria-describedby', value)\n  }\n  ariaDetails(value: Attribute<State, string>) {\n    return this.attr('aria-details', value)\n  }\n  ariaDisabled(value: Attribute<State, boolean>) {\n    return this.attr('aria-disabled', mapAttribute(value, booleanToString))\n  }\n  ariaDropEffect(\n    value: Attribute<\n      State,\n      'copy' | 'execute' | 'link' | 'move' | 'none' | 'popup'\n    >\n  ) {\n    return this.attr('aria-dropeffect', value)\n  }\n  ariaErrorMessage(\n    value: Attribute<\n      State,\n      'grammar' | 'false' | false | 'spelling' | 'true' | true\n    >\n  ) {\n    return this.attr(\n      'aria-errormessage',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaExpanded(value: Attribute<State, boolean>) {\n    return this.attr('aria-expanded', mapAttribute(value, booleanToString))\n  }\n  ariaFlowTo(value: Attribute<State, string>) {\n    return this.attr('aria-flowto', value)\n  }\n  ariaGrabbed(value: Attribute<State, boolean>) {\n    return this.attr('aria-grabbed', mapAttribute(value, booleanToString))\n  }\n  ariaHasPopup(\n    value: Attribute<\n      State,\n      | 'true'\n      | 'false'\n      | 'menu'\n      | 'listbox'\n      | 'tree'\n      | 'grid'\n      | 'dialog'\n      | true\n      | false\n    >\n  ) {\n    return this.attr(\n      'aria-haspopup',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaHidden(value: Attribute<State, boolean>) {\n    return this.attr('aria-hidden', mapAttribute(value, booleanToString))\n  }\n  ariaInvalid(value: Attribute<State, string>) {\n    return this.attr('aria-invalid', value)\n  }\n  ariaKeyShortcuts(value: Attribute<State, string>) {\n    return this.attr('aria-keyshortcuts', value)\n  }\n  ariaLabel(value: Attribute<State, string>) {\n    return this.attr('aria-label', value)\n  }\n  ariaLabelledBy(value: Attribute<State, string>) {\n    return this.attr('aria-labelledby', value)\n  }\n  ariaLevel(value: Attribute<State, number>) {\n    return this.attr('aria-level', mapAttribute(value, String))\n  }\n  ariaLive(value: Attribute<State, 'assertive' | 'off' | 'polite'>) {\n    return this.attr('aria-live', value)\n  }\n  ariaModal(value: Attribute<State, boolean>) {\n    return this.attr('aria-modal', mapAttribute(value, booleanToString))\n  }\n  ariaMultiLine(value: Attribute<State, boolean>) {\n    return this.attr('aria-multiline', mapAttribute(value, booleanToString))\n  }\n  ariaMultiSelectable(value: Attribute<State, boolean>) {\n    return this.attr(\n      'aria-multiselectable',\n      mapAttribute(value, booleanToString)\n    )\n  }\n  ariaOrientation(value: Attribute<State, 'horizontal' | 'vertical'>) {\n    return this.attr('aria-orientation', value)\n  }\n  ariaOwns(value: Attribute<State, string>) {\n    return this.attr('aria-owns', value)\n  }\n  ariaPlaceHolder(value: Attribute<State, string>) {\n    return this.attr('aria-placeholder', value)\n  }\n  ariaPointSet(value: Attribute<State, number>) {\n    return this.attr('aria-pointset', mapAttribute(value, String))\n  }\n  ariaPosInSet(value: Attribute<State, string>) {\n    return this.attr('aria-posinset', value)\n  }\n  ariaPressed(\n    value: Attribute<State, 'true' | 'false' | 'mixed' | true | false>\n  ) {\n    return this.attr(\n      'aria-pressed',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaReadonly(value: Attribute<State, boolean>) {\n    return this.attr('aria-readonly', mapAttribute(value, booleanToString))\n  }\n  ariaRequired(value: Attribute<State, boolean>) {\n    return this.attr('aria-required', mapAttribute(value, booleanToString))\n  }\n  ariaRelevant(\n    value: Attribute<\n      State,\n      'addition' | 'additions text' | 'all' | 'removals' | 'text'\n    >\n  ) {\n    return this.attr('aria-relevant', value)\n  }\n  ariaRoleDescription(value: Attribute<State, string>) {\n    return this.attr('aria-roledescription', value)\n  }\n  ariaRowCount(value: Attribute<State, number>) {\n    return this.attr('aria-rowcount', mapAttribute(value, String))\n  }\n  ariaRowIndex(value: Attribute<State, number>) {\n    return this.attr('aria-rowindex', mapAttribute(value, String))\n  }\n  ariaRowSpan(value: Attribute<State, number>) {\n    return this.attr('aria-rowspan', mapAttribute(value, String))\n  }\n  ariaSelected(value: Attribute<State, boolean>) {\n    return this.attr('aria-selected', mapAttribute(value, booleanToString))\n  }\n  ariaSetSize(value: Attribute<State, number>) {\n    return this.attr('aria-setsize', mapAttribute(value, String))\n  }\n  ariaSort(\n    value: Attribute<State, 'ascending' | 'descending' | 'none' | 'other'>\n  ) {\n    return this.attr('aria-sort', value)\n  }\n  ariaValueMax(value: Attribute<State, number>) {\n    return this.attr('aria-valuemax', mapAttribute(value, String))\n  }\n  ariaValueMin(value: Attribute<State, number>) {\n    return this.attr('aria-valuemin', mapAttribute(value, String))\n  }\n  ariaValueNow(value: Attribute<State, number>) {\n    return this.attr('aria-valuenow', mapAttribute(value, String))\n  }\n  ariaValueText(value: Attribute<State, string>) {\n    return this.attr('aria-valuetext', value)\n  }\n\n  // event shortcuts\n  onAbort(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('abort', handler as EventHandler<State, Action>)\n  }\n  onAutoComplete(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('autocomplete', handler as EventHandler<State, Action>)\n  }\n  onAutoCompleteError(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle(\n      'autocompleteerror',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onBlur(handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined) {\n    return this.handle('blur', handler as EventHandler<State, Action>)\n  }\n  onCancel(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('cancel', handler as EventHandler<State, Action>)\n  }\n  onChange(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('change', handler as EventHandler<State, Action>)\n  }\n  onClick(handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined) {\n    return this.handle('click', handler as EventHandler<State, Action>)\n  }\n  onCompositionEnd(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle('compositionend', handler as EventHandler<State, Action>)\n  }\n  onCompositionStart(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle(\n      'compositionstart',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onCompositionUpdate(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle(\n      'compositionupdate',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onContextMenu(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('contextmenu', handler as EventHandler<State, Action>)\n  }\n  onDblClick(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('dblclick', handler as EventHandler<State, Action>)\n  }\n  onDrag(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('drag', handler as EventHandler<State, Action>)\n  }\n  onDragEnd(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('dragend', handler as EventHandler<State, Action>)\n  }\n  onDragEnter(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragenter', handler as EventHandler<State, Action>)\n  }\n  onDragExit(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragexit', handler as EventHandler<State, Action>)\n  }\n  onDragLeave(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragleave', handler as EventHandler<State, Action>)\n  }\n  onDragOver(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragover', handler as EventHandler<State, Action>)\n  }\n  onDragStart(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragstart', handler as EventHandler<State, Action>)\n  }\n  onDrop(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('drop', handler as EventHandler<State, Action>)\n  }\n  onError(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('error', handler as EventHandler<State, Action>)\n  }\n  onFocus(handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined) {\n    return this.handle('focus', handler as EventHandler<State, Action>)\n  }\n  onFocusIn(\n    handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined\n  ) {\n    return this.handle('focusin', handler as EventHandler<State, Action>)\n  }\n  onFocusOut(\n    handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined\n  ) {\n    return this.handle('focusout', handler as EventHandler<State, Action>)\n  }\n  onInput(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('input', handler as EventHandler<State, Action>)\n  }\n  onInvalid(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('invalid', handler as EventHandler<State, Action>)\n  }\n  onKeyDown(\n    handler: EventHandlerTE<State, Action, KeyboardEvent, El> | undefined\n  ) {\n    return this.handle('keydown', handler as EventHandler<State, Action>)\n  }\n  onKeyUp(\n    handler: EventHandlerTE<State, Action, KeyboardEvent, El> | undefined\n  ) {\n    return this.handle('keyup', handler as EventHandler<State, Action>)\n  }\n  onLoad(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('load', handler as EventHandler<State, Action>)\n  }\n  onMouseDown(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mousedown', handler as EventHandler<State, Action>)\n  }\n  onMouseEnter(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseenter', handler as EventHandler<State, Action>)\n  }\n  onMouseLeave(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseleave', handler as EventHandler<State, Action>)\n  }\n  onMouseMove(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mousemove', handler as EventHandler<State, Action>)\n  }\n  onMouseOut(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseout', handler as EventHandler<State, Action>)\n  }\n  onMouseOver(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseover', handler as EventHandler<State, Action>)\n  }\n  onMouseUp(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseup', handler as EventHandler<State, Action>)\n  }\n  onReset(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('reset', handler as EventHandler<State, Action>)\n  }\n  onScroll(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('scroll', handler as EventHandler<State, Action>)\n  }\n  onSelect(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('select', handler as EventHandler<State, Action>)\n  }\n  onShow(handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined) {\n    return this.handle('show', handler as EventHandler<State, Action>)\n  }\n  onSubmit(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('submit', handler as EventHandler<State, Action>)\n  }\n  onTouchCancel(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchcancel', handler as EventHandler<State, Action>)\n  }\n  onTouchEnd(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchend', handler as EventHandler<State, Action>)\n  }\n  onTouchMove(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchmove', handler as EventHandler<State, Action>)\n  }\n  onTouchStart(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchstart', handler as EventHandler<State, Action>)\n  }\n  onWheel(handler: EventHandlerTE<State, Action, WheelEvent, El> | undefined) {\n    return this.handle('wheel', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class SVGGraphicsElementBuilder<\n  State,\n  Action,\n  Query,\n  El extends SVGGraphicsElement\n> extends SVGElementBuilder<State, Action, Query, El> {}\n\nexport class ComponentSVGBuilder<State, Action, Query>\n  extends BaseSVGBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _delayed = false\n  private _equals: undefined | ((a: State, b: State) => boolean)\n  constructor(readonly reducer: (state: State, action: Action) => State) {\n    super()\n  }\n  Equals(equals: undefined | ((a: State, b: State) => boolean)) {\n    if (equals !== undefined) {\n      this._equals = equals\n    }\n    return this\n  }\n  Delayed(delayed: undefined | boolean) {\n    if (delayed !== undefined) {\n      this._delayed = delayed\n    }\n    return this\n  }\n  build() {\n    return new ComponentTemplate<State, Action, Query>(\n      this._delayed,\n      this.reducer,\n      this._equals,\n      this._children\n    )\n  }\n}\n\nexport class FragmentSVGBuilder<State, Action, Query>\n  extends BaseSVGBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  build() {\n    return new FragmentSVGTemplate<State, Action, Query>(this._children)\n  }\n}\n\nexport class MapActionSVGBuilder<State, Action, ActionB, Query>\n  extends BaseSVGBuilder<State, ActionB, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(protected map: DerivedValue<ActionB, Action>) {\n    super()\n  }\n  build() {\n    return new MapActionTemplate<State, Action, ActionB, Query>(\n      this.map,\n      this._children\n    )\n  }\n}\n\nexport class MapQuerySVGBuilder<State, Action, Query, QueryB>\n  extends BaseSVGBuilder<State, Action, QueryB>\n  implements IBuilder<State, Action, Query> {\n  constructor(protected map: DerivedValue<Query, QueryB>) {\n    super()\n  }\n  build() {\n    return new MapQueryTemplate<State, Action, Query, QueryB>(\n      this.map,\n      this._children\n    )\n  }\n}\n\nexport class MapStateSVGBuilder<State, StateB, Action, Query>\n  extends BaseSVGBuilder<StateB, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _orElse: FragmentSVGBuilder<State, Action, Query> | undefined\n  private _equals: undefined | ((a: StateB, b: StateB) => boolean)\n  constructor(protected map: Attribute<State, StateB>) {\n    super()\n  }\n  Equals(equals: undefined | ((a: StateB, b: StateB) => boolean)) {\n    if (equals !== undefined) {\n      this._equals = equals\n    }\n    return this\n  }\n  OrElse(init: (builder: FragmentSVGBuilder<State, Action, Query>) => void) {\n    this._orElse = new FragmentSVGBuilder<State, Action, Query>()\n    init(this._orElse!)\n    return this\n  }\n  build() {\n    return new MapStateTemplate<State, StateB, Action, Query>(\n      this.map,\n      (this._orElse && this._orElse.build()) ?? text(''),\n      this._equals,\n      this._children\n    )\n  }\n}\n\nexport class PortalSVGBuilder<State, Action, Query>\n  extends BaseSVGBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(readonly appendChild: (doc: Document, node: Node) => void) {\n    super()\n  }\n  build() {\n    return new PortalTemplate<State, Action, Query>(\n      this.appendChild,\n      this._children\n    )\n  }\n}\n\nexport class SimpleComponentSVGBuilder<State, Query>\n  extends BaseSVGBuilder<State, State, Query>\n  implements IBuilder<State, State, Query> {\n  public _delayed = false\n  constructor() {\n    super()\n  }\n  Delayed(delayed: undefined | boolean) {\n    if (delayed !== undefined) {\n      this._delayed = delayed\n    }\n    return this\n  }\n  build() {\n    return new SimpleComponentTemplate<State, Query>(\n      this._delayed,\n      this._children\n    )\n  }\n}\n\nexport class UntilSVGBuilder<State, StateB, Action, Query>\n  extends BaseSVGBuilder<StateB, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(\n    readonly next: DerivedOrLiteralValue<\n      { state: State; index: number },\n      StateB\n    >\n  ) {\n    super()\n  }\n  build() {\n    return new UntilTemplate<State, StateB, Action, Query>(\n      this.next,\n      this._children\n    )\n  }\n}\n\nfunction initBuilder<\n  T extends IBuilder<any, any, any>,\n  P extends BaseSVGBuilder<any, any, any>\n>(builder: T, init: undefined | ((builder: T) => void), parent: P): P {\n  init && init(builder)\n  return parent.Append(builder.build())\n}\n\nexport class SVGAnchorElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGAElement> {\n  constructor() {\n    super('a')\n  }\n  // download(filename: Attribute<State, string>): this {\n  //   return this.attr('download', filename)\n  // }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  hreflang(lang: Attribute<State, string>): this {\n    return this.attr('hreflang', lang)\n  }\n  // ping(url: Attribute<State, ListValue<string>>): this {\n  //   return this.attr('ping', mapAttribute(url, spaceSeparatedToString))\n  // }\n  // rel(value: Attribute<State, ListValue<string>>): this {\n  //   return this.attr('rel', mapAttribute(value, spaceSeparatedToString))\n  // }\n  target(name: Attribute<State, string>): this {\n    return this.attr('target', name)\n  }\n  type(name: Attribute<State, string>): this {\n    return this.attr('type', name)\n  }\n}\n\nexport class SVGCircleElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGCircleElement> {\n  constructor() {\n    super('circle')\n  }\n  cx(value: Attribute<State, number | string>): this {\n    return this.attr('cx', mapAttribute(value, String))\n  }\n  cy(value: Attribute<State, number | string>): this {\n    return this.attr('cy', mapAttribute(value, String))\n  }\n  r(value: Attribute<State, number | string>): this {\n    return this.attr('r', mapAttribute(value, String))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\n\nexport class SVGEllipseElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGEllipseElement> {\n  constructor() {\n    super('ellipse')\n  }\n  cx(value: Attribute<State, number | string>): this {\n    return this.attr('cx', mapAttribute(value, String))\n  }\n  cy(value: Attribute<State, number | string>): this {\n    return this.attr('cy', mapAttribute(value, String))\n  }\n  rx(value: Attribute<State, number | string>): this {\n    return this.attr('rx', mapAttribute(value, String))\n  }\n  ry(value: Attribute<State, number | string>): this {\n    return this.attr('ry', mapAttribute(value, String))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\n\nexport type BlendMode =\n  | 'normal'\n  | 'multiply'\n  | 'screen'\n  | 'overlay'\n  | 'darken'\n  | 'lighten'\n  | 'color-dodge'\n  | 'color-burn'\n  | 'hard-light'\n  | 'soft-light'\n  | 'difference'\n  | 'exclusion'\n  | 'hue'\n  | 'saturation'\n  | 'color'\n  | 'luminosity'\n\nexport class SVGFEBlendElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEBlendElement> {\n  constructor() {\n    super('feBlend')\n  }\n  in1(value: Attribute<State, string>): this {\n    return this.attr('in1', value)\n  }\n  in2(value: Attribute<State, string>): this {\n    return this.attr('in2', value)\n  }\n  mode(value: Attribute<State, BlendMode>): this {\n    return this.attr('mode', value)\n  }\n}\n\nexport class SVGFEColorMatrixElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEColorMatrixElement> {\n  constructor() {\n    super('feColorMatrix')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  type(\n    value: Attribute<\n      State,\n      'matrix' | 'saturate' | 'hueRotate' | 'luminanceToAlpha'\n    >\n  ): this {\n    return this.attr('type', value)\n  }\n  values(\n    value: Attribute<\n      State,\n      | number\n      | [\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number,\n          number\n        ]\n    >\n  ): this {\n    return this.attr(\n      'mode',\n      mapAttribute(value, v => (Array.isArray(v) ? v.join(' ') : String(v)))\n    )\n  }\n}\n\nexport class SVGFEComponentTransferElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEColorMatrixElement> {\n  constructor() {\n    super('feComponentTransfer')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n}\n\nexport class SVGFeCompositeElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEColorMatrixElement> {\n  constructor() {\n    super('feComposite')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  in2(value: Attribute<State, string>): this {\n    return this.attr('in2', value)\n  }\n  operator(\n    value: Attribute<\n      State,\n      'over' | 'in' | 'out' | 'atop' | 'xor' | 'lighter' | 'arithmetic'\n    >\n  ): this {\n    return this.attr('operator', value)\n  }\n  k1(value: Attribute<State, number>): this {\n    return this.attr('k1', mapAttribute(value, String))\n  }\n  k2(value: Attribute<State, number>): this {\n    return this.attr('k2', mapAttribute(value, String))\n  }\n  k3(value: Attribute<State, number>): this {\n    return this.attr('k3', mapAttribute(value, String))\n  }\n  k4(value: Attribute<State, number>): this {\n    return this.attr('k4', mapAttribute(value, String))\n  }\n}\n\nexport class SVGFEConvolveMatrixElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEConvolveMatrixElement> {\n  constructor() {\n    super('feConvolveMatrix')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  order(value: Attribute<State, number | string>): this {\n    return this.attr('order', mapAttribute(value, String))\n  }\n  kernelMatrix(value: Attribute<State, number[]>): this {\n    return this.attr('kernelMatrix', mapAttribute(value, numbersListToString))\n  }\n  divisor(value: Attribute<State, number>): this {\n    return this.attr('divisor', mapAttribute(value, String))\n  }\n  bias(value: Attribute<State, number>): this {\n    return this.attr('bias', mapAttribute(value, String))\n  }\n  targetX(value: Attribute<State, number>): this {\n    return this.attr('targetX', mapAttribute(value, String))\n  }\n  targetY(value: Attribute<State, number>): this {\n    return this.attr('targetY', mapAttribute(value, String))\n  }\n  edgeMode(value: Attribute<State, 'duplicate' | 'wrap' | 'none'>): this {\n    return this.attr('edgeMode', value)\n  }\n  preserveAlpha(value: Attribute<State, boolean>): this {\n    return this.attr('preserveAlpha', mapAttribute(value, booleanToString))\n  }\n}\n\nexport class SVGFEDiffuseLightingElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEColorMatrixElement> {\n  constructor() {\n    super('feDiffuseLighting')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  surfaceScale(value: Attribute<State, number>): this {\n    return this.attr('surfaceScale', mapAttribute(value, String))\n  }\n  diffuseConstant(value: Attribute<State, number>): this {\n    return this.attr('diffuseConstant', mapAttribute(value, String))\n  }\n}\n\nexport class SVGFEDisplacementMapElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEDisplacementMapElement> {\n  constructor() {\n    super('feDisplacementMap')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  in2(value: Attribute<State, string>): this {\n    return this.attr('in2', value)\n  }\n  scale(value: Attribute<State, number>): this {\n    return this.attr('scale', mapAttribute(value, String))\n  }\n  xChannelSelector(value: Attribute<State, 'R' | 'G' | 'B' | 'A'>): this {\n    return this.attr('xChannelSelector', value)\n  }\n  yChannelSelector(value: Attribute<State, 'R' | 'G' | 'B' | 'A'>): this {\n    return this.attr('yChannelSelector', value)\n  }\n}\n\nexport class SVGFEDistantLightElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEDistantLightElement> {\n  constructor() {\n    super('feDistantLight')\n  }\n  azimuth(value: Attribute<State, number>): this {\n    return this.attr('azimuth', mapAttribute(value, String))\n  }\n  elevation(value: Attribute<State, number>): this {\n    return this.attr('elevation', mapAttribute(value, String))\n  }\n}\nexport class SVGFEFloodElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFloodElement> {\n  constructor() {\n    super('feFlood')\n  }\n  floodColor(value: Attribute<State, string>): this {\n    return this.attr('flood-color', value)\n  }\n  floodOpacity(value: Attribute<State, number | string>): this {\n    return this.attr('flood-opacity', mapAttribute(value, String))\n  }\n}\nexport class SVGFEFuncAElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFuncAElement> {\n  constructor() {\n    super('feFuncA')\n  }\n}\nexport class SVGFEFuncBElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFuncBElement> {\n  constructor() {\n    super('feFuncB')\n  }\n}\nexport class SVGFEFuncGElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFuncGElement> {\n  constructor() {\n    super('feFuncG')\n  }\n}\nexport class SVGFEFuncRElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEFuncRElement> {\n  constructor() {\n    super('feFuncR')\n  }\n}\nexport class SVGFEGaussianBlurElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEGaussianBlurElement> {\n  constructor() {\n    super('feGaussianBlur')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  stdDeviation(value: Attribute<State, number | string>): this {\n    return this.attr('stdDeviation', mapAttribute(value, String))\n  }\n  edgeMode(value: Attribute<State, 'duplicate' | 'wrap' | 'none'>): this {\n    return this.attr('edgeMode', value)\n  }\n}\nexport class SVGFEImageElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEImageElement> {\n  constructor() {\n    super('feImage')\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n}\nexport class SVGFEMergeElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEMergeElement> {\n  constructor() {\n    super('feMerge')\n  }\n}\nexport class SVGFEMergeNodeElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEMergeNodeElement> {\n  constructor() {\n    super('feMergeNode')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n}\nexport class SVGFEMorphologyElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEMorphologyElement> {\n  constructor() {\n    super('feMorphology')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  operator(\n    value: Attribute<\n      State,\n      'over' | 'in' | 'out' | 'atop' | 'xor' | 'lighter' | 'arithmetic'\n    >\n  ): this {\n    return this.attr('operator', value)\n  }\n  radius(value: Attribute<State, number | string>): this {\n    return this.attr('radius', mapAttribute(value, String))\n  }\n}\nexport class SVGFEOffsetElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEOffsetElement> {\n  constructor() {\n    super('feOffset')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  dx(value: Attribute<State, number>): this {\n    return this.attr('dx', mapAttribute(value, String))\n  }\n  dy(value: Attribute<State, number>): this {\n    return this.attr('dy', mapAttribute(value, String))\n  }\n}\nexport class SVGFEPointLightElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFEPointLightElement> {\n  constructor() {\n    super('fePointLight')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  z(value: Attribute<State, number | string>): this {\n    return this.attr('z', mapAttribute(value, String))\n  }\n}\nexport class SVGFESpecularLightingElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<\n  State,\n  Action,\n  Query,\n  SVGFESpecularLightingElement\n> {\n  constructor() {\n    super('feSpecularLighting')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n  surfaceScale(value: Attribute<State, number>): this {\n    return this.attr('surfaceScale', mapAttribute(value, String))\n  }\n  specularConstant(value: Attribute<State, number>): this {\n    return this.attr('specularConstant', mapAttribute(value, String))\n  }\n  specularExponent(value: Attribute<State, number>): this {\n    return this.attr('specularExponent', mapAttribute(value, String))\n  }\n}\nexport class SVGFESpotLightElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFESpotLightElement> {\n  constructor() {\n    super('feSpotLight')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  z(value: Attribute<State, number | string>): this {\n    return this.attr('z', mapAttribute(value, String))\n  }\n  pointsAtX(value: Attribute<State, number | string>): this {\n    return this.attr('pointsAtX', mapAttribute(value, String))\n  }\n  pointsAtY(value: Attribute<State, number | string>): this {\n    return this.attr('pointsAtY', mapAttribute(value, String))\n  }\n  pointsAtZ(value: Attribute<State, number | string>): this {\n    return this.attr('pointsAtZ', mapAttribute(value, String))\n  }\n  specularComponent(value: Attribute<State, number | string>): this {\n    return this.attr('specularComponent', mapAttribute(value, String))\n  }\n  limitingConeAngle(value: Attribute<State, number | string>): this {\n    return this.attr('limitingConeAngle', mapAttribute(value, String))\n  }\n}\nexport class SVGFETileElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFETileElement> {\n  constructor() {\n    super('feTile')\n  }\n  in(value: Attribute<State, string>): this {\n    return this.attr('in', value)\n  }\n}\nexport class SVGFETurbulenceElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFETurbulenceElement> {\n  constructor() {\n    super('feTurbulence')\n  }\n  baseFrequency(value: Attribute<State, number | string>): this {\n    return this.attr('baseFrequency', mapAttribute(value, String))\n  }\n  numOctaves(value: Attribute<State, number>): this {\n    return this.attr('numOctaves', mapAttribute(value, String))\n  }\n  seed(value: Attribute<State, number>): this {\n    return this.attr('seed', mapAttribute(value, String))\n  }\n  stitchTiles(value: Attribute<State, 'noStitch' | 'stitch'>): this {\n    return this.attr('stitchTiles', value)\n  }\n  type(value: Attribute<State, 'fractalNoise' | 'turbulence'>): this {\n    return this.attr('type', value)\n  }\n}\n\nexport class SVGFilterElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGFilterElement> {\n  constructor() {\n    super('filter')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n  filterUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('filterUnits', value)\n  }\n  primitiveUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('primitiveUnits', value)\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n}\nexport class SVGForeignObjectElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGForeignObjectElement> {\n  constructor() {\n    super('foreignObject')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\nexport class SVGGElementBuilder<State, Action, Query> extends SVGElementBuilder<\n  State,\n  Action,\n  Query,\n  SVGGElement\n> {\n  constructor() {\n    super('g')\n  }\n}\nexport class SVGImageElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGImageElement> {\n  constructor() {\n    super('image')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n}\nexport class SVGLineElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGLineElement> {\n  constructor() {\n    super('line')\n  }\n  x1(value: Attribute<State, number | string>): this {\n    return this.attr('x1', mapAttribute(value, String))\n  }\n  y1(value: Attribute<State, number | string>): this {\n    return this.attr('y1', mapAttribute(value, String))\n  }\n  x2(value: Attribute<State, number | string>): this {\n    return this.attr('x2', mapAttribute(value, String))\n  }\n  y2(value: Attribute<State, number | string>): this {\n    return this.attr('y2', mapAttribute(value, String))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\nexport class SVGLinearGradientElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGLinearGradientElement> {\n  constructor() {\n    super('linearGradient')\n  }\n  gradientUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('gradientUnits', value)\n  }\n  gradientTransform(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr(\n      'gradientTransform',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n  spreadMethod(value: Attribute<State, 'pad' | 'reflect' | 'repeat'>): this {\n    return this.attr('spreadMethod', value)\n  }\n  x1(value: Attribute<State, number | string>): this {\n    return this.attr('x1', mapAttribute(value, String))\n  }\n  y1(value: Attribute<State, number | string>): this {\n    return this.attr('y1', mapAttribute(value, String))\n  }\n  x2(value: Attribute<State, number | string>): this {\n    return this.attr('x2', mapAttribute(value, String))\n  }\n  y2(value: Attribute<State, number | string>): this {\n    return this.attr('y2', mapAttribute(value, String))\n  }\n}\nexport class SVGMarkerElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGMarkerElement> {\n  constructor() {\n    super('marker')\n  }\n  markerHeight(value: Attribute<State, number | string>): this {\n    return this.attr('markerHeight', mapAttribute(value, String))\n  }\n  markerUnits(value: Attribute<State, 'userSpaceOnUse' | 'strokeWidth'>): this {\n    return this.attr('markerUnits', value)\n  }\n  markerWidth(value: Attribute<State, number | string>): this {\n    return this.attr('markerWidth', mapAttribute(value, String))\n  }\n  orient(value: Attribute<State, string>): this {\n    return this.attr('orient', value)\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n  refX(value: Attribute<State, string>): this {\n    return this.attr('refX', value)\n  }\n  refY(value: Attribute<State, string>): this {\n    return this.attr('refY', value)\n  }\n  viewBox(value: Attribute<State, [number, number, number, number]>): this {\n    return this.attr('viewBox', mapAttribute(value, numbersListToString))\n  }\n}\nexport class SVGMaskElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGMaskElement> {\n  constructor() {\n    super('mask')\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  maskContentUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('maskContentUnits', value)\n  }\n  maskUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('maskUnits', value)\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\nexport class SVGMetadataElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGMetadataElement> {\n  constructor() {\n    super('metadata')\n  }\n}\nexport class SVGPathElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGPathElement> {\n  constructor() {\n    super('path')\n  }\n  d(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr('d', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\nexport class SVGPatternElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGPatternElement> {\n  constructor() {\n    super('pattern')\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n  patternContentUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('patternContentUnits', value)\n  }\n  patternTransform(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr(\n      'patternTransform',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  patternUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('patternUnits', value)\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n  viewBox(value: Attribute<State, [number, number, number, number]>): this {\n    return this.attr('viewBox', mapAttribute(value, numbersListToString))\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\nexport class SVGPolygonElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGPolygonElement> {\n  constructor() {\n    super('polygon')\n  }\n  points(value: Attribute<State, [number, number][]>): this {\n    return this.attr('points', mapAttribute(value, numberPairsListToString))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\nexport class SVGPolylineElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGPolylineElement> {\n  constructor() {\n    super('polyline')\n  }\n  points(value: Attribute<State, [number, number][]>): this {\n    return this.attr('points', mapAttribute(value, numberPairsListToString))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\nexport class SVGRadialGradientElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGRadialGradientElement> {\n  constructor() {\n    super('radialGradient')\n  }\n  cx(value: Attribute<State, number | string>): this {\n    return this.attr('cx', mapAttribute(value, String))\n  }\n  cy(value: Attribute<State, number | string>): this {\n    return this.attr('cy', mapAttribute(value, String))\n  }\n  fr(value: Attribute<State, number | string>): this {\n    return this.attr('fr', mapAttribute(value, String))\n  }\n  fx(value: Attribute<State, number | string>): this {\n    return this.attr('fx', mapAttribute(value, String))\n  }\n  fy(value: Attribute<State, number | string>): this {\n    return this.attr('fy', mapAttribute(value, String))\n  }\n  gradientUnits(\n    value: Attribute<State, 'userSpaceOnUse' | 'objectBoundingBox'>\n  ): this {\n    return this.attr('gradientUnits', value)\n  }\n  gradientTransform(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr(\n      'gradientTransform',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  r(value: Attribute<State, number | string>): this {\n    return this.attr('r', mapAttribute(value, String))\n  }\n  spreadMethod(value: Attribute<State, 'pad' | 'reflect' | 'repeat'>): this {\n    return this.attr('spreadMethod', value)\n  }\n}\nexport class SVGScriptElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGScriptElement> {\n  constructor() {\n    super('script')\n  }\n  crossorigin(value: Attribute<State, string>): this {\n    return this.attr('crossorigin', value)\n  }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  type(value: Attribute<State, string>): this {\n    return this.attr('type', value)\n  }\n}\nexport class SVGStopElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGStopElement> {\n  constructor() {\n    super('stop')\n  }\n  offset(value: Attribute<State, number | string>): this {\n    return this.attr('offset', mapAttribute(value, String))\n  }\n  stopColor(value: Attribute<State, string>): this {\n    return this.attr('stop-color', value)\n  }\n  stopOpacity(value: Attribute<State, number>): this {\n    return this.attr('stop-opacity', mapAttribute(value, String))\n  }\n}\nexport class SVGStyleElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGStyleElement> {\n  constructor() {\n    super('style')\n  }\n  type(value: Attribute<State, string>): this {\n    return this.attr('type', value)\n  }\n  media(value: Attribute<State, string>): this {\n    return this.attr('media', value)\n  }\n  title(value: Attribute<State, string>): this {\n    return this.attr('title', value)\n  }\n}\nexport class SVGSVGElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGGraphicsElementBuilder<State, Action, Query, SVGSVGElement> {\n  constructor() {\n    super('svg')\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  preserveAspectRatio(value: Attribute<State, string>): this {\n    return this.attr('preserveAspectRatio', value)\n  }\n  viewBox(value: Attribute<State, [number, number, number, number]>): this {\n    return this.attr('viewBox', mapAttribute(value, numbersListToString))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n}\nexport class SVGSwitchElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGSwitchElement> {\n  constructor() {\n    super('switch')\n  }\n}\nexport class SVGSymbolElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGSymbolElement> {\n  constructor() {\n    super('symbol')\n  }\n}\nexport class SVGTextElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGTextElement> {\n  constructor() {\n    super('text')\n  }\n  x(value: Attribute<State, number>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  dx(value: Attribute<State, number>): this {\n    return this.attr('dx', mapAttribute(value, String))\n  }\n  dy(value: Attribute<State, number>): this {\n    return this.attr('dy', mapAttribute(value, String))\n  }\n  rotate(value: Attribute<State, number[]>): this {\n    return this.attr('rotate', mapAttribute(value, numbersListToString))\n  }\n  lengthAdjust(value: Attribute<State, 'spacing' | 'spacingAndGlyphs'>): this {\n    return this.attr('lengthAdjust', value)\n  }\n  textLength(value: Attribute<State, number | string>): this {\n    return this.attr('textLength', mapAttribute(value, String))\n  }\n  text(value: DerivedOrLiteralValue<State, string>): this {\n    this._children.push(text(value))\n    return this\n  }\n}\nexport class SVGTextPathElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGTextPathElement> {\n  constructor() {\n    super('textPath')\n  }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  lengthAdjust(value: Attribute<State, 'spacing' | 'spacingAndGlyphs'>): this {\n    return this.attr('lengthAdjust', value)\n  }\n  method(value: Attribute<State, 'align' | 'stretch'>): this {\n    return this.attr('method', value)\n  }\n  path(value: Attribute<State, string>): this {\n    return this.attr('path', value)\n  }\n  side(value: Attribute<State, 'left' | 'right'>): this {\n    return this.attr('side', value)\n  }\n  spacing(value: Attribute<State, 'auto' | 'exact'>): this {\n    return this.attr('spacing', value)\n  }\n  start(value: Attribute<State, number | string>): this {\n    return this.attr('start', mapAttribute(value, String))\n  }\n  offset(value: Attribute<State, number | string>): this {\n    return this.attr('offset', mapAttribute(value, String))\n  }\n  text(value: DerivedOrLiteralValue<State, string>): this {\n    this._children.push(text(value))\n    return this\n  }\n  textLength(value: Attribute<State, number | string>): this {\n    return this.attr('textLength', mapAttribute(value, String))\n  }\n}\nexport class SVGTitleElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGTitleElement> {\n  constructor() {\n    super('title')\n  }\n}\nexport class SVGTSpanElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGTSpanElement> {\n  constructor() {\n    super('tSpan')\n  }\n  x(value: Attribute<State, number>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  dx(value: Attribute<State, number>): this {\n    return this.attr('dx', mapAttribute(value, String))\n  }\n  dy(value: Attribute<State, number>): this {\n    return this.attr('dy', mapAttribute(value, String))\n  }\n  rotate(value: Attribute<State, number[]>): this {\n    return this.attr('rotate', mapAttribute(value, numbersListToString))\n  }\n  lengthAdjust(value: Attribute<State, 'spacing' | 'spacingAndGlyphs'>): this {\n    return this.attr('lengthAdjust', value)\n  }\n  textLength(value: Attribute<State, number | string>): this {\n    return this.attr('textLength', mapAttribute(value, String))\n  }\n  text(value: DerivedOrLiteralValue<State, string>): this {\n    this._children.push(text(value))\n    return this\n  }\n}\nexport class SVGUseElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGUseElement> {\n  constructor() {\n    super('use')\n  }\n  href(value: Attribute<State, string>): this {\n    return this.attr('href', value)\n  }\n  x(value: Attribute<State, number>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\nexport class SVGViewElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGViewElement> {\n  constructor() {\n    super('view')\n  }\n}\n\nexport class SVGRectElementBuilder<\n  State,\n  Action,\n  Query\n> extends SVGElementBuilder<State, Action, Query, SVGRectElement> {\n  constructor() {\n    super('rect')\n  }\n  x(value: Attribute<State, number | string>): this {\n    return this.attr('x', mapAttribute(value, String))\n  }\n  y(value: Attribute<State, number | string>): this {\n    return this.attr('y', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number | string>): this {\n    return this.attr('width', mapAttribute(value, String))\n  }\n  height(value: Attribute<State, number | string>): this {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  rx(value: Attribute<State, number | string>): this {\n    return this.attr('rx', mapAttribute(value, String))\n  }\n  ry(value: Attribute<State, number | string>): this {\n    return this.attr('ry', mapAttribute(value, String))\n  }\n  pathLength(value: Attribute<State, number | string>): this {\n    return this.attr('pathLength', mapAttribute(value, String))\n  }\n}\n","import { DOMTemplate, DOMChild } from '../template'\nimport { makeCreateElement } from './dom'\nimport { DerivedOrLiteralValue, DerivedValue } from 'tempo-core/lib/value'\nimport { text } from './text'\nimport {\n  Attribute,\n  mapAttribute,\n  EventHandlerTE,\n  EventHandler,\n  resolveAttribute\n} from '../value'\nimport { ComponentTemplate } from './component'\nimport { keys } from 'tempo-std/lib/objects'\nimport { DOMContext } from '../context'\nimport { makeEmptyLifecycle, MakeLifecycle } from '../lifecycle'\nimport { DOMElement } from './element'\nimport { MapStateTemplate } from './map_state'\nimport { FragmentTemplate } from './fragment'\nimport { MapActionTemplate } from './map_action'\nimport { MapQueryTemplate } from './map_query'\nimport { UntilTemplate } from './until'\nimport { SimpleComponentTemplate } from './simple_component'\nimport { PortalTemplate } from './portal'\nimport { LazyTemplate } from './lazy'\nimport { MatchBoolTemplate } from './match_bool_template'\nimport { HoldF, HoldStateTemplate } from './hold_state'\nimport {\n  IBuilder,\n  extractLiterals,\n  extractDerived,\n  ListOrRecordValue,\n  listOrRecordToSpaceSeparated,\n  toggleToString,\n  booleanToString,\n  stylesToString,\n  lostOrRecordToCommaSeparated,\n  DOMBuilder\n} from './dom_builder'\nimport { AdapterTemplate, PropagateArg } from './adapter'\nimport { SVGSVGElementBuilder } from './svg_builder'\n\nexport class BaseHTMLBuilder<State, Action, Query> extends DOMBuilder<\n  State,\n  Action,\n  Query\n> {\n  El(\n    init: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void = () => {}\n  ): this {\n    const builder = El<State, Action, Query>(name)\n    init(builder)\n    this._children.push(builder.build())\n    return this\n  }\n  text(value: DerivedOrLiteralValue<State, string>): this {\n    this._children.push(text(value))\n    return this\n  }\n\n  // transform\n  Adapter<StateB, ActionB>(props: {\n    bootstrapState: (outer: State) => StateB\n    mergeStates?: Attribute<\n      {\n        outerState: State\n        innerState: StateB\n      },\n      StateB\n    >\n    propagate?: (args: PropagateArg<State, StateB, Action, ActionB>) => void\n    child: ComponentTemplate<StateB, ActionB, Query>\n  }) {\n    return this.Append(\n      new AdapterTemplate(\n        props.bootstrapState,\n        props.mergeStates,\n        props.propagate || (() => undefined),\n        props.child\n      )\n    )\n  }\n\n  Component(\n    reducer: (state: State, action: Action) => State,\n    init: (builder: ComponentHTMLBuilder<State, Action, Query>) => void\n  ) {\n    const builder = new ComponentHTMLBuilder<State, Action, Query>(reducer)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  LocalAdapter(props: {\n    propagate?: (args: PropagateArg<State, State, Action, Action>) => void\n    child: ComponentTemplate<State, Action, Query>\n  }) {\n    return this.Append(\n      new AdapterTemplate(\n        state => state,\n        ({ outerState }) => outerState,\n        props.propagate || (() => undefined),\n        props.child\n      )\n    )\n  }\n\n  HoldState<StateB, StateC>(\n    holdf: HoldF<\n      State,\n      StateB,\n      StateC,\n      Action,\n      Query,\n      FragmentHTMLBuilder<StateC, Action, Query>\n    >\n  ): this {\n    return this.Append(\n      new HoldStateTemplate(\n        holdf,\n        new FragmentHTMLBuilder<StateC, Action, Query>()\n      )\n    )\n  }\n\n  MapState<StateB>(\n    map: (state: State) => StateB | undefined,\n    init: (builder: MapStateHTMLBuilder<State, StateB, Action, Query>) => void\n  ) {\n    const builder = new MapStateHTMLBuilder<State, StateB, Action, Query>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapField<Key extends keyof State>(\n    field: Key,\n    init: (\n      builder: MapStateHTMLBuilder<State, State[Key], Action, Query>\n    ) => void\n  ) {\n    return this.MapState<State[Key]>((v: State): State[Key] => v[field], init)\n  }\n\n  MapStateAndKeep<StateB>(\n    map: (state: State) => StateB | undefined,\n    init: (\n      builder: MapStateHTMLBuilder<State, [StateB, State], Action, Query>\n    ) => void\n  ) {\n    const builder = new MapStateHTMLBuilder<\n      State,\n      [StateB, State],\n      Action,\n      Query\n    >((state: State) => {\n      const inner = resolveAttribute(map)(state)\n      if (inner !== undefined) {\n        return [inner, state]\n      } else {\n        return undefined\n      }\n    })\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapAction<ActionB>(\n    map: DerivedValue<ActionB, Action>,\n    init: (builder: MapActionHTMLBuilder<State, Action, ActionB, Query>) => void\n  ) {\n    const builder = new MapActionHTMLBuilder<State, Action, ActionB, Query>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MapQuery<QueryB>(\n    map: DerivedValue<Query, QueryB>,\n    init: (builder: MapQueryHTMLBuilder<State, Action, Query, QueryB>) => void\n  ) {\n    const builder = new MapQueryHTMLBuilder<State, Action, Query, QueryB>(map)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  MatchBool(props: {\n    condition: Attribute<State, boolean>\n    true: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n    false: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  }): this {\n    return this.Append(\n      new MatchBoolTemplate<State, Action, Query>(\n        props.condition,\n        props.true,\n        props.false\n      )\n    )\n  }\n\n  Lazy(\n    lazyf: () =>\n      | DOMTemplate<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  ) {\n    return this.Append(new LazyTemplate(lazyf))\n  }\n\n  ForEach(\n    init: (\n      builder: UntilHTMLBuilder<\n        State,\n        State extends any[] ? State[number] : never,\n        Action,\n        Query\n      >\n    ) => void\n  ): this {\n    return this.Until(\n      ({\n        state,\n        index\n      }: {\n        state: State\n        index: number\n      }): State extends any[] ? State[number] : never => (state as any)[index],\n      init\n    )\n  }\n\n  Fragment(init: (builder: FragmentHTMLBuilder<State, Action, Query>) => void) {\n    const builder = new FragmentHTMLBuilder<State, Action, Query>()\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  Iterate<Items extends any[]>(\n    map: DerivedValue<State, Items>,\n    init: (\n      builder: UntilHTMLBuilder<\n        [Items, State],\n        [Items[number], State, number],\n        Action,\n        Query\n      >\n    ) => void\n  ) {\n    return this.MapState<[Items, State]>(\n      (outer: State): [Items, State] | undefined => {\n        const items = resolveAttribute(map)(outer)\n        return items !== undefined ? [items, outer] : undefined\n      },\n      $ => {\n        $.Until<[Items[number], State, number]>(\n          ({ state: [items, state], index }) =>\n            items[index] && [items[index], state, index],\n          init\n        )\n      }\n    )\n  }\n\n  Portal(\n    appendChild: (doc: Document, node: Node) => void,\n    init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new PortalHTMLBuilder<State, Action, Query>(appendChild)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  PortalWithSelector(\n    selector: string,\n    init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => {\n      const el = doc.querySelector(selector)\n      if (!el) {\n        throw new Error(`selector doesn't match any element: \"${selector}\"`)\n      }\n      el.appendChild(node)\n    }, init)\n  }\n\n  HeadPortal(\n    init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => doc.head.appendChild(node), init)\n  }\n\n  BodyPortal(\n    init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n  ): this {\n    return this.Portal((doc, node) => doc.body.appendChild(node), init)\n  }\n\n  // SimpleComponent(\n  //   init: (builder: SimpleComponentBuilder<State, Query>) => void\n  // ) {\n  //   const builder = new SimpleComponentBuilder<State, Query>()\n  //   init(builder)\n  //   return this.append(builder.build())\n  // }\n\n  Unless(\n    condition: DerivedValue<State, boolean>,\n    init: (builder: MapStateHTMLBuilder<State, State, Action, Query>) => void\n  ) {\n    return this.When(s => !condition(s), init)\n  }\n\n  Until<StateB>(\n    next: DerivedValue<{ state: State; index: number }, StateB>,\n    init: (builder: UntilHTMLBuilder<State, StateB, Action, Query>) => void\n  ) {\n    const builder = new UntilHTMLBuilder<State, StateB, Action, Query>(next)\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  When(\n    condition: DerivedValue<State, boolean>,\n    init: (builder: MapStateHTMLBuilder<State, State, Action, Query>) => void\n  ) {\n    const builder = new MapStateHTMLBuilder<State, State, Action, Query>(s => {\n      if (condition(s)) {\n        return s\n      } else {\n        return undefined\n      }\n    })\n    init(builder)\n    return this.Append(builder.build())\n  }\n\n  // derived children\n  A(\n    init?: (builder: HTMLAnchorElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLAnchorElementBuilder<State, Action, Query>('a'),\n      init,\n      this\n    )\n  }\n  ABBR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('abbr'),\n      init,\n      this\n    )\n  }\n  ADDRESS(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('address'),\n      init,\n      this\n    )\n  }\n  AREA(\n    init?: (builder: HTMLAreaElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLAreaElementBuilder<State, Action, Query>('area'),\n      init,\n      this\n    )\n  }\n  ARTICLE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('article'),\n      init,\n      this\n    )\n  }\n  ASIDE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('aside'),\n      init,\n      this\n    )\n  }\n  AUDIO(\n    init?: (builder: HTMLAudioElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLAudioElementBuilder<State, Action, Query>('audio'),\n      init,\n      this\n    )\n  }\n  B(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('b'),\n      init,\n      this\n    )\n  }\n  BASE(\n    init?: (builder: HTMLBaseElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLBaseElementBuilder<State, Action, Query>('base'),\n      init,\n      this\n    )\n  }\n  BDI(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('bdi'),\n      init,\n      this\n    )\n  }\n  BDO(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('bdo'),\n      init,\n      this\n    )\n  }\n  BLOCKQUOTE(\n    init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLQuoteElementBuilder<State, Action, Query>('blockquote'),\n      init,\n      this\n    )\n  }\n  BODY(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLBodyElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLBodyElement>('body'),\n      init,\n      this\n    )\n  }\n  BR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLBRElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLBRElement>('br'),\n      init,\n      this\n    )\n  }\n  BUTTON(\n    init?: (builder: HTMLButtonElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLButtonElementBuilder<State, Action, Query>('button'),\n      init,\n      this\n    )\n  }\n  CANVAS(\n    init?: (builder: HTMLCanvasElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLCanvasElementBuilder<State, Action, Query>('canvas'),\n      init,\n      this\n    )\n  }\n  CAPTION(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableCaptionElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableCaptionElement>(\n        'caption'\n      ),\n      init,\n      this\n    )\n  }\n  CITE(\n    init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLQuoteElementBuilder<State, Action, Query>('cite'),\n      init,\n      this\n    )\n  }\n  CODE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('code'),\n      init,\n      this\n    )\n  }\n  COL(\n    init?: (builder: HTMLTableColElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTableColElementBuilder<State, Action, Query>('col'),\n      init,\n      this\n    )\n  }\n  COLGROUP(\n    init?: (builder: HTMLTableColElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTableColElementBuilder<State, Action, Query>('colgroup'),\n      init,\n      this\n    )\n  }\n  DATA(\n    init?: (builder: HTMLDataElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLDataElementBuilder<State, Action, Query>('data'),\n      init,\n      this\n    )\n  }\n  DATALIST(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLDataListElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLDataListElement>(\n        'datalist'\n      ),\n      init,\n      this\n    )\n  }\n  DD(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('dd'),\n      init,\n      this\n    )\n  }\n  DEL(\n    init?: (builder: HTMLModElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLModElementBuilder<State, Action, Query>('del'),\n      init,\n      this\n    )\n  }\n  DETAILS(\n    init?: (builder: HTMLDetailsElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLDetailsElementBuilder<State, Action, Query>('details'),\n      init,\n      this\n    )\n  }\n  DFN(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('dfn'),\n      init,\n      this\n    )\n  }\n  DIALOG(\n    init?: (builder: HTMLDialogElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLDialogElementBuilder<State, Action, Query>('dialog'),\n      init,\n      this\n    )\n  }\n  DIV(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLDivElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLDivElement>('div'),\n      init,\n      this\n    )\n  }\n  DL(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLDListElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLDListElement>('dl'),\n      init,\n      this\n    )\n  }\n  DT(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('dt'),\n      init,\n      this\n    )\n  }\n  EM(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('em'),\n      init,\n      this\n    )\n  }\n  EMBED(\n    init?: (builder: HTMLEmbedElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLEmbedElementBuilder<State, Action, Query>('embed'),\n      init,\n      this\n    )\n  }\n  FIELDSET(\n    init?: (builder: HTMLFieldSetElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLFieldSetElementBuilder<State, Action, Query>('fieldset'),\n      init,\n      this\n    )\n  }\n  FIG_CAPTION(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('figcaption'),\n      init,\n      this\n    )\n  }\n  FIGURE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('figure'),\n      init,\n      this\n    )\n  }\n  FOOTER(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('footer'),\n      init,\n      this\n    )\n  }\n  FORM(\n    init?: (builder: HTMLFormElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLFormElementBuilder<State, Action, Query>('form'),\n      init,\n      this\n    )\n  }\n  H1(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>('h1'),\n      init,\n      this\n    )\n  }\n  H2(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>('h2'),\n      init,\n      this\n    )\n  }\n  H3(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>('h3'),\n      init,\n      this\n    )\n  }\n  H4(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>('h4'),\n      init,\n      this\n    )\n  }\n  H5(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('h5'),\n      init,\n      this\n    )\n  }\n  H6(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('h6'),\n      init,\n      this\n    )\n  }\n  HEAD(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHeadElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHeadElement>('head'),\n      init,\n      this\n    )\n  }\n  HEADER(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('header'),\n      init,\n      this\n    )\n  }\n  HGROUP(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('hgroup'),\n      init,\n      this\n    )\n  }\n  HR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLHRElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLHRElement>('hr'),\n      init,\n      this\n    )\n  }\n  HTML(\n    init?: (builder: HTMLHtmlElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLHtmlElementBuilder<State, Action, Query>('html'),\n      init,\n      this\n    )\n  }\n  I(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('i'),\n      init,\n      this\n    )\n  }\n  IFRAME(\n    init?: (builder: HTMLIFrameElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLIFrameElementBuilder<State, Action, Query>('iframe'),\n      init,\n      this\n    )\n  }\n  IMG(\n    init?: (builder: HTMLImageElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLImageElementBuilder<State, Action, Query>('img'),\n      init,\n      this\n    )\n  }\n  INPUT(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLInputElementBuilder<State, Action, Query>('input'),\n      init,\n      this\n    )\n  }\n\n  INPUT_BUTTON(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n    builder.type('button')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_CHECKBOX(\n    init?: (\n      builder: HTMLInputCheckedElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputCheckedElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('checkbox')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_COLOR(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n    builder.type('color')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_DATE(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('date')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_DATETIME_LOCAL(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('datetime-local')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_EMAIL(\n    init?: (builder: HTMLInputEmailElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputEmailElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('email')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_FILE(\n    init?: (builder: HTMLInputFileElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputFileElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('file')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_HIDDEN(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n    builder.type('hidden')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_IMAGE(\n    init?: (builder: HTMLInputImageElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputImageElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('image')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_MONTH(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('month')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_NUMBER(\n    init?: (\n      builder: HTMLInputNumberElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputNumberElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('number')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_PASSWORD(\n    init?: (\n      builder: HTMLInputPasswordElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputPasswordElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('password')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_RADIO(\n    init?: (\n      builder: HTMLInputCheckedElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputCheckedElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('radio')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_RANGE(\n    init?: (\n      builder: HTMLInputNumberElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputNumberElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('range')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_RESET(\n    init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n    builder.type('reset')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_SEARCH(\n    init?: (\n      builder: HTMLInputSearchElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputSearchElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('search')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_SUBMIT(\n    init?: (\n      builder: HTMLInputSubmitElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    const builder = new HTMLInputSubmitElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('submit')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_TEL(\n    init?: (builder: HTMLInputTelElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputTelElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('tel')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_TEXT(\n    init?: (builder: InputTextElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new InputTextElementBuilder<State, Action, Query>('input')\n    builder.type('text')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_TIME(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('time')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_URL(\n    init?: (builder: HTMLInputUrlElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputUrlElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('url')\n    return initBuilder(builder, init, this)\n  }\n  INPUT_WEEK(\n    init?: (builder: HTMLInputDateElementBuilder<State, Action, Query>) => void\n  ): this {\n    const builder = new HTMLInputDateElementBuilder<State, Action, Query>(\n      'input'\n    )\n    builder.type('week')\n    return initBuilder(builder, init, this)\n  }\n\n  INS(\n    init?: (builder: HTMLModElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLModElementBuilder<State, Action, Query>('ins'),\n      init,\n      this\n    )\n  }\n  KBD(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('kbd'),\n      init,\n      this\n    )\n  }\n  LABEL(\n    init?: (builder: HTMLLabelElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLLabelElementBuilder<State, Action, Query>('label'),\n      init,\n      this\n    )\n  }\n  LEGEND(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLLegendElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLLegendElement>('legend'),\n      init,\n      this\n    )\n  }\n  LI(\n    init?: (builder: HTMLLIElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLLIElementBuilder<State, Action, Query>('li'),\n      init,\n      this\n    )\n  }\n  LINK(\n    init?: (builder: HTMLLinkElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLLinkElementBuilder<State, Action, Query>('link'),\n      init,\n      this\n    )\n  }\n  MAIN(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('main'),\n      init,\n      this\n    )\n  }\n  MAP(\n    init?: (builder: HTMLMapElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLMapElementBuilder<State, Action, Query>('map'),\n      init,\n      this\n    )\n  }\n  MARK(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('mark'),\n      init,\n      this\n    )\n  }\n  META(\n    init?: (builder: HTMLMetaElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLMetaElementBuilder<State, Action, Query>('meta'),\n      init,\n      this\n    )\n  }\n  METER(\n    init?: (builder: HTMLMeterElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLMeterElementBuilder<State, Action, Query>('meter'),\n      init,\n      this\n    )\n  }\n  NAV(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('nav'),\n      init,\n      this\n    )\n  }\n  NOSCRIPT(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('noscript'),\n      init,\n      this\n    )\n  }\n  OBJECT(\n    init?: (builder: HTMLObjectElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLObjectElementBuilder<State, Action, Query>('object'),\n      init,\n      this\n    )\n  }\n  OL(\n    init?: (builder: HTMLOListElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLOListElementBuilder<State, Action, Query>('ol'),\n      init,\n      this\n    )\n  }\n  OPTGROUP(\n    init?: (builder: HTMLOptGroupElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLOptGroupElementBuilder<State, Action, Query>('optgroup'),\n      init,\n      this\n    )\n  }\n  OPTION(\n    init?: (builder: HTMLOptionElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLOptionElementBuilder<State, Action, Query>('option'),\n      init,\n      this\n    )\n  }\n  OUTPUT(\n    init?: (builder: HTMLOutputElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLOutputElementBuilder<State, Action, Query>('output'),\n      init,\n      this\n    )\n  }\n  P(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLParagraphElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLParagraphElement>('p'),\n      init,\n      this\n    )\n  }\n  PARAM(\n    init?: (builder: HTMLParamElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLParamElementBuilder<State, Action, Query>('param'),\n      init,\n      this\n    )\n  }\n  PICTURE(\n    init?: (builder: HTMLPictureElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLPictureElementBuilder<State, Action, Query>('picture'),\n      init,\n      this\n    )\n  }\n  PRE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLPreElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLPreElement>('pre'),\n      init,\n      this\n    )\n  }\n  PROGRESS(\n    init?: (builder: HTMLProgressElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLProgressElementBuilder<State, Action, Query>('progress'),\n      init,\n      this\n    )\n  }\n  Q(\n    init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLQuoteElementBuilder<State, Action, Query>('q'),\n      init,\n      this\n    )\n  }\n  RP(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('rp'),\n      init,\n      this\n    )\n  }\n  RT(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('rt'),\n      init,\n      this\n    )\n  }\n  RUBY(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('ruby'),\n      init,\n      this\n    )\n  }\n  S(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('s'),\n      init,\n      this\n    )\n  }\n  SAMP(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('samp'),\n      init,\n      this\n    )\n  }\n  SCRIPT(\n    init?: (builder: HTMLScriptElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLScriptElementBuilder<State, Action, Query>('script'),\n      init,\n      this\n    )\n  }\n  SECTION(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('section'),\n      init,\n      this\n    )\n  }\n  SELECT(\n    init?: (builder: HTMLSelectElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLSelectElementBuilder<State, Action, Query>('select'),\n      init,\n      this\n    )\n  }\n  SLOT(\n    init?: (builder: HTMLSlotElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLSlotElementBuilder<State, Action, Query>('slot'),\n      init,\n      this\n    )\n  }\n  SMALL(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('small'),\n      init,\n      this\n    )\n  }\n  SOURCE(\n    init?: (builder: HTMLSourceElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLSourceElementBuilder<State, Action, Query>('source'),\n      init,\n      this\n    )\n  }\n  SPAN(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLSpanElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLSpanElement>('span'),\n      init,\n      this\n    )\n  }\n  STRONG(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('strong'),\n      init,\n      this\n    )\n  }\n  STYLE(\n    init?: (builder: HTMLStyleElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLStyleElementBuilder<State, Action, Query>('style'),\n      init,\n      this\n    )\n  }\n  SUB(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('sub'),\n      init,\n      this\n    )\n  }\n  SUMMARY(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('summary'),\n      init,\n      this\n    )\n  }\n  SUP(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('sup'),\n      init,\n      this\n    )\n  }\n  SVG(\n    init?: (builder: SVGSVGElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new SVGSVGElementBuilder<State, Action, Query>(),\n      init,\n      this\n    )\n  }\n  TABLE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableElement>('table'),\n      init,\n      this\n    )\n  }\n  TBODY(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>(\n        'tbody'\n      ),\n      init,\n      this\n    )\n  }\n  TD(\n    init?: (\n      builder: HTMLTableDataCellElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLTableDataCellElementBuilder<State, Action, Query>('td'),\n      init,\n      this\n    )\n  }\n  TEMPLATE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTemplateElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTemplateElement>(\n        'template'\n      ),\n      init,\n      this\n    )\n  }\n  TEXTAREA(\n    init?: (builder: HTMLTextAreaElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTextAreaElementBuilder<State, Action, Query>('textarea'),\n      init,\n      this\n    )\n  }\n  TFOOT(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>(\n        'tfoot'\n      ),\n      init,\n      this\n    )\n  }\n  TH(\n    init?: (\n      builder: HTMLTableHeaderCellElementBuilder<State, Action, Query>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLTableHeaderCellElementBuilder<State, Action, Query>('th'),\n      init,\n      this\n    )\n  }\n  THEAD(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('thead'),\n      init,\n      this\n    )\n  }\n  TIME(\n    init?: (builder: HTMLTimeElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTimeElementBuilder<State, Action, Query>('time'),\n      init,\n      this\n    )\n  }\n  TITLE(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTitleElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTitleElement>('title'),\n      init,\n      this\n    )\n  }\n  TR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLTableRowElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLTableRowElement>('tr'),\n      init,\n      this\n    )\n  }\n  TRACK(\n    init?: (builder: HTMLTrackElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLTrackElementBuilder<State, Action, Query>('track'),\n      init,\n      this\n    )\n  }\n  U(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('u'),\n      init,\n      this\n    )\n  }\n  UL(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLUListElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLUListElement>('ul'),\n      init,\n      this\n    )\n  }\n  VAR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('var'),\n      init,\n      this\n    )\n  }\n  VIDEO(\n    init?: (builder: HTMLVideoElementBuilder<State, Action, Query>) => void\n  ): this {\n    return initBuilder(\n      new HTMLVideoElementBuilder<State, Action, Query>('video'),\n      init,\n      this\n    )\n  }\n  WBR(\n    init?: (\n      builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n    ) => void\n  ): this {\n    return initBuilder(\n      new HTMLElementBuilder<State, Action, Query, HTMLElement>('wbr'),\n      init,\n      this\n    )\n  }\n}\n\nexport type AriaRole =\n  | 'alert'\n  | 'alertdialog'\n  | 'application'\n  | 'article'\n  | 'banner'\n  | 'button'\n  | 'checkbox'\n  | 'cell'\n  | 'columnheader'\n  | 'combobox'\n  | 'complementary'\n  | 'contentinfo'\n  | 'definition'\n  | 'dialog'\n  | 'directory'\n  | 'document'\n  | 'feed'\n  | 'figure'\n  | 'form'\n  | 'grid'\n  | 'gridcell'\n  | 'group'\n  | 'heading'\n  | 'img'\n  | 'link'\n  | 'list'\n  | 'listbox'\n  | 'listitem'\n  | 'log'\n  | 'main'\n  | 'marquee'\n  | 'math'\n  | 'menu'\n  | 'menubar'\n  | 'menuitem'\n  | 'menuitemcheckbox'\n  | 'menuitemradio'\n  | 'navigation'\n  | 'none'\n  | 'note'\n  | 'option'\n  | 'presentation'\n  | 'progressbar'\n  | 'radio'\n  | 'radiogroup'\n  | 'region'\n  | 'row'\n  | 'rowgroup'\n  | 'rowheader'\n  | 'scrollbar'\n  | 'search'\n  | 'searchbox'\n  | 'separator'\n  | 'spinbutton'\n  | 'status'\n  | 'switch'\n  | 'tab'\n  | 'table'\n  | 'tablist'\n  | 'tabpanel'\n  | 'term'\n  | 'textbox'\n  | 'timer'\n  | 'toolbar'\n  | 'tooltip'\n  | 'tree'\n  | 'treegrid'\n  | 'treeitem'\n\n// dom generic\nexport function El<State, Action, Query, El extends HTMLElement = HTMLElement>(\n  tagName: string = 'div'\n) {\n  return new HTMLElementBuilder<State, Action, Query, El>(tagName)\n}\n\nexport class HTMLElementBuilder<State, Action, Query, El extends HTMLElement>\n  extends BaseHTMLBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _attributes: Record<string, DerivedOrLiteralValue<State, string>> = {}\n  private _styles: Record<string, DerivedOrLiteralValue<State, string>> = {}\n  private _handlers: Record<string, EventHandler<State, Action>> = {}\n  private _lifecycle: MakeLifecycle<State, Action> | undefined\n  private _respond:\n    | ((query: Query, el: El, ctx: DOMContext<Action>) => void)\n    | undefined\n\n  constructor(public tagName: string) {\n    super()\n  }\n\n  build(): DOMElement<State, Action, Query> {\n    return new DOMElement<State, Action, Query>(\n      makeCreateElement(this.tagName),\n      extractLiterals(this._attributes),\n      extractDerived(this._attributes),\n      extractLiterals(this._styles),\n      extractDerived(this._styles),\n      keys(this._handlers).map(name => ({\n        name,\n        callback: this._handlers[name]\n      })),\n      this._lifecycle ?? makeEmptyLifecycle,\n      (this._respond as (\n        query: Query,\n        el: any,\n        ctx: DOMContext<Action>\n      ) => {}) ?? ((query: Query, el: El, ctx: DOMContext<Action>) => {}), // TODO better typing needed\n      this._children\n    )\n  }\n\n  // attributes, styles and handlers\n  attr(name: string, value: Attribute<State, string>): this {\n    if (value != null) {\n      this._attributes[name] = value as DerivedOrLiteralValue<State, string>\n    }\n    return this\n  }\n  style(name: string, value: Attribute<State, string>): this {\n    if (value != null) {\n      this._styles[name] = value as DerivedOrLiteralValue<State, string>\n    }\n    return this\n  }\n  handle(name: string, callback: EventHandler<State, Action> | undefined) {\n    if (callback != null) {\n      this._handlers[name] = callback\n    }\n    return this\n  }\n  Lifecycle(makeLifecycle: MakeLifecycle<State, Action>): this {\n    this._lifecycle = makeLifecycle\n    return this\n  }\n  Respond(\n    response: (query: Query, el: El, ctx: DOMContext<Action>) => void\n  ): this {\n    this._respond = response\n    return this\n  }\n\n  // attribute shortcuts\n  accessKey(value: Attribute<State, string>) {\n    return this.attr('accesskey', value)\n  }\n  aria(name: string, value: Attribute<State, string>) {\n    return this.attr(`aria-${name}`, value)\n  }\n  class(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('class', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  contentEditable(value: Attribute<State, boolean>) {\n    return this.attr('contenteditable', mapAttribute(value, booleanToString))\n  }\n  data(name: string, value: Attribute<State, string>) {\n    return this.attr(`data-${name}`, value)\n  }\n  dir(value: Attribute<State, 'ltr' | 'rtl' | 'auto'>) {\n    return this.attr('role', value)\n  }\n  draggable(value: Attribute<State, boolean>) {\n    return this.attr('draggable', mapAttribute(value, booleanToString))\n  }\n  hidden(value: Attribute<State, boolean>) {\n    return this.attr('hidden', mapAttribute(value, toggleToString('hidden')))\n  }\n  id(value: Attribute<State, string>) {\n    return this.attr('id', value)\n  }\n  inputMode(\n    value: Attribute<\n      State,\n      | 'none'\n      | 'text'\n      | 'decimal'\n      | 'numeric'\n      | 'tel'\n      | 'search'\n      | 'email'\n      | 'url'\n    >\n  ) {\n    return this.attr('inputmode', value)\n  }\n  is(value: Attribute<State, string>) {\n    return this.attr('is', value)\n  }\n  itemId(value: Attribute<State, string>) {\n    return this.attr('itemid', value)\n  }\n  itemProp(value: Attribute<State, string>) {\n    return this.attr('itemprop', value)\n  }\n  itemRef(value: Attribute<State, string>) {\n    return this.attr('itemref', value)\n  }\n  itemScope(value: Attribute<State, string>) {\n    return this.attr('itemscope', value)\n  }\n  itemType(value: Attribute<State, string>) {\n    return this.attr('itemtype', value)\n  }\n  lang(value: Attribute<State, string>) {\n    return this.attr('lang', value)\n  }\n  part(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('part', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  role(value: Attribute<State, AriaRole>) {\n    return this.attr('role', value)\n  }\n  slot(value: Attribute<State, string>) {\n    return this.attr('slot', value)\n  }\n  spellCheck(value: Attribute<State, boolean>) {\n    return this.attr('spellcheck', mapAttribute(value, booleanToString))\n  }\n  styles(value: Attribute<State, string | Record<string, string>>) {\n    return this.attr('style', mapAttribute(value, stylesToString))\n  }\n  tabIndex(value: Attribute<State, number>) {\n    return this.attr('tabindex', mapAttribute(value, String))\n  }\n  title(value: Attribute<State, string>) {\n    return this.attr('title', value)\n  }\n\n  // aria\n  ariaActiveDescendant(value: Attribute<State, string>) {\n    return this.attr('aria-activedescendant', value)\n  }\n  ariaAtomic(value: Attribute<State, boolean>) {\n    return this.attr('aria-atomic', mapAttribute(value, booleanToString))\n  }\n  ariaAutocomplete(\n    value: Attribute<State, 'inline' | 'list' | 'both' | 'none'>\n  ) {\n    return this.attr('aria-autocomplete', value)\n  }\n  ariaBusy(value: Attribute<State, boolean>) {\n    return this.attr('aria-busy', mapAttribute(value, booleanToString))\n  }\n  ariaChecked(\n    value: Attribute<State, 'true' | 'false' | 'mixed' | true | false>\n  ) {\n    return this.attr(\n      'aria-checked',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaColCount(value: Attribute<State, number>) {\n    return this.attr('aria-colcount', mapAttribute(value, String))\n  }\n  ariaColIndex(value: Attribute<State, number>) {\n    return this.attr('aria-colindex', mapAttribute(value, String))\n  }\n  ariaColSpan(value: Attribute<State, number>) {\n    return this.attr('aria-colspan', mapAttribute(value, String))\n  }\n  ariaControls(value: Attribute<State, string>) {\n    return this.attr('aria-controls', value)\n  }\n  ariaCurrent(\n    value: Attribute<\n      State,\n      | 'page'\n      | 'step'\n      | 'location'\n      | 'date'\n      | 'time'\n      | 'true'\n      | 'false'\n      | true\n      | false\n    >\n  ) {\n    return this.attr(\n      'aria-current',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaDescribedBy(value: Attribute<State, string>) {\n    return this.attr('aria-describedby', value)\n  }\n  ariaDetails(value: Attribute<State, string>) {\n    return this.attr('aria-details', value)\n  }\n  ariaDisabled(value: Attribute<State, boolean>) {\n    return this.attr('aria-disabled', mapAttribute(value, booleanToString))\n  }\n  ariaDropEffect(\n    value: Attribute<\n      State,\n      'copy' | 'execute' | 'link' | 'move' | 'none' | 'popup'\n    >\n  ) {\n    return this.attr('aria-dropeffect', value)\n  }\n  ariaErrorMessage(\n    value: Attribute<\n      State,\n      'grammar' | 'false' | false | 'spelling' | 'true' | true\n    >\n  ) {\n    return this.attr(\n      'aria-errormessage',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaExpanded(value: Attribute<State, boolean>) {\n    return this.attr('aria-expanded', mapAttribute(value, booleanToString))\n  }\n  ariaFlowTo(value: Attribute<State, string>) {\n    return this.attr('aria-flowto', value)\n  }\n  ariaGrabbed(value: Attribute<State, boolean>) {\n    return this.attr('aria-grabbed', mapAttribute(value, booleanToString))\n  }\n  ariaHasPopup(\n    value: Attribute<\n      State,\n      | 'true'\n      | 'false'\n      | 'menu'\n      | 'listbox'\n      | 'tree'\n      | 'grid'\n      | 'dialog'\n      | true\n      | false\n    >\n  ) {\n    return this.attr(\n      'aria-haspopup',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaHidden(value: Attribute<State, boolean>) {\n    return this.attr('aria-hidden', mapAttribute(value, booleanToString))\n  }\n  ariaInvalid(value: Attribute<State, string>) {\n    return this.attr('aria-invalid', value)\n  }\n  ariaKeyShortcuts(value: Attribute<State, string>) {\n    return this.attr('aria-keyshortcuts', value)\n  }\n  ariaLabel(value: Attribute<State, string>) {\n    return this.attr('aria-label', value)\n  }\n  ariaLabelledBy(value: Attribute<State, string>) {\n    return this.attr('aria-labelledby', value)\n  }\n  ariaLevel(value: Attribute<State, number>) {\n    return this.attr('aria-level', mapAttribute(value, String))\n  }\n  ariaLive(value: Attribute<State, 'assertive' | 'off' | 'polite'>) {\n    return this.attr('aria-live', value)\n  }\n  ariaModal(value: Attribute<State, boolean>) {\n    return this.attr('aria-modal', mapAttribute(value, booleanToString))\n  }\n  ariaMultiLine(value: Attribute<State, boolean>) {\n    return this.attr('aria-multiline', mapAttribute(value, booleanToString))\n  }\n  ariaMultiSelectable(value: Attribute<State, boolean>) {\n    return this.attr(\n      'aria-multiselectable',\n      mapAttribute(value, booleanToString)\n    )\n  }\n  ariaOrientation(value: Attribute<State, 'horizontal' | 'vertical'>) {\n    return this.attr('aria-orientation', value)\n  }\n  ariaOwns(value: Attribute<State, string>) {\n    return this.attr('aria-owns', value)\n  }\n  ariaPlaceHolder(value: Attribute<State, string>) {\n    return this.attr('aria-placeholder', value)\n  }\n  ariaPointSet(value: Attribute<State, number>) {\n    return this.attr('aria-pointset', mapAttribute(value, String))\n  }\n  ariaPosInSet(value: Attribute<State, string>) {\n    return this.attr('aria-posinset', value)\n  }\n  ariaPressed(\n    value: Attribute<State, 'true' | 'false' | 'mixed' | true | false>\n  ) {\n    return this.attr(\n      'aria-pressed',\n      mapAttribute(value, v =>\n        v === true ? 'true' : v === false ? 'false' : v\n      )\n    )\n  }\n  ariaReadonly(value: Attribute<State, boolean>) {\n    return this.attr('aria-readonly', mapAttribute(value, booleanToString))\n  }\n  ariaRequired(value: Attribute<State, boolean>) {\n    return this.attr('aria-required', mapAttribute(value, booleanToString))\n  }\n  ariaRelevant(\n    value: Attribute<\n      State,\n      'addition' | 'additions text' | 'all' | 'removals' | 'text'\n    >\n  ) {\n    return this.attr('aria-relevant', value)\n  }\n  ariaRoleDescription(value: Attribute<State, string>) {\n    return this.attr('aria-roledescription', value)\n  }\n  ariaRowCount(value: Attribute<State, number>) {\n    return this.attr('aria-rowcount', mapAttribute(value, String))\n  }\n  ariaRowIndex(value: Attribute<State, number>) {\n    return this.attr('aria-rowindex', mapAttribute(value, String))\n  }\n  ariaRowSpan(value: Attribute<State, number>) {\n    return this.attr('aria-rowspan', mapAttribute(value, String))\n  }\n  ariaSelected(value: Attribute<State, boolean>) {\n    return this.attr('aria-selected', mapAttribute(value, booleanToString))\n  }\n  ariaSetSize(value: Attribute<State, number>) {\n    return this.attr('aria-setsize', mapAttribute(value, String))\n  }\n  ariaSort(\n    value: Attribute<State, 'ascending' | 'descending' | 'none' | 'other'>\n  ) {\n    return this.attr('aria-sort', value)\n  }\n  ariaValueMax(value: Attribute<State, number>) {\n    return this.attr('aria-valuemax', mapAttribute(value, String))\n  }\n  ariaValueMin(value: Attribute<State, number>) {\n    return this.attr('aria-valuemin', mapAttribute(value, String))\n  }\n  ariaValueNow(value: Attribute<State, number>) {\n    return this.attr('aria-valuenow', mapAttribute(value, String))\n  }\n  ariaValueText(value: Attribute<State, string>) {\n    return this.attr('aria-valuetext', value)\n  }\n\n  // event shortcuts\n  onAbort(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('abort', handler as EventHandler<State, Action>)\n  }\n  onAutoComplete(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('autocomplete', handler as EventHandler<State, Action>)\n  }\n  onAutoCompleteError(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle(\n      'autocompleteerror',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onBlur(handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined) {\n    return this.handle('blur', handler as EventHandler<State, Action>)\n  }\n  onCancel(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('cancel', handler as EventHandler<State, Action>)\n  }\n  onChange(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('change', handler as EventHandler<State, Action>)\n  }\n  onClick(handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined) {\n    return this.handle('click', handler as EventHandler<State, Action>)\n  }\n  onCompositionEnd(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle('compositionend', handler as EventHandler<State, Action>)\n  }\n  onCompositionStart(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle(\n      'compositionstart',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onCompositionUpdate(\n    handler: EventHandlerTE<State, Action, CompositionEvent, El> | undefined\n  ) {\n    return this.handle(\n      'compositionupdate',\n      handler as EventHandler<State, Action>\n    )\n  }\n  onContextMenu(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('contextmenu', handler as EventHandler<State, Action>)\n  }\n  onDblClick(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('dblclick', handler as EventHandler<State, Action>)\n  }\n  onDrag(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('drag', handler as EventHandler<State, Action>)\n  }\n  onDragEnd(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('dragend', handler as EventHandler<State, Action>)\n  }\n  onDragEnter(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragenter', handler as EventHandler<State, Action>)\n  }\n  onDragExit(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragexit', handler as EventHandler<State, Action>)\n  }\n  onDragLeave(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragleave', handler as EventHandler<State, Action>)\n  }\n  onDragOver(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragover', handler as EventHandler<State, Action>)\n  }\n  onDragStart(\n    handler: EventHandlerTE<State, Action, DragEvent, El> | undefined\n  ) {\n    return this.handle('dragstart', handler as EventHandler<State, Action>)\n  }\n  onDrop(handler: EventHandlerTE<State, Action, DragEvent, El> | undefined) {\n    return this.handle('drop', handler as EventHandler<State, Action>)\n  }\n  onError(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('error', handler as EventHandler<State, Action>)\n  }\n  onFocus(handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined) {\n    return this.handle('focus', handler as EventHandler<State, Action>)\n  }\n  onFocusIn(\n    handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined\n  ) {\n    return this.handle('focusin', handler as EventHandler<State, Action>)\n  }\n  onFocusOut(\n    handler: EventHandlerTE<State, Action, FocusEvent, El> | undefined\n  ) {\n    return this.handle('focusout', handler as EventHandler<State, Action>)\n  }\n  onInput(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('input', handler as EventHandler<State, Action>)\n  }\n  onInvalid(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('invalid', handler as EventHandler<State, Action>)\n  }\n  onKeyDown(\n    handler: EventHandlerTE<State, Action, KeyboardEvent, El> | undefined\n  ) {\n    return this.handle('keydown', handler as EventHandler<State, Action>)\n  }\n  onKeyUp(\n    handler: EventHandlerTE<State, Action, KeyboardEvent, El> | undefined\n  ) {\n    return this.handle('keyup', handler as EventHandler<State, Action>)\n  }\n  onLoad(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('load', handler as EventHandler<State, Action>)\n  }\n  onMouseDown(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mousedown', handler as EventHandler<State, Action>)\n  }\n  onMouseEnter(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseenter', handler as EventHandler<State, Action>)\n  }\n  onMouseLeave(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseleave', handler as EventHandler<State, Action>)\n  }\n  onMouseMove(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mousemove', handler as EventHandler<State, Action>)\n  }\n  onMouseOut(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseout', handler as EventHandler<State, Action>)\n  }\n  onMouseOver(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseover', handler as EventHandler<State, Action>)\n  }\n  onMouseUp(\n    handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined\n  ) {\n    return this.handle('mouseup', handler as EventHandler<State, Action>)\n  }\n  onReset(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('reset', handler as EventHandler<State, Action>)\n  }\n  onScroll(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('scroll', handler as EventHandler<State, Action>)\n  }\n  onSelect(handler: EventHandlerTE<State, Action, UIEvent, El> | undefined) {\n    return this.handle('select', handler as EventHandler<State, Action>)\n  }\n  onShow(handler: EventHandlerTE<State, Action, MouseEvent, El> | undefined) {\n    return this.handle('show', handler as EventHandler<State, Action>)\n  }\n  onSubmit(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('submit', handler as EventHandler<State, Action>)\n  }\n  onTouchCancel(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchcancel', handler as EventHandler<State, Action>)\n  }\n  onTouchEnd(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchend', handler as EventHandler<State, Action>)\n  }\n  onTouchMove(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchmove', handler as EventHandler<State, Action>)\n  }\n  onTouchStart(\n    handler: EventHandlerTE<State, Action, TouchEvent, El> | undefined\n  ) {\n    return this.handle('touchstart', handler as EventHandler<State, Action>)\n  }\n  onWheel(handler: EventHandlerTE<State, Action, WheelEvent, El> | undefined) {\n    return this.handle('wheel', handler as EventHandler<State, Action>)\n  }\n}\n\nfunction initBuilder<\n  T extends IBuilder<any, any, any>,\n  P extends BaseHTMLBuilder<any, any, any>\n>(builder: T, init: undefined | ((builder: T) => void), parent: P): P {\n  init && init(builder)\n  return parent.Append(builder.build())\n}\n\nexport type PreloadValue = 'none' | 'metadata' | 'auto'\n\nexport class HTMLMediaElementBuilder<\n  State,\n  Action,\n  Query,\n  El extends HTMLMediaElement\n> extends HTMLElementBuilder<State, Action, Query, El> {\n  autoPlay(value: Attribute<State, boolean>): this {\n    return this.attr(\n      'autoplay',\n      mapAttribute(value, toggleToString('autoplay'))\n    )\n  }\n  controls(value: Attribute<State, boolean>): this {\n    return this.attr(\n      'controls',\n      mapAttribute(value, toggleToString('controls'))\n    )\n  }\n  crossOrigin(value: Attribute<State, CrossOriginValue>) {\n    return this.attr('crossorigin', value)\n  }\n  loop(value: Attribute<State, boolean>): this {\n    return this.attr('loop', mapAttribute(value, toggleToString('loop')))\n  }\n  muted(value: Attribute<State, boolean>): this {\n    return this.attr('muted', mapAttribute(value, toggleToString('muted')))\n  }\n  preload(value: Attribute<State, PreloadValue>) {\n    return this.attr('preload', value)\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n\n  onAbortMedia(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('abort', handler as EventHandler<State, Action>)\n  }\n  onCanPlay(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('canplay', handler as EventHandler<State, Action>)\n  }\n  onCanPlayThrough(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('canplaythrough', handler as EventHandler<State, Action>)\n  }\n  onComplete(\n    handler:\n      | EventHandlerTE<State, Action, OfflineAudioCompletionEvent, El>\n      | undefined\n  ) {\n    return this.handle('complete', handler as EventHandler<State, Action>)\n  }\n  onDurationChange(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('durationchange', handler as EventHandler<State, Action>)\n  }\n  onEmptied(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('emptied', handler as EventHandler<State, Action>)\n  }\n  onEnded(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('ended', handler as EventHandler<State, Action>)\n  }\n  onLoadedData(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('loadeddata', handler as EventHandler<State, Action>)\n  }\n  onLoadedMetadata(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('loadedmetadata', handler as EventHandler<State, Action>)\n  }\n  onPause(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('pause', handler as EventHandler<State, Action>)\n  }\n  onPlay(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('play', handler as EventHandler<State, Action>)\n  }\n  onPlaying(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('playing', handler as EventHandler<State, Action>)\n  }\n  onSeeked(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('seeked', handler as EventHandler<State, Action>)\n  }\n  onSeeking(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('seeking', handler as EventHandler<State, Action>)\n  }\n  onStalled(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('stalled', handler as EventHandler<State, Action>)\n  }\n  onSuspend(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('suspend', handler as EventHandler<State, Action>)\n  }\n  onTimeUpdate(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('timeupdate', handler as EventHandler<State, Action>)\n  }\n  onVolumeChange(\n    handler: EventHandlerTE<State, Action, Event, El> | undefined\n  ) {\n    return this.handle('volumechange', handler as EventHandler<State, Action>)\n  }\n  onWaiting(handler: EventHandlerTE<State, Action, Event, El> | undefined) {\n    return this.handle('waiting', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class HTMLAnchorElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLAnchorElement> {\n  download(filename: Attribute<State, string>): this {\n    return this.attr('download', filename)\n  }\n  href(url: Attribute<State, string>): this {\n    return this.attr('href', url)\n  }\n  hreflang(lang: Attribute<State, string>): this {\n    return this.attr('hreflang', lang)\n  }\n  ping(url: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr('ping', mapAttribute(url, listOrRecordToSpaceSeparated))\n  }\n  rel(value: Attribute<State, ListOrRecordValue<string>>): this {\n    return this.attr('rel', mapAttribute(value, listOrRecordToSpaceSeparated))\n  }\n  target(name: Attribute<State, string>): this {\n    return this.attr('target', name)\n  }\n  type(name: Attribute<State, string>): this {\n    return this.attr('type', name)\n  }\n}\n\nexport class HTMLAreaElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLAreaElement> {\n  alt(name: Attribute<State, string>): this {\n    return this.attr('alt', name)\n  }\n  coords(name: Attribute<State, string>): this {\n    return this.attr('coords', name)\n  }\n  download(name: Attribute<State, string>): this {\n    return this.attr('download', name)\n  }\n  href(name: Attribute<State, string>): this {\n    return this.attr('href', name)\n  }\n  hreflang(name: Attribute<State, string>): this {\n    return this.attr('hreflang', name)\n  }\n  ping(name: Attribute<State, string>): this {\n    return this.attr('ping', name)\n  }\n  rel(name: Attribute<State, string>): this {\n    return this.attr('rel', name)\n  }\n  shape(name: Attribute<State, 'rect' | 'circle' | 'poly' | 'default'>): this {\n    return this.attr('shape', name)\n  }\n  target(name: Attribute<State, string>): this {\n    return this.attr('target', name)\n  }\n}\n\nexport class HTMLAudioElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLMediaElementBuilder<State, Action, Query, HTMLAudioElement> {}\n\nexport class HTMLBaseElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLBaseElement> {\n  href(name: Attribute<State, string>): this {\n    return this.attr('href', name)\n  }\n  target(name: Attribute<State, string>): this {\n    return this.attr('target', name)\n  }\n}\n\nexport type FormEncTypeValue =\n  | 'application/x-www-form-urlencoded'\n  | 'multipart/form-data'\n  | 'text/plain'\n\nexport type FormMethodValue = 'post' | 'get' | 'dialog'\n\nexport class HTMLButtonElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLButtonElement> {\n  autofocus(value: Attribute<State, boolean>) {\n    return this.attr(\n      'autofocus',\n      mapAttribute(value, toggleToString('autofocus'))\n    )\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  formAction(value: Attribute<State, string>) {\n    return this.attr('formaction', value)\n  }\n  formEncType(value: Attribute<State, FormEncTypeValue>) {\n    return this.attr('formenctype', value)\n  }\n  formMethod(value: Attribute<State, FormMethodValue>) {\n    return this.attr('formmethod', value)\n  }\n  formNoValidate(value: Attribute<State, boolean>) {\n    return this.attr(\n      'formnovalidate',\n      mapAttribute(value, toggleToString('formnovalidate'))\n    )\n  }\n  formTarget(value: Attribute<State, string>) {\n    return this.attr('formtarget', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  type(value: Attribute<State, 'submit' | 'reset' | 'button'>) {\n    return this.attr('type', value)\n  }\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLCanvasElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLCanvasElement> {\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLDataElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLDataElement> {\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLDetailsElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLDetailsElement> {\n  open(value: Attribute<State, boolean>) {\n    return this.attr('open', mapAttribute(value, toggleToString('open')))\n  }\n}\n\nexport class HTMLDialogElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLDialogElement> {\n  open(value: Attribute<State, boolean>) {\n    return this.attr('open', mapAttribute(value, toggleToString('open')))\n  }\n}\n\nexport class HTMLEmbedElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLEmbedElement> {\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLFieldSetElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLFieldSetElement> {\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n}\n\nexport class HTMLFormElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLFormElement> {\n  acceptCharset(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'accept-charset',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  action(value: Attribute<State, string>) {\n    return this.attr('action', value)\n  }\n  autoComplete(value: Attribute<State, 'on' | 'off'>) {\n    return this.attr('autocomplete', value)\n  }\n  encType(value: Attribute<State, FormEncTypeValue>) {\n    return this.attr('enctype', value)\n  }\n  method(value: Attribute<State, FormMethodValue>) {\n    return this.attr('method', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  noValidate(value: Attribute<State, boolean>) {\n    return this.attr(\n      'novalidate',\n      mapAttribute(value, toggleToString('novalidate'))\n    )\n  }\n  rel(value: Attribute<State, string>) {\n    return this.attr('rel', value)\n  }\n  target(value: Attribute<State, string>) {\n    return this.attr('target', value)\n  }\n}\n\nexport class HTMLHtmlElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLHtmlElement> {\n  xmlns(value: Attribute<State, string>) {\n    return this.attr('xmlns', value)\n  }\n}\n\nexport class HTMLIFrameElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLIFrameElement> {\n  allow(value: Attribute<State, string>) {\n    return this.attr('allow', value)\n  }\n  allowfullscreen(value: Attribute<State, boolean>) {\n    return this.attr('allowfullscreen', mapAttribute(value, booleanToString))\n  }\n  allowpaymentrequest(value: Attribute<State, boolean>) {\n    return this.attr(\n      'allowpaymentrequest',\n      mapAttribute(value, booleanToString)\n    )\n  }\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  referrerpolicy(\n    value: Attribute<\n      State,\n      | 'no-referrer'\n      | 'no-referrer-when-downgrade'\n      | 'origin'\n      | 'origin-when-cross-origin'\n      | 'same-origin'\n      | 'strict-origin'\n      | 'strict-origin-when-cross-origin'\n      | 'unsafe-url'\n    >\n  ) {\n    return this.attr('referrerpolicy', value)\n  }\n  sandbox(\n    value: Attribute<\n      State,\n      | 'allow-forms'\n      | 'allow-modals'\n      | 'allow-orientation-lock'\n      | 'allow-pointer-lock'\n      | 'allow-popups'\n      | 'allow-popups-to-escape-sandbox'\n      | 'allow-presentation'\n      | 'allow-same-origin'\n      | 'allow-scripts'\n      | 'allow-top-navigation'\n      | 'allow-top-navigation-by-user-activation'\n    >\n  ) {\n    return this.attr('sandbox', value)\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  srcdoc(value: Attribute<State, string>) {\n    return this.attr('srcdoc', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport type CrossOriginValue = 'anonymous' | 'use-credentials'\n\nexport class HTMLImageElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLImageElement> {\n  alt(value: Attribute<State, string>) {\n    return this.attr('alt', value)\n  }\n  crossOrigin(value: Attribute<State, CrossOriginValue>) {\n    return this.attr('crossorigin', value)\n  }\n  decoding(value: Attribute<State, 'sync' | 'async' | 'auto'>) {\n    return this.attr('decoding', value)\n  }\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  ismap(value: Attribute<State, boolean>) {\n    return this.attr('ismap', mapAttribute(value, toggleToString('ismap')))\n  }\n  loading(value: Attribute<State, 'eager' | 'lazy'>) {\n    return this.attr('loading', value)\n  }\n  sizes(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('sizes', mapAttribute(value, lostOrRecordToCommaSeparated))\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  srcset(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'srcset',\n      mapAttribute(value, lostOrRecordToCommaSeparated)\n    )\n  }\n  usemap(value: Attribute<State, string>) {\n    return this.attr('usemap', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport type AutoCompleteValue =\n  | 'on'\n  | 'off'\n  | 'name'\n  | 'honorific-prefix'\n  | 'given-name'\n  | 'additional-name'\n  | 'family-name'\n  | 'honorific-suffix'\n  | 'nickname'\n  | 'email'\n  | 'username'\n  | 'new-password'\n  | 'current-password'\n  | 'one-time-code'\n  | 'organization-title'\n  | 'organization'\n  | 'street-address'\n  | 'address-line1'\n  | 'address-line2'\n  | 'address-line3'\n  | 'address-level4'\n  | 'address-level3'\n  | 'address-level2'\n  | 'address-level1'\n  | 'country'\n  | 'country-name'\n  | 'postal-code'\n  | 'cc-name'\n  | 'cc-given-name'\n  | 'cc-additional-name'\n  | 'cc-family-name'\n  | 'cc-number'\n  | 'cc-exp'\n  | 'cc-exp-month'\n  | 'cc-exp-year'\n  | 'cc-csc'\n  | 'cc-type'\n  | 'transaction-currency'\n  | 'transaction-amount'\n  | 'language'\n  | 'bday'\n  | 'bday-day'\n  | 'bday-month'\n  | 'bday-year'\n  | 'sex'\n  | 'tel'\n  | 'tel-country-code'\n  | 'tel-national'\n  | 'tel-area-code'\n  | 'tel-local'\n  | 'tel-extension'\n  | 'impp'\n  | 'url'\n  | 'photo'\n\nexport type InputTypeValue =\n  | 'button'\n  | 'checkbox'\n  | 'color'\n  | 'date'\n  | 'datetime-local'\n  | 'email'\n  | 'file'\n  | 'hidden'\n  | 'image'\n  | 'month'\n  | 'number'\n  | 'password'\n  | 'radio'\n  | 'range'\n  | 'reset'\n  | 'search'\n  | 'submit'\n  | 'tel'\n  | 'text'\n  | 'time'\n  | 'url'\n  | 'week'\n\nexport class HTMLInputElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLInputElement> {\n  type(value: Attribute<State, InputTypeValue>) {\n    return this.attr('type', value)\n  }\n  autoComplete(value: Attribute<State, ListOrRecordValue<AutoCompleteValue>>) {\n    return this.attr(\n      'autocomplete',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  autoFocus(value: Attribute<State, boolean>) {\n    return this.attr(\n      'autofocus',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  list(value: Attribute<State, string>) {\n    return this.attr('list', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  readonly(value: Attribute<State, boolean>) {\n    return this.attr(\n      'readonly',\n      mapAttribute(value, toggleToString('readonly'))\n    )\n  }\n  required(value: Attribute<State, boolean>) {\n    return this.attr(\n      'required',\n      mapAttribute(value, toggleToString('required'))\n    )\n  }\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLInputCheckedElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  checked(value: Attribute<State, boolean>) {\n    return this.attr('checked', mapAttribute(value, toggleToString('checked')))\n  }\n}\n\nexport class HTMLInputDateElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  max(value: Attribute<State, string>) {\n    return this.attr('max', value)\n  }\n  min(value: Attribute<State, string>) {\n    return this.attr('min', value)\n  }\n  step(value: Attribute<State, number>) {\n    return this.attr('step', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputEmailElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  multiple(value: Attribute<State, boolean>) {\n    return this.attr(\n      'multiple',\n      mapAttribute(value, toggleToString('multiple'))\n    )\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputFileElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  accept(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'accept',\n      mapAttribute(value, lostOrRecordToCommaSeparated)\n    )\n  }\n  capture(value: Attribute<State, string>) {\n    return this.attr('capture', value)\n  }\n  multiple(value: Attribute<State, boolean>) {\n    return this.attr(\n      'multiple',\n      mapAttribute(value, toggleToString('multiple'))\n    )\n  }\n}\n\nexport class HTMLInputImageElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  alt(value: Attribute<State, string>) {\n    return this.attr('alt', value)\n  }\n  formAction(value: Attribute<State, string>) {\n    return this.attr('formaction', value)\n  }\n  formEncType(value: Attribute<State, FormEncTypeValue>) {\n    return this.attr('formenctype', value)\n  }\n  formMethod(value: Attribute<State, FormMethodValue>) {\n    return this.attr('formmethod', value)\n  }\n  formValidate(value: Attribute<State, string>) {\n    return this.attr('formvalidate', value)\n  }\n  formTarget(value: Attribute<State, string>) {\n    return this.attr('formtarget', value)\n  }\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputNumberElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  max(value: Attribute<State, number>) {\n    return this.attr('max', mapAttribute(value, String))\n  }\n  min(value: Attribute<State, number>) {\n    return this.attr('min', mapAttribute(value, String))\n  }\n  step(value: Attribute<State, number>) {\n    return this.attr('step', mapAttribute(value, String))\n  }\n  value(value: Attribute<State, string | number>) {\n    return this.attr('value', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputPasswordElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  pattern(value: Attribute<State, string>) {\n    return this.attr('pattern', value)\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputSearchElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  dirname(value: Attribute<State, string>) {\n    return this.attr('dirname', value)\n  }\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n}\n\nexport class HTMLInputSubmitElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  formAction(value: Attribute<State, string>) {\n    return this.attr('formaction', value)\n  }\n  formEncType(value: Attribute<State, FormEncTypeValue>) {\n    return this.attr('formenctype', value)\n  }\n  formMethod(value: Attribute<State, FormMethodValue>) {\n    return this.attr('formmethod', value)\n  }\n  formValidate(value: Attribute<State, boolean>) {\n    return this.attr(\n      'formvalidate',\n      mapAttribute(value, toggleToString('formvalidate'))\n    )\n  }\n  formTarget(value: Attribute<State, string>) {\n    return this.attr('formtarget', value)\n  }\n}\n\nexport class HTMLInputTelElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  pattern(value: Attribute<State, string>) {\n    return this.attr('pattern', value)\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class InputTextElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  dirname(value: Attribute<State, string>) {\n    return this.attr('dirname', value)\n  }\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  pattern(value: Attribute<State, string>) {\n    return this.attr('pattern', value)\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLInputUrlElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLInputElementBuilder<State, Action, Query> {\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n}\n\nexport class HTMLLabelElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLLabelElement> {\n  for(value: DerivedOrLiteralValue<State, string>) {\n    return this.attr('for', value)\n  }\n}\n\nexport class HTMLLIElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLLIElement> {\n  value(value: DerivedOrLiteralValue<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLLinkElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLLinkElement> {\n  as(\n    value: DerivedOrLiteralValue<\n      State,\n      | 'audio'\n      | 'document'\n      | 'embed'\n      | 'fetch'\n      | 'font'\n      | 'image'\n      | 'object'\n      | 'script'\n      | 'style'\n      | 'track'\n      | 'video'\n      | 'worker'\n    >\n  ) {\n    return this.attr('as', value)\n  }\n  crossOrigin(value: Attribute<State, CrossOriginValue>) {\n    return this.attr('crossorigin', value)\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  href(value: Attribute<State, string>) {\n    return this.attr('href', value)\n  }\n  hreflang(value: Attribute<State, string>) {\n    return this.attr('hreflang', value)\n  }\n  media(value: Attribute<State, string>) {\n    return this.attr('media', value)\n  }\n  rel(value: Attribute<State, string>) {\n    return this.attr('rel', value)\n  }\n  sizes(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('sizes', mapAttribute(value, lostOrRecordToCommaSeparated))\n  }\n  title(value: Attribute<State, string>) {\n    return this.attr('title', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n}\n\nexport class HTMLMapElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLMapElement> {\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n}\n\nexport type HttpEquivValue =\n  | 'content-security-policy'\n  | 'content-type'\n  | 'default-style'\n  | 'x-ua-compatible'\n  | 'refresh'\n\nexport class HTMLMetaElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLMetaElement> {\n  charset(value: Attribute<State, string>) {\n    return this.attr('charset', value)\n  }\n  content(value: Attribute<State, string>) {\n    return this.attr('content', value)\n  }\n  httpEquiv(value: Attribute<State, HttpEquivValue>) {\n    return this.attr('http-equiv', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n}\n\nexport class HTMLMeterElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLMeterElement> {\n  form(value: Attribute<State, string>) {\n    return this.attr('step', value)\n  }\n  high(value: Attribute<State, number>) {\n    return this.attr('high', mapAttribute(value, String))\n  }\n  low(value: Attribute<State, number>) {\n    return this.attr('low', mapAttribute(value, String))\n  }\n  max(value: Attribute<State, number>) {\n    return this.attr('max', mapAttribute(value, String))\n  }\n  min(value: Attribute<State, number>) {\n    return this.attr('min', mapAttribute(value, String))\n  }\n  optimum(value: Attribute<State, number>) {\n    return this.attr('optimum', mapAttribute(value, String))\n  }\n  value(value: Attribute<State, number>) {\n    return this.attr('value', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLModElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLModElement> {\n  cite(value: Attribute<State, string>) {\n    return this.attr('cite', value)\n  }\n  dateTime(value: Attribute<State, string>) {\n    return this.attr('datetime', value)\n  }\n}\n\nexport class HTMLObjectElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLObjectElement> {\n  data(value: Attribute<State, string>) {\n    return this.attr('data', value)\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n  typemustmatch(value: Attribute<State, string>) {\n    return this.attr('typemustmatch', value)\n  }\n  usemap(value: Attribute<State, string>) {\n    return this.attr('usemap', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\nexport type OLTypeValue = 'a' | 'A' | 'i' | 'I' | '1' | 1\n\nexport class HTMLOListElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLOListElement> {\n  reversed(value: Attribute<State, boolean>) {\n    return this.attr(\n      'reversed',\n      mapAttribute(value, toggleToString('reversed'))\n    )\n  }\n  start(value: Attribute<State, number>) {\n    return this.attr('start', mapAttribute(value, String))\n  }\n  type(value: Attribute<State, OLTypeValue>) {\n    return this.attr('type', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLOptGroupElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLOptGroupElement> {\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  label(value: Attribute<State, string>) {\n    return this.attr('label', value)\n  }\n}\n\nexport class HTMLOptionElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLOptionElement> {\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  label(value: Attribute<State, string>) {\n    return this.attr('label', value)\n  }\n  selected(value: Attribute<State, boolean>) {\n    return this.attr(\n      'selected',\n      mapAttribute(value, toggleToString('selected'))\n    )\n  }\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLOutputElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLOutputElement> {\n  for(value: Attribute<State, string>) {\n    return this.attr('for', value)\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n}\n\nexport class HTMLParamElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLParamElement> {\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  value(value: Attribute<State, string>) {\n    return this.attr('value', value)\n  }\n}\n\nexport class HTMLPictureElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLPictureElement> {\n  // This element includes only global attributes.\n}\n\nexport class HTMLProgressElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLProgressElement> {\n  max(value: Attribute<State, number>) {\n    return this.attr('max', mapAttribute(value, String))\n  }\n  value(value: Attribute<State, number>) {\n    return this.attr('value', mapAttribute(value, String))\n  }\n  onLoadEnd(\n    handler:\n      | EventHandlerTE<State, Action, ProgressEvent, HTMLProgressElement>\n      | undefined\n  ) {\n    return this.handle('loaddnd', handler as EventHandler<State, Action>)\n  }\n  onLoadStart(\n    handler:\n      | EventHandlerTE<State, Action, ProgressEvent, HTMLProgressElement>\n      | undefined\n  ) {\n    return this.handle('loadstart', handler as EventHandler<State, Action>)\n  }\n  onProgress(\n    handler:\n      | EventHandlerTE<State, Action, ProgressEvent, HTMLProgressElement>\n      | undefined\n  ) {\n    return this.handle('progress', handler as EventHandler<State, Action>)\n  }\n  onRateChange(\n    handler:\n      | EventHandlerTE<State, Action, PointerEvent, HTMLProgressElement>\n      | undefined\n  ) {\n    return this.handle('ratechange', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class HTMLQuoteElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLQuoteElement> {\n  cite(value: Attribute<State, string>) {\n    return this.attr('cite', value)\n  }\n}\n\nexport class HTMLScriptElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLScriptElement> {\n  async(value: Attribute<State, boolean>) {\n    return this.attr('async', mapAttribute(value, toggleToString('async')))\n  }\n  crossOrigin(value: Attribute<State, CrossOriginValue>) {\n    return this.attr('crossorigin', value)\n  }\n  defer(value: Attribute<State, boolean>) {\n    return this.attr('defer', mapAttribute(value, toggleToString('defer')))\n  }\n  integrity(value: Attribute<State, string>) {\n    return this.attr('integrity', value)\n  }\n  nomodule(value: Attribute<State, boolean>) {\n    return this.attr(\n      'nomodule',\n      mapAttribute(value, toggleToString('nomodule'))\n    )\n  }\n  nonce(value: Attribute<State, string>) {\n    return this.attr('nonce', value)\n  }\n  referrerpolicy(\n    value: Attribute<\n      State,\n      | 'no-referrer'\n      | 'no-referrer-when-downgrade'\n      | 'origin'\n      | 'origin-when-cross-origin'\n      | 'same-origin'\n      | 'strict-origin'\n      | 'strict-origin-when-cross-origin'\n      | 'unsafe-url'\n    >\n  ) {\n    return this.attr('referrerpolicy', value)\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n}\n\nexport class HTMLSelectElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLSelectElement> {\n  autoComplete(value: Attribute<State, ListOrRecordValue<AutoCompleteValue>>) {\n    return this.attr(\n      'autocomplete',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  autoFocus(value: Attribute<State, boolean>) {\n    return this.attr(\n      'autofocus',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  multiple(value: Attribute<State, boolean>) {\n    return this.attr(\n      'multiple',\n      mapAttribute(value, toggleToString('multiple'))\n    )\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  required(value: Attribute<State, boolean>) {\n    return this.attr(\n      'required',\n      mapAttribute(value, toggleToString('required'))\n    )\n  }\n  size(value: Attribute<State, number>) {\n    return this.attr('size', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLSlotElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLSlotElement> {\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  onSlotChange(\n    handler: EventHandlerTE<State, Action, UIEvent, HTMLSlotElement> | undefined\n  ) {\n    return this.handle('slotchange', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class HTMLSourceElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLSourceElement> {\n  media(value: Attribute<State, string>) {\n    return this.attr('media', value)\n  }\n  sizes(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr('sizes', mapAttribute(value, lostOrRecordToCommaSeparated))\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  srcset(value: Attribute<State, string>) {\n    return this.attr('srcset', value)\n  }\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n}\n\nexport class HTMLStyleElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLStyleElement> {\n  type(value: Attribute<State, string>) {\n    return this.attr('type', value)\n  }\n  media(value: Attribute<State, string>) {\n    return this.attr('media', value)\n  }\n  nonce(value: Attribute<State, string>) {\n    return this.attr('nonce', value)\n  }\n  title(value: Attribute<State, string>) {\n    return this.attr('title', value)\n  }\n}\n\nexport class HTMLTableColElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTableColElement> {\n  span(value: Attribute<State, number>) {\n    return this.attr('span', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLTableDataCellElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTableDataCellElement> {\n  colSpan(value: Attribute<State, number>) {\n    return this.attr('colspan', mapAttribute(value, String))\n  }\n  headers(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'headers',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  rowSpan(value: Attribute<State, number>) {\n    return this.attr('rowspan', mapAttribute(value, String))\n  }\n}\n\nexport type THCellScope = 'row' | 'col' | 'rowgroup' | 'colgroup' | 'auto'\n\nexport class HTMLTableHeaderCellElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTableHeaderCellElement> {\n  abbr(value: Attribute<State, number>) {\n    return this.attr('abbr', mapAttribute(value, String))\n  }\n  colSpan(value: Attribute<State, number>) {\n    return this.attr('colspan', mapAttribute(value, String))\n  }\n  headers(value: Attribute<State, ListOrRecordValue<string>>) {\n    return this.attr(\n      'headers',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  rowSpan(value: Attribute<State, number>) {\n    return this.attr('rowspan', mapAttribute(value, String))\n  }\n  scope(value: Attribute<State, THCellScope>) {\n    return this.attr('scope', value)\n  }\n}\n\nexport type SpellCheckValue = true | false | 'true' | 'false' | 'default'\nexport type WrapValue = 'hard' | 'soft'\n\nexport class HTMLTextAreaElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTextAreaElement> {\n  autoComplete(value: Attribute<State, ListOrRecordValue<AutoCompleteValue>>) {\n    return this.attr(\n      'autocomplete',\n      mapAttribute(value, listOrRecordToSpaceSeparated)\n    )\n  }\n  autoFocus(value: Attribute<State, boolean>) {\n    return this.attr(\n      'autofocus',\n      mapAttribute(value, toggleToString('autofocus'))\n    )\n  }\n  cols(value: Attribute<State, number>) {\n    return this.attr('cols', mapAttribute(value, String))\n  }\n  disabled(value: Attribute<State, boolean>) {\n    return this.attr(\n      'disabled',\n      mapAttribute(value, toggleToString('disabled'))\n    )\n  }\n  form(value: Attribute<State, string>) {\n    return this.attr('form', value)\n  }\n  maxlength(value: Attribute<State, number>) {\n    return this.attr('maxlength', mapAttribute(value, String))\n  }\n  minlength(value: Attribute<State, number>) {\n    return this.attr('minlength', mapAttribute(value, String))\n  }\n  name(value: Attribute<State, string>) {\n    return this.attr('name', value)\n  }\n  placeholder(value: Attribute<State, string>) {\n    return this.attr('placeholder', value)\n  }\n  readonly(value: Attribute<State, boolean>) {\n    return this.attr(\n      'readonly',\n      mapAttribute(value, toggleToString('readonly'))\n    )\n  }\n  required(value: Attribute<State, boolean>) {\n    return this.attr(\n      'required',\n      mapAttribute(value, toggleToString('required'))\n    )\n  }\n  rows(value: Attribute<State, number>) {\n    return this.attr('rows', mapAttribute(value, String))\n  }\n  spellCheck(value: Attribute<State, SpellCheckValue>) {\n    return this.attr('spellcheck', mapAttribute(value, String))\n  }\n  wrap(value: Attribute<State, WrapValue>) {\n    return this.attr('wrap', mapAttribute(value, String))\n  }\n}\n\nexport class HTMLTimeElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTimeElement> {\n  dateTime(value: Attribute<State, string>) {\n    return this.attr('datetime', value)\n  }\n}\n\nexport type TrackKindValue =\n  | 'subtitles'\n  | 'captions'\n  | 'descriptions'\n  | 'chapters'\n  | 'metadata'\n\nexport class HTMLTrackElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLElementBuilder<State, Action, Query, HTMLTrackElement> {\n  default(value: Attribute<State, boolean>) {\n    return this.attr('default', mapAttribute(value, toggleToString('default')))\n  }\n  kind(value: Attribute<State, TrackKindValue>) {\n    return this.attr('kind', value)\n  }\n  label(value: Attribute<State, string>) {\n    return this.attr('label', value)\n  }\n  src(value: Attribute<State, string>) {\n    return this.attr('src', value)\n  }\n  srclang(value: Attribute<State, string>) {\n    return this.attr('srclang', value)\n  }\n  onCueChange(\n    handler: EventHandlerTE<State, Action, Event, HTMLTrackElement> | undefined\n  ) {\n    return this.handle('cuechange', handler as EventHandler<State, Action>)\n  }\n}\n\nexport class HTMLVideoElementBuilder<\n  State,\n  Action,\n  Query\n> extends HTMLMediaElementBuilder<State, Action, Query, HTMLVideoElement> {\n  height(value: Attribute<State, number>) {\n    return this.attr('height', mapAttribute(value, String))\n  }\n  playsInline(value: Attribute<State, boolean>): this {\n    return this.attr(\n      'playsinline',\n      mapAttribute(value, toggleToString('playsinline'))\n    )\n  }\n  poster(value: Attribute<State, string>) {\n    return this.attr('poster', value)\n  }\n  width(value: Attribute<State, number>) {\n    return this.attr('width', mapAttribute(value, String))\n  }\n}\n\n// transforms\nexport class ComponentHTMLBuilder<State, Action, Query>\n  extends BaseHTMLBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _delayed = false\n  private _equals: undefined | ((a: State, b: State) => boolean)\n  constructor(readonly reducer: (state: State, action: Action) => State) {\n    super()\n  }\n  Equals(equals: undefined | ((a: State, b: State) => boolean)) {\n    if (equals !== undefined) {\n      this._equals = equals\n    }\n    return this\n  }\n  Delayed(delayed: undefined | boolean) {\n    if (delayed !== undefined) {\n      this._delayed = delayed\n    }\n    return this\n  }\n  build() {\n    return new ComponentTemplate<State, Action, Query>(\n      this._delayed,\n      this.reducer,\n      this._equals,\n      this._children\n    )\n  }\n}\n\nexport class FragmentHTMLBuilder<State, Action, Query>\n  extends BaseHTMLBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  build() {\n    return new FragmentTemplate<State, Action, Query>(this._children)\n  }\n}\n\nexport class MapActionHTMLBuilder<State, Action, ActionB, Query>\n  extends BaseHTMLBuilder<State, ActionB, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(protected map: DerivedValue<ActionB, Action>) {\n    super()\n  }\n  build() {\n    return new MapActionTemplate<State, Action, ActionB, Query>(\n      this.map,\n      this._children\n    )\n  }\n}\n\nexport class MapQueryHTMLBuilder<State, Action, Query, QueryB>\n  extends BaseHTMLBuilder<State, Action, QueryB>\n  implements IBuilder<State, Action, Query> {\n  constructor(protected map: DerivedValue<Query, QueryB>) {\n    super()\n  }\n  build() {\n    return new MapQueryTemplate<State, Action, Query, QueryB>(\n      this.map,\n      this._children\n    )\n  }\n}\n\nexport class MapStateHTMLBuilder<State, StateB, Action, Query>\n  extends BaseHTMLBuilder<StateB, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  private _orElse: FragmentHTMLBuilder<State, Action, Query> | undefined\n  private _equals: undefined | ((a: StateB, b: StateB) => boolean)\n  constructor(protected map: Attribute<State, StateB>) {\n    super()\n  }\n  OrElse(init: (builder: FragmentHTMLBuilder<State, Action, Query>) => void) {\n    this._orElse = new FragmentHTMLBuilder<State, Action, Query>()\n    init(this._orElse!)\n    return this\n  }\n  Equals(equals: undefined | ((a: StateB, b: StateB) => boolean)) {\n    if (equals !== undefined) {\n      this._equals = equals\n    }\n    return this\n  }\n  build() {\n    return new MapStateTemplate<State, StateB, Action, Query>(\n      this.map,\n      (this._orElse && this._orElse.build()) ?? text(''),\n      this._equals,\n      this._children\n    )\n  }\n}\n\nexport class PortalHTMLBuilder<State, Action, Query>\n  extends BaseHTMLBuilder<State, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(readonly appendChild: (doc: Document, node: Node) => void) {\n    super()\n  }\n  build() {\n    return new PortalTemplate<State, Action, Query>(\n      this.appendChild,\n      this._children\n    )\n  }\n}\n\nexport class SimpleComponentHTMLBuilder<State, Query>\n  extends BaseHTMLBuilder<State, State, Query>\n  implements IBuilder<State, State, Query> {\n  private _delayed = false\n  constructor() {\n    super()\n  }\n  Delayed(delayed: undefined | boolean) {\n    if (delayed !== undefined) {\n      this._delayed = delayed\n    }\n    return this\n  }\n  build() {\n    return new SimpleComponentTemplate<State, Query>(\n      this._delayed,\n      this._children\n    )\n  }\n}\n\nexport class UntilHTMLBuilder<State, StateB, Action, Query>\n  extends BaseHTMLBuilder<StateB, Action, Query>\n  implements IBuilder<State, Action, Query> {\n  constructor(\n    readonly next: DerivedOrLiteralValue<\n      { state: State; index: number },\n      StateB\n    >\n  ) {\n    super()\n  }\n  build() {\n    return new UntilTemplate<State, StateB, Action, Query>(\n      this.next,\n      this._children\n    )\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DifferentiateAt } from 'tempo-std/lib/types/differentiate'\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { removeNode } from './dom'\nimport { IndexType } from 'tempo-std/lib/types/index_type'\nimport { ObjectWithPath, TypeAtPath } from 'tempo-std/lib/types/objects'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\nimport { keys } from 'tempo-std/lib/objects'\n\nexport class MatchTemplate<\n  Path extends IndexType[],\n  State extends ObjectWithPath<Path, any>,\n  Action,\n  Query\n> implements DOMTemplate<State, Action, Query> {\n  readonly matcher: {\n    [k in TypeAtPath<Path, State>]: DOMTemplate<\n      DifferentiateAt<Path, State, k>,\n      Action,\n      Query\n    >\n  }\n  constructor(\n    readonly path: Path,\n    matcher: {\n      [k in TypeAtPath<Path, State>]:\n        | DOMChild<DifferentiateAt<Path, State, k>, Action, Query>\n        | IBuilder<DifferentiateAt<Path, State, k>, Action, Query>\n    }\n  ) {\n    this.matcher = keys(matcher).reduce(\n      (acc, key) => {\n        acc[key] = childOrBuilderToTemplate(matcher[key])\n        return acc\n      },\n      {} as {\n        [k in TypeAtPath<Path, State>]: DOMTemplate<\n          DifferentiateAt<Path, State, k>,\n          Action,\n          Query\n        >\n      }\n    )\n  }\n  render(ctx: DOMContext<Action>, state: State) {\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n    const { path, matcher } = this\n    let key = this.path.reduce(\n      (acc: any, key) => acc[key],\n      state\n    ) as TypeAtPath<Path, State>\n    let view = matcher[key].render(newCtx, state as any)\n    return {\n      change: (state: State) => {\n        const newKey = path.reduce(\n          (acc: any, key) => acc[key],\n          state\n        ) as TypeAtPath<Path, State>\n        if (newKey === key) {\n          view.change(state as any)\n        } else {\n          view.destroy()\n          key = newKey\n          view = matcher[newKey].render(newCtx, state as any)\n        }\n      },\n      destroy: () => {\n        removeNode(ref)\n        view.destroy()\n      },\n      request: (query: Query) => {\n        view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from '../template'\nimport { DOMContext } from '../context'\nimport { removeNode } from './dom'\nimport { IndexType } from 'tempo-std/lib/types/index_type'\nimport { IBuilder, childOrBuilderToTemplate } from './dom_builder'\nimport { keys } from 'tempo-std/lib/objects'\n\nexport class MatchValueTemplate<State, Action, Query>\n  implements DOMTemplate<State, Action, Query> {\n  readonly matcher: {\n    [_ in string | number]: DOMTemplate<State, Action, Query>\n  }\n  readonly orElse: DOMTemplate<State, Action, Query>\n  constructor(\n    readonly path: IndexType[],\n    matcher: {\n      [_ in string | number]:\n        | DOMChild<State, Action, Query>\n        | IBuilder<State, Action, Query>\n    },\n    orElse: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  ) {\n    this.matcher = keys(matcher).reduce(\n      (acc, key) => {\n        acc[key] = childOrBuilderToTemplate(this.matcher[key])\n        return acc\n      },\n      {} as {\n        [_ in string | number]: DOMTemplate<State, Action, Query>\n      }\n    )\n    this.orElse = childOrBuilderToTemplate(orElse)\n  }\n  render(ctx: DOMContext<Action>, state: State) {\n    const { matcher, orElse } = this\n    const { ctx: newCtx, ref } = ctx.withAppendToReference()\n    let oldKey = this.path.reduce((acc: any, key) => acc[key], state)\n    const template = this.matcher[oldKey] || this.orElse\n    let view = template.render(newCtx, state)\n    return {\n      change: (state: State) => {\n        const newKey = this.path.reduce((acc: any, key) => acc[key], state)\n        if (newKey === oldKey) {\n          view.change(state)\n        } else {\n          view.destroy()\n          oldKey = newKey\n          const template = matcher[newKey] || orElse\n          view = template.render(newCtx, state)\n        }\n      },\n      destroy: () => {\n        removeNode(ref)\n        view.destroy()\n      },\n      request: (query: Query) => {\n        view.request(query)\n      }\n    }\n  }\n}\n","/*\nCopyright 2020 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport {\n  HTMLElementBuilder,\n  HTMLAnchorElementBuilder,\n  HTMLAreaElementBuilder,\n  HTMLAudioElementBuilder,\n  HTMLBaseElementBuilder,\n  HTMLQuoteElementBuilder,\n  HTMLButtonElementBuilder,\n  HTMLCanvasElementBuilder,\n  HTMLTableColElementBuilder,\n  HTMLDataElementBuilder,\n  HTMLModElementBuilder,\n  HTMLDialogElementBuilder,\n  HTMLEmbedElementBuilder,\n  HTMLFieldSetElementBuilder,\n  HTMLDetailsElementBuilder,\n  HTMLFormElementBuilder,\n  HTMLIFrameElementBuilder,\n  HTMLImageElementBuilder,\n  HTMLInputElementBuilder,\n  HTMLHtmlElementBuilder,\n  HTMLLabelElementBuilder,\n  HTMLLIElementBuilder,\n  HTMLLinkElementBuilder,\n  HTMLMetaElementBuilder,\n  HTMLMapElementBuilder,\n  HTMLMeterElementBuilder,\n  HTMLObjectElementBuilder,\n  HTMLOListElementBuilder,\n  HTMLOptGroupElementBuilder,\n  HTMLOptionElementBuilder,\n  HTMLOutputElementBuilder,\n  HTMLParamElementBuilder,\n  HTMLPictureElementBuilder,\n  HTMLProgressElementBuilder,\n  HTMLScriptElementBuilder,\n  HTMLSelectElementBuilder,\n  HTMLSlotElementBuilder,\n  HTMLSourceElementBuilder,\n  HTMLStyleElementBuilder,\n  HTMLTableDataCellElementBuilder,\n  HTMLTextAreaElementBuilder,\n  HTMLTableHeaderCellElementBuilder,\n  HTMLTimeElementBuilder,\n  HTMLTrackElementBuilder,\n  HTMLVideoElementBuilder,\n  El,\n  ComponentHTMLBuilder,\n  MapStateHTMLBuilder,\n  MapActionHTMLBuilder,\n  MapQueryHTMLBuilder,\n  UntilHTMLBuilder,\n  FragmentHTMLBuilder,\n  PortalHTMLBuilder,\n  SimpleComponentHTMLBuilder\n} from './html_builder'\nimport { IBuilder } from './dom_builder'\nimport { Attribute, resolveAttribute } from '../value'\nimport { ComponentTemplate } from './component'\nimport { PropagateArg, AdapterTemplate } from './adapter'\nimport { DerivedValue } from 'tempo-core/lib/value'\nimport { IndexType } from 'tempo-std/lib/types/index_type'\nimport {\n  ObjectWithPath,\n  TypeAtPath,\n  ObjectWithField\n} from 'tempo-std/lib/types/objects'\nimport { DOMChild, DOMTemplate } from '../template'\nimport { DifferentiateAt } from 'tempo-std/lib/types/differentiate'\nimport { MatchTemplate } from './match_template'\nimport { MatchBoolTemplate } from './match_bool_template'\nimport { MatchValueTemplate } from './match_value_template'\nimport { Option } from 'tempo-std/lib/option'\nimport { Maybe, Just } from 'tempo-std/lib/maybe'\nimport { Result } from 'tempo-std/lib/result'\nimport { Async, Outcome } from 'tempo-std/lib/async'\nimport { AsyncResult } from 'tempo-std/lib/async_result'\nimport { LazyTemplate } from './lazy'\nimport { HoldF, HoldStateTemplate } from './hold_state'\n\nexport { El }\n\n// dom specific\nexport function A<State, Action, Query>(\n  init?: (builder: HTMLAnchorElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLAnchorElementBuilder<State, Action, Query>('a')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ABBR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'abbr'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ADDRESS<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'address'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function AREA<State, Action, Query>(\n  init?: (builder: HTMLAreaElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLAreaElementBuilder<State, Action, Query>('area')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ARTICLE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'article'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function ASIDE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'aside'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function AUDIO<State, Action, Query>(\n  init?: (builder: HTMLAudioElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLAudioElementBuilder<State, Action, Query>('audio')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function B<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>('b')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BASE<State, Action, Query>(\n  init?: (builder: HTMLBaseElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLBaseElementBuilder<State, Action, Query>('base')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BDI<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'bdi'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BDO<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'bdo'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BLOCKQUOTE<State, Action, Query>(\n  init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLQuoteElementBuilder<State, Action, Query>(\n    'blockquote'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BODY<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLBodyElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLBodyElement>(\n    'body'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLBRElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLBRElement>(\n    'br'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function BUTTON<State, Action, Query>(\n  init?: (builder: HTMLButtonElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLButtonElementBuilder<State, Action, Query>('button')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CANVAS<State, Action, Query>(\n  init?: (builder: HTMLCanvasElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLCanvasElementBuilder<State, Action, Query>('canvas')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CAPTION<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableCaptionElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableCaptionElement\n  >('caption')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CITE<State, Action, Query>(\n  init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLQuoteElementBuilder<State, Action, Query>('cite')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function CODE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'code'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function COL<State, Action, Query>(\n  init?: (builder: HTMLTableColElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTableColElementBuilder<State, Action, Query>('col')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function COLGROUP<State, Action, Query>(\n  init?: (builder: HTMLTableColElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTableColElementBuilder<State, Action, Query>(\n    'colgroup'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DATA<State, Action, Query>(\n  init?: (builder: HTMLDataElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLDataElementBuilder<State, Action, Query>('data')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DATALIST<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLDataListElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLDataListElement\n  >('datalist')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DD<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'dd'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DEL<State, Action, Query>(\n  init?: (builder: HTMLModElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLModElementBuilder<State, Action, Query>('del')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DETAILS<State, Action, Query>(\n  init?: (builder: HTMLDetailsElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLDetailsElementBuilder<State, Action, Query>('details')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DFN<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'dfn'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DIALOG<State, Action, Query>(\n  init?: (builder: HTMLDialogElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLDialogElementBuilder<State, Action, Query>('dialog')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DIV<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLDivElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLDivElement>(\n    'div'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DL<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLDListElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLDListElement\n  >('dl')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function DT<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'dt'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function EM<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'em'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function EMBED<State, Action, Query>(\n  init?: (builder: HTMLEmbedElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLEmbedElementBuilder<State, Action, Query>('embed')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FIELDSET<State, Action, Query>(\n  init?: (builder: HTMLFieldSetElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLFieldSetElementBuilder<State, Action, Query>(\n    'fieldset'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FIGCAPTION<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'figcaption'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FIGURE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'figure'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FOOTER<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'footer'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function FORM<State, Action, Query>(\n  init?: (builder: HTMLFormElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLFormElementBuilder<State, Action, Query>('form')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H1<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLHeadingElement\n  >('h1')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H2<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLHeadingElement\n  >('h2')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H3<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLHeadingElement\n  >('h3')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H4<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadingElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLHeadingElement\n  >('h4')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H5<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'h5'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function H6<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'h6'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HEAD<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHeadElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLHeadElement>(\n    'head'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HEADER<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'header'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HGROUP<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'hgroup'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLHRElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLHRElement>(\n    'hr'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function HTML<State, Action, Query>(\n  init?: (builder: HTMLHtmlElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLHtmlElementBuilder<State, Action, Query>('html')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function I<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>('i')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function IFRAME<State, Action, Query>(\n  init?: (builder: HTMLIFrameElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLIFrameElementBuilder<State, Action, Query>('iframe')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function IMG<State, Action, Query>(\n  init?: (builder: HTMLImageElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLImageElementBuilder<State, Action, Query>('img')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function INPUT<State, Action, Query>(\n  init?: (builder: HTMLInputElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLInputElementBuilder<State, Action, Query>('input')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function INS<State, Action, Query>(\n  init?: (builder: HTMLModElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLModElementBuilder<State, Action, Query>('ins')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function KBD<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'kbd'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LABEL<State, Action, Query>(\n  init?: (builder: HTMLLabelElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLLabelElementBuilder<State, Action, Query>('label')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LEGEND<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLLegendElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLLegendElement\n  >('legend')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LI<State, Action, Query>(\n  init?: (builder: HTMLLIElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLLIElementBuilder<State, Action, Query>('li')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function LINK<State, Action, Query>(\n  init?: (builder: HTMLLinkElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLLinkElementBuilder<State, Action, Query>('link')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function MAIN<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'main'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function MAP<State, Action, Query>(\n  init?: (builder: HTMLMapElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLMapElementBuilder<State, Action, Query>('map')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function MARK<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'mark'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function META<State, Action, Query>(\n  init?: (builder: HTMLMetaElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLMetaElementBuilder<State, Action, Query>('meta')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function METER<State, Action, Query>(\n  init?: (builder: HTMLMeterElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLMeterElementBuilder<State, Action, Query>('meter')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function NAV<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'nav'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function NOSCRIPT<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'noscript'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OBJECT<State, Action, Query>(\n  init?: (builder: HTMLObjectElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLObjectElementBuilder<State, Action, Query>('object')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OL<State, Action, Query>(\n  init?: (builder: HTMLOListElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLOListElementBuilder<State, Action, Query>('ol')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OPTGROUP<State, Action, Query>(\n  init?: (builder: HTMLOptGroupElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLOptGroupElementBuilder<State, Action, Query>(\n    'optgroup'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OPTION<State, Action, Query>(\n  init?: (builder: HTMLOptionElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLOptionElementBuilder<State, Action, Query>('option')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function OUTPUT<State, Action, Query>(\n  init?: (builder: HTMLOutputElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLOutputElementBuilder<State, Action, Query>('output')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function P<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLParagraphElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLParagraphElement\n  >('p')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PARAM<State, Action, Query>(\n  init?: (builder: HTMLParamElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLParamElementBuilder<State, Action, Query>('param')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PICTURE<State, Action, Query>(\n  init?: (builder: HTMLPictureElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLPictureElementBuilder<State, Action, Query>('picture')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PRE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLPreElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLPreElement>(\n    'pre'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function PROGRESS<State, Action, Query>(\n  init?: (builder: HTMLProgressElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLProgressElementBuilder<State, Action, Query>(\n    'progress'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function Q<State, Action, Query>(\n  init?: (builder: HTMLQuoteElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLQuoteElementBuilder<State, Action, Query>('q')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function RP<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'rp'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function RT<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'rt'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function RUBY<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'ruby'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function S<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>('s')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SAMP<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'samp'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SCRIPT<State, Action, Query>(\n  init?: (builder: HTMLScriptElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLScriptElementBuilder<State, Action, Query>('script')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SECTION<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'section'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SELECT<State, Action, Query>(\n  init?: (builder: HTMLSelectElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLSelectElementBuilder<State, Action, Query>('select')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SLOT<State, Action, Query>(\n  init?: (builder: HTMLSlotElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLSlotElementBuilder<State, Action, Query>('slot')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SMALL<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'small'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SOURCE<State, Action, Query>(\n  init?: (builder: HTMLSourceElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLSourceElementBuilder<State, Action, Query>('source')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SPAN<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLSpanElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLSpanElement>(\n    'span'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function STRONG<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'strong'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function STYLE<State, Action, Query>(\n  init?: (builder: HTMLStyleElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLStyleElementBuilder<State, Action, Query>('style')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SUB<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'sub'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SUMMARY<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'summary'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function SUP<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'sup'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TABLE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableElement\n  >('table')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TBODY<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableSectionElement\n  >('tbody')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TD<State, Action, Query>(\n  init?: (\n    builder: HTMLTableDataCellElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new HTMLTableDataCellElementBuilder<State, Action, Query>(\n    'td'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TEMPLATE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTemplateElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTemplateElement\n  >('template')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TEXTAREA<State, Action, Query>(\n  init?: (builder: HTMLTextAreaElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTextAreaElementBuilder<State, Action, Query>(\n    'textarea'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TFOOT<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableSectionElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableSectionElement\n  >('tfoot')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TH<State, Action, Query>(\n  init?: (\n    builder: HTMLTableHeaderCellElementBuilder<State, Action, Query>\n  ) => void\n) {\n  const builder = new HTMLTableHeaderCellElementBuilder<State, Action, Query>(\n    'th'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function THEAD<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'thead'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TIME<State, Action, Query>(\n  init?: (builder: HTMLTimeElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTimeElementBuilder<State, Action, Query>('time')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TITLE<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTitleElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTitleElement\n  >('title')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLTableRowElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLTableRowElement\n  >('tr')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function TRACK<State, Action, Query>(\n  init?: (builder: HTMLTrackElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLTrackElementBuilder<State, Action, Query>('track')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function U<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>('u')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function UL<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLUListElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<\n    State,\n    Action,\n    Query,\n    HTMLUListElement\n  >('ul')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function VAR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'varEl'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function VIDEO<State, Action, Query>(\n  init?: (builder: HTMLVideoElementBuilder<State, Action, Query>) => void\n) {\n  const builder = new HTMLVideoElementBuilder<State, Action, Query>('video')\n  if (init !== undefined) init(builder)\n  return builder\n}\nexport function WBR<State, Action, Query>(\n  init?: (\n    builder: HTMLElementBuilder<State, Action, Query, HTMLElement>\n  ) => void\n) {\n  const builder = new HTMLElementBuilder<State, Action, Query, HTMLElement>(\n    'wbr'\n  )\n  if (init !== undefined) init(builder)\n  return builder\n}\n\nexport function Adapter<State, StateB, Action, ActionB, Query>(props: {\n  bootstrapState: (outer: State) => StateB\n  mergeStates?: Attribute<\n    {\n      outerState: State\n      innerState: StateB\n    },\n    StateB\n  >\n  propagate?: (args: PropagateArg<State, StateB, Action, ActionB>) => void\n  child: ComponentTemplate<StateB, ActionB, Query>\n}) {\n  return new AdapterTemplate(\n    props.bootstrapState,\n    props.mergeStates,\n    props.propagate || (() => undefined),\n    props.child\n  )\n}\n\nexport function LocalAdapter<State, Action, Query>(props: {\n  propagate?: (args: PropagateArg<State, State, Action, Action>) => void\n  child: ComponentTemplate<State, Action, Query>\n}) {\n  return new AdapterTemplate(\n    state => state,\n    ({ outerState }) => outerState,\n    props.propagate || (() => undefined),\n    props.child\n  )\n}\n\nexport function Component<State, Action, Query>(\n  reducer: (state: State, action: Action) => State,\n  init: (builder: ComponentHTMLBuilder<State, Action, Query>) => void\n) {\n  const builder = new ComponentHTMLBuilder<State, Action, Query>(reducer)\n  init(builder)\n  return builder\n}\n\nexport function HoldState<State, StateB, StateC, Action, Query>(\n  holdf: HoldF<\n    State,\n    StateB,\n    StateC,\n    Action,\n    Query,\n    FragmentHTMLBuilder<StateC, Action, Query>\n  >\n) {\n  const builder = new FragmentHTMLBuilder<StateC, Action, Query>()\n  return new HoldStateTemplate(holdf, builder)\n}\n\nexport function Iterate<State, Items extends any[], Action, Query>(\n  map: DerivedValue<State, Items>,\n  init: (\n    builder: UntilHTMLBuilder<\n      [Items, State],\n      [Items[number], State, number],\n      Action,\n      Query\n    >\n  ) => void\n) {\n  return MapState<State, [Items, State], Action, Query>(\n    (outer: State): [Items, State] | undefined => {\n      const items = resolveAttribute(map)(outer)\n      return items !== undefined ? [items, outer] : undefined\n    },\n    n => {\n      n.Until<[Items[number], State, number]>(\n        ({ state: [items, state], index }) =>\n          items[index] && [items[index], state, index],\n        init\n      )\n    }\n  )\n}\n\nexport function MapState<State, StateB, Action, Query>(\n  map: (state: State) => StateB | undefined,\n  init: (builder: MapStateHTMLBuilder<State, StateB, Action, Query>) => void\n) {\n  const builder = new MapStateHTMLBuilder<State, StateB, Action, Query>(map)\n  init(builder)\n  return builder\n}\n\nexport function MapField<\n  State,\n  Action,\n  Query,\n  K extends keyof State = keyof State\n>(\n  field: K,\n  init: (builder: MapStateHTMLBuilder<State, State[K], Action, Query>) => void\n) {\n  return MapState<State, State[K], Action, Query>(\n    (v: State): State[K] => v[field],\n    init\n  )\n}\n\nexport function MapStateAndKeep<State, StateB, Action, Query>(\n  map: (state: State) => StateB | undefined,\n  init: (\n    builder: MapStateHTMLBuilder<State, [StateB, State], Action, Query>\n  ) => void\n) {\n  return MapState<State, [StateB, State], Action, Query>((state: State) => {\n    const inner = resolveAttribute(map)(state)\n    if (inner !== undefined) {\n      return [inner, state]\n    } else {\n      return undefined\n    }\n  }, init)\n}\n\nexport function MapAction<State, Action, ActionB, Query>(\n  map: DerivedValue<ActionB, Action>,\n  init: (builder: MapActionHTMLBuilder<State, Action, ActionB, Query>) => void\n) {\n  const builder = new MapActionHTMLBuilder<State, Action, ActionB, Query>(map)\n  init(builder)\n  return builder\n}\n\nexport function MapQuery<State, Action, Query, QueryB>(\n  map: DerivedValue<Query, QueryB>,\n  init: (builder: MapQueryHTMLBuilder<State, Action, Query, QueryB>) => void\n) {\n  const builder = new MapQueryHTMLBuilder<State, Action, Query, QueryB>(map)\n  init(builder)\n  return builder\n}\n\nexport function Match<\n  Path extends IndexType[],\n  State extends ObjectWithPath<Path, any>,\n  Action,\n  Query = unknown\n>(props: {\n  path: Path\n  matcher: {\n    [k in TypeAtPath<Path, State>]:\n      | DOMChild<DifferentiateAt<Path, State, k>, Action, Query>\n      | IBuilder<DifferentiateAt<Path, State, k>, Action, Query>\n  }\n}): DOMTemplate<State, Action, Query> {\n  return new MatchTemplate<Path, State, Action, Query>(\n    props.path,\n    props.matcher\n  )\n}\n\nexport function MatchKind<\n  State extends ObjectWithField<'kind', any>,\n  Action,\n  Query = unknown\n>(\n  matcher: {\n    [k in State['kind']]:\n      | DOMChild<DifferentiateAt<['kind'], State, k>, Action, Query>\n      | IBuilder<DifferentiateAt<['kind'], State, k>, Action, Query>\n  }\n): DOMTemplate<State, Action, Query> {\n  return Match<['kind'], State, Action, Query>({\n    path: ['kind'],\n    matcher\n  })\n}\n\nexport function MatchBool<State, Action, Query = unknown>(props: {\n  condition: Attribute<State, boolean>\n  true: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  false: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<State, Action, Query> {\n  return new MatchBoolTemplate<State, Action, Query>(\n    props.condition,\n    props.true,\n    props.false\n  )\n}\n\nexport function MatchValue<\n  Path extends IndexType[],\n  State extends ObjectWithPath<Path, string>,\n  Action,\n  Query = unknown\n>(props: {\n  path: Path\n  matcher: {\n    [_ in string | number]:\n      | DOMChild<State, Action, Query>\n      | IBuilder<State, Action, Query>\n  }\n  orElse: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<State, Action, Query> {\n  return new MatchValueTemplate<State, Action, Query>(\n    props.path,\n    props.matcher,\n    props.orElse\n  )\n}\n\nexport function MatchOption<State, Action, Query = unknown>(props: {\n  Some: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  None: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n}): DOMTemplate<Option<State>, Action, Query> {\n  return MatchKind({\n    Some: MapField('value', n => n.Append(props.Some)),\n    None: MapState(\n      () => null,\n      n => n.Append(props.None)\n    )\n  })\n}\n\nexport function MatchMaybe<State, Action, Query = unknown>(props: {\n  Just: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Nothing?: DOMChild<unknown, Action, Query> | IBuilder<State, Action, Query>\n}): DOMTemplate<Maybe<State>, Action, Query> {\n  return new MatchBoolTemplate<Maybe<State>, Action, Query>(\n    v => v !== undefined,\n    MapState(\n      (opt: Maybe<State>) => opt as Just<State>,\n      n => n.Append(props.Just)\n    ),\n    props.Nothing as DOMChild<unknown, Action, Query>\n  )\n}\n\nexport function MatchResult<State, Error, Action, Query = unknown>(props: {\n  Success: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Failure: DOMChild<Error, Action, Query> | IBuilder<Error, Action, Query>\n}): DOMTemplate<Result<State, Error>, Action, Query> {\n  return MatchKind({\n    Success: MapField('value', n => n.Append(props.Success)),\n    Failure: MapField('error', n => n.Append(props.Failure))\n  })\n}\n\nexport function MatchAsync<State, Progress, Action, Query = unknown>(props: {\n  Outcome: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  NotAsked: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n  Loading: DOMChild<Progress, Action, Query> | IBuilder<Progress, Action, Query>\n}): DOMTemplate<Async<State, Progress>, Action, Query> {\n  return MatchKind({\n    Outcome: MapField('value', n => n.Append(props.Outcome)),\n    Loading: MapField('progress', n => n.Append(props.Loading)),\n    NotAsked: MapState(\n      () => null,\n      n => n.Append(props.NotAsked)\n    )\n  })\n}\n\nexport function MatchAsyncResult<\n  State,\n  Error,\n  Progress,\n  Action,\n  Query = unknown\n>(props: {\n  Success: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n  Failure: DOMChild<Error, Action, Query> | IBuilder<Error, Action, Query>\n  NotAsked: DOMChild<unknown, Action, Query> | IBuilder<unknown, Action, Query>\n  Loading: DOMChild<Progress, Action, Query> | IBuilder<Progress, Action, Query>\n}): DOMTemplate<AsyncResult<State, Error, Progress>, Action, Query> {\n  return MatchKind<AsyncResult<State, Error, Progress>, Action, Query>({\n    Outcome: MapState(\n      (o: Outcome<Result<State, Error>>) => o.value,\n      n =>\n        n.Append(\n          MatchResult<State, Error, Action, Query>({\n            Success: props.Success,\n            Failure: props.Failure\n          })\n        )\n    ),\n    Loading: MapField('progress', $ => $.Append(props.Loading)),\n    NotAsked: MapState(\n      () => null,\n      n => n.Append(props.NotAsked)\n    )\n  })\n}\n\nexport function Lazy<State, Action, Query>(\n  lazyf: () =>\n    | DOMTemplate<State, Action, Query>\n    | IBuilder<State, Action, Query>\n) {\n  return new LazyTemplate(lazyf)\n}\n\nexport function Fragment<State, Action, Query>(\n  init: (builder: FragmentHTMLBuilder<State, Action, Query>) => void\n) {\n  const builder = new FragmentHTMLBuilder<State, Action, Query>()\n  init(builder)\n  return builder\n}\n\nexport function ForEach<State, Action, Query>(\n  init: (\n    builder: UntilHTMLBuilder<\n      State,\n      State extends any[] ? State[number] : never,\n      Action,\n      Query\n    >\n  ) => void\n) {\n  return Until(\n    ({\n      state,\n      index\n    }: {\n      state: State\n      index: number\n    }): State extends any[] ? State[number] : never => (state as any)[index],\n    init\n  )\n}\n\nexport function Portal<State, Action, Query>(\n  appendChild: (doc: Document, node: Node) => void,\n  init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n) {\n  const builder = new PortalHTMLBuilder<State, Action, Query>(appendChild)\n  init(builder)\n  return builder\n}\n\nexport function PortalWithSelector<State, Action, Query>(\n  selector: string,\n  init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n) {\n  return Portal((doc: HTMLDocument, node: Node) => {\n    const el = doc.querySelector(selector)\n    if (!el) {\n      throw new Error(`selector doesn't match any element: \"${selector}\"`)\n    }\n    el.appendChild(node)\n  }, init)\n}\n\nexport function HeadPortal<State, Action, Query>(\n  init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n) {\n  return Portal((doc, node) => doc.head.appendChild(node), init)\n}\n\nexport function BodyPortal<State, Action, Query>(\n  init: (builder: PortalHTMLBuilder<State, Action, Query>) => void\n) {\n  return Portal((doc, node) => doc.body.appendChild(node), init)\n}\n\nexport function SimpleComponent<State, Query>(\n  init: (builder: SimpleComponentHTMLBuilder<State, Query>) => void\n) {\n  const builder = new SimpleComponentHTMLBuilder<State, Query>()\n  init(builder)\n  return builder\n}\n\nexport function Unless<State, Action, Query>(\n  condition: DerivedValue<State, boolean>,\n  init: (builder: MapStateHTMLBuilder<State, State, Action, Query>) => void\n) {\n  return When(s => !condition(s), init)\n}\n\nexport function Until<State, StateB, Action, Query>(\n  next: DerivedValue<{ state: State; index: number }, StateB>,\n  init: (builder: UntilHTMLBuilder<State, StateB, Action, Query>) => void\n) {\n  const builder = new UntilHTMLBuilder<State, StateB, Action, Query>(next)\n  init(builder)\n  return builder\n}\n\nexport function When<State, Action, Query>(\n  condition: DerivedValue<State, boolean>,\n  init: (builder: MapStateHTMLBuilder<State, State, Action, Query>) => void\n) {\n  const builder = new MapStateHTMLBuilder<State, State, Action, Query>(s => {\n    if (condition(s)) {\n      return s\n    } else {\n      return undefined\n    }\n  })\n  init(builder)\n  return builder\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { ComponentTemplate, ComponentView } from './impl/component'\nimport { DOMContext } from './context'\nimport { DOMChild } from './template'\nimport { SimpleComponent } from './impl/simple_component'\nimport { Reducer } from 'tempo-core/lib/reducer'\nimport {\n  SimpleComponentHTMLBuilder,\n  ComponentHTMLBuilder\n} from './impl/html_builder'\nimport { IBuilder, childOrBuilderToTemplate } from './impl/dom_builder'\nimport { Component } from './impl/html'\n\nexport type Middleware<State, Action> = (\n  dispatch: (action: Action) => void\n) => (state: State, action: Action, previous: State) => void\n\nexport type SimpleMiddlware<State> = (\n  dispatch: (state: State) => void\n) => (state: State, previous: State) => void\n\nexport const Tempo = {\n  renderComponent<State, Action, Query = unknown>(options: {\n    el?: HTMLElement\n    state: State\n    component:\n      | ComponentTemplate<State, Action, Query>\n      | ComponentHTMLBuilder<State, Action, Query>\n    document?: Document\n    middleware?: Middleware<State, Action>\n  }): ComponentView<State, Action, Query> {\n    const { el: maybeElement, component } = options\n    let localState = options.state\n    const doc = options.document || document\n    const el = maybeElement || doc.body\n    const append = (node: Node) => el.appendChild(node)\n    const template = childOrBuilderToTemplate(component) as ComponentTemplate<\n      State,\n      Action,\n      Query\n    >\n\n    const appliedMiddleware =\n      options.middleware !== undefined\n        ? options.middleware((action: Action) => {\n            view.dispatch(action)\n          })\n        : () => {}\n\n    const view = template.render(\n      new DOMContext(doc, append, (action: Action) => {\n        appliedMiddleware(view.state, action, localState)\n        localState = view.state\n      }),\n      localState\n    )\n\n    return view\n  },\n\n  render<State, Action, Query = unknown>(options: {\n    el?: HTMLElement\n    template: DOMChild<State, Action, Query> | IBuilder<State, Action, Query>\n    state: State\n    reducer: Reducer<State, Action>\n    equal?: (a: State, b: State) => boolean\n    document?: Document\n    delayed?: boolean\n    middleware?: Middleware<State, Action>\n  }): ComponentView<State, Action, Query> {\n    const {\n      el,\n      state,\n      reducer,\n      equal,\n      document,\n      template,\n      delayed,\n      middleware\n    } = options\n    const component = Component(reducer, $ => {\n      $.Equals(equal).Delayed(delayed).Append(template)\n    })\n    return Tempo.renderComponent({\n      el,\n      component,\n      state,\n      document,\n      middleware\n    })\n  },\n\n  renderSimple<State, Query = unknown>(options: {\n    el?: HTMLElement\n    component:\n      | SimpleComponent<State, Query>\n      | SimpleComponentHTMLBuilder<State, Query>\n    state: State\n    document?: Document\n    middleware?: SimpleMiddlware<State>\n  }) {\n    const { el: maybeElement, component } = options\n    let localState = options.state\n    const doc = options.document || document\n    const el = maybeElement || doc.body\n    const append = (node: Node) => el.appendChild(node)\n    const template = childOrBuilderToTemplate(component)\n\n    const appliedMiddleware =\n      options.middleware !== undefined\n        ? options.middleware((state: State) => result.change(state))\n        : () => {}\n\n    const result = {\n      ...template.render(\n        new DOMContext(doc, append, (state: State) => {\n          appliedMiddleware(state, localState)\n          localState = state\n        }),\n        localState\n      )\n    }\n\n    return result\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Tempo } from 'tempo-dom/lib/tempo'\nimport { SimpleComponent } from 'tempo-dom/lib/html'\n\nconst component = SimpleComponent<number, unknown>($ =>\n  $.DIV($ =>\n    $.class('app').DIV($ =>\n      $.DIV($ => $.class(['count', 'count-small']).text('count'))\n        .DIV($ => $.class('count').text(String))\n        .DIV($ =>\n          $.class('buttons')\n            .BUTTON($ =>\n              $.onClick(count => count - 1)\n                .disabled(count => count <= 0)\n                .text('-')\n            )\n            .BUTTON($ => $.onClick(count => count + 1).text('+'))\n        )\n    )\n  )\n)\n\nTempo.renderSimple({ component, state: 0 })\n"]}