{"version":3,"sources":["../../src/utils/set_attribute.ts","../src/dom_attributes_mapper.ts","../src/node_view.ts","../src/text.ts","../../src/utils/dom.ts","../src/element.ts","../src/html.ts","../src/until.ts","../src/for_each.ts","template/list.ts","template/deep.ts","../src/context.ts","template/attribute.ts","template/styles.ts","template/events.ts","template/property.ts","main.ts"],"names":[],"mappings":"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","file":"main.js","sourceRoot":"../../../../demo/benchmark/test","sourcesContent":["/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nexport const setOneStyle = (el: Element, name: string, value: any) => {\n  const anyStyle = (el as HTMLElement).style as any\n  if (value == null) {\n    anyStyle[name] = null\n  } else {\n    const s = String(value)\n    if (s !== anyStyle[name]) {\n      anyStyle[name] = String(value)\n    }\n  }\n}\n\nexport const setAttribute = (el: Element, name: string, value: any) => {\n  if (value == null) {\n    el.removeAttribute(name)\n  } else {\n    el.setAttribute(name, value)\n  }\n}\n\nexport const setProperty = (el: Element, name: string, value: any) => {\n  const anyEl = el as any\n  if (value == null && anyEl[name] != null) {\n    anyEl[name] = null\n  } else if (anyEl[name] !== value) {\n    anyEl[name] = value\n  }\n}\n\nexport const setStyleAttribute = (el: Element, name: string, value: any) => {\n  const html = el as HTMLElement\n  if (value == null) {\n    html.removeAttribute(name)\n  } else if (typeof value === 'string') {\n    setAttribute(el, name, value)\n  } else {\n    const s = Object.keys(value)\n      .map(k => {\n        return `${k}: ${(value as any)[k]!};`\n      })\n      .join(' ')\n    setAttribute(el, name, (s.length && s) || (null as any))\n  }\n}\n\nexport const setBoolProperty = (el: Element, name: string, value: any) => {\n  const anyEl = el as any\n  if (value == null) {\n    anyEl[name] = null\n  } else {\n    const bool = value === true || value === 'true'\n    if (anyEl[name] !== bool) {\n      anyEl[name] = bool\n    }\n  }\n}\n\nexport const setEnumBoolAttribute = (el: Element, name: string, value: any) => {\n  setAttribute(el, name, value === true || value === 'true' ? 'true' : value === false ? 'false' : (null as any))\n}\n\nexport const setBoolAttribute = (el: Element, name: string, value: any) => {\n  setAttribute(el, name, value === true || value === 'true' ? '' : (null as any))\n}\n\nexport const setCommaSeparated = (el: Element, name: string, values: any) => {\n  if (Array.isArray(values)) setAttribute(el, name, values.join(', ') || (null as any))\n  else setAttribute(el, name, (values && String(values)) || (null as any))\n}\n\nexport const setSpaceSeparated = (el: Element, name: string, values: any) => {\n  if (Array.isArray(values)) setAttribute(el, name, values.join(' ') || (null as any))\n  else setAttribute(el, name, (values && String(values)) || (null as any))\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\n/* istanbul ignore file */\nimport {\n  setBoolAttribute,\n  setCommaSeparated,\n  setEnumBoolAttribute,\n  setSpaceSeparated,\n  setStyleAttribute,\n  setBoolProperty,\n  setProperty\n} from './utils/set_attribute'\n\nexport const htmlAttributeNameMap: Record<string, string> = {\n  acceptcharset: 'accept-charset',\n  asattr: 'as',\n  classname: 'class',\n  httpequiv: 'http-equiv',\n  htmlfor: 'for'\n}\n\nexport const htmlAttributeMap: Record<string, (el: Element, name: string, value: any) => void> = {\n  'accept-charset': setSpaceSeparated,\n  class: setSpaceSeparated,\n  acceptcharset: setSpaceSeparated,\n  async: setBoolAttribute,\n  autofocus: setBoolAttribute,\n  autoplay: setBoolAttribute,\n  checked: setBoolProperty,\n  contenteditable: setEnumBoolAttribute,\n  controls: setBoolAttribute,\n  default: setBoolAttribute,\n  defer: setBoolAttribute,\n  disabled: setBoolAttribute,\n  draggable: setEnumBoolAttribute,\n  formnovalidate: setBoolAttribute,\n  headers: setSpaceSeparated,\n  hidden: setBoolAttribute,\n  ismap: setBoolAttribute,\n  itemscope: setBoolAttribute,\n  loop: setBoolAttribute,\n  multiple: setBoolProperty,\n  muted: setBoolProperty,\n  nomodule: setBoolAttribute,\n  novalidate: setBoolAttribute,\n  open: setBoolAttribute,\n  ping: setSpaceSeparated,\n  playsinline: setBoolAttribute,\n  readonly: setBoolAttribute,\n  rel: setSpaceSeparated,\n  required: setBoolAttribute,\n  reversed: setBoolAttribute,\n  selected: setBoolProperty,\n  sizes: setCommaSeparated,\n  srcset: setCommaSeparated,\n  style: setStyleAttribute,\n  typemustmatch: setBoolAttribute,\n  value: setProperty\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DynamicView, StaticView, View } from '@tempo/core/lib/view'\nimport { removeNode } from './utils/dom'\n\nexport class DOMBaseNodeView<State> {\n  constructor(readonly node: Node, readonly children: View<State>[], readonly beforeDestroy?: () => void) {}\n  destroy() {\n    if (this.beforeDestroy) this.beforeDestroy()\n    removeNode(this.node)\n    for (const c of this.children) c.destroy()\n  }\n}\n\nexport class DOMStaticNodeView<State> extends DOMBaseNodeView<State> implements StaticView {\n  readonly kind = 'static'\n}\n\nexport class DOMDynamicNodeView<State> extends DOMBaseNodeView<State> implements DynamicView<State> {\n  readonly kind = 'dynamic'\n  constructor(\n    readonly node: Node,\n    readonly children: View<State>[],\n    readonly change: (state: State) => void,\n    readonly beforeDestroy?: () => void\n  ) {\n    super(node, children, beforeDestroy)\n  }\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate } from './template'\nimport { DOMContext } from './context'\nimport { View } from '@tempo/core/lib/view'\nimport { UnwrappedLiteralValue, UnwrappedDerivedValue } from '@tempo/core/lib/value'\nimport { DOMStaticNodeView, DOMDynamicNodeView } from './node_view'\nimport { DOMTextValue } from './value'\n\nconst renderLiteral = <State>(ctx: DOMContext<never>, value: UnwrappedLiteralValue<string>): View<State> => {\n  const node = ctx.doc.createTextNode(value || '')\n  const view = new DOMStaticNodeView(node, [])\n  ctx.append(node)\n  return view\n}\n\nconst renderFunction = <State>(\n  ctx: DOMContext<never>,\n  state: State,\n  map: UnwrappedDerivedValue<State, string>\n): View<State> => {\n  const node = ctx.doc.createTextNode(map(state) || '')\n  const f = (state: State) => {\n    const newContent = map(state) || ''\n    node.nodeValue = newContent\n  }\n  const view = new DOMDynamicNodeView(node, [], f)\n  ctx.append(node)\n  return view\n}\n\nexport class DOMText<State, Action> implements DOMTemplate<State, Action> {\n  constructor(readonly content: DOMTextValue<State>) {}\n\n  render(ctx: DOMContext<Action>, state: State): View<State> {\n    if (typeof this.content === 'function') {\n      return renderFunction(ctx, state, this.content as UnwrappedDerivedValue<State, string>)\n    } else {\n      return renderLiteral(ctx, this.content)\n    }\n  }\n}\n\nexport const text = <State, Action>(content: DOMTextValue<State>) => new DOMText<State, Action>(content)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { View, DynamicView } from '@tempo/core/lib/view'\nimport { UnwrappedDerivedValue } from '@tempo/core/lib/value'\nimport { DOMAttribute, DOMEventHandler, DOMStyleAttribute } from '../value'\nimport { htmlAttributeNameMap as attributeNameMap, htmlAttributeMap as attributeMap } from '../dom_attributes_mapper'\nimport { setAttribute, setOneStyle } from './set_attribute'\nimport { DOMChild, DOMTemplate } from '../template'\nimport { text } from '../text'\n\nexport const removeNode = (node: Node) => {\n  const el = node as HTMLElement\n  if (el && el.onblur) {\n    el.onblur = null\n  }\n  if (node && node.parentElement) {\n    node.parentElement.removeChild(node)\n  }\n}\n\nexport const insertBefore = (ref: Node) => (node: Node) => {\n  if (ref.parentElement != null) {\n    ref.parentElement.insertBefore(node, ref)\n  }\n}\n\nexport const filterDynamics = <State>(children: View<State>[]) =>\n  children.filter(child => child.kind === 'dynamic') as DynamicView<State>[]\n\nexport const domChildToTemplate = <State, Action>(dom: DOMChild<State, Action>): DOMTemplate<State, Action> => {\n  if (typeof dom === 'string' || typeof dom === 'function') return text(dom)\n  else return dom\n}\n\nexport type Acc<State> = ((state: State) => void)[]\n\nexport const processAttribute = <State, Action>(\n  el: Element,\n  name: string,\n  value: DOMAttribute<State, Action>,\n  acc: Acc<State>\n): Acc<State> => {\n  name = name.toLowerCase()\n  name = attributeNameMap[name] || name\n\n  let set = attributeMap[name] || setAttribute\n\n  if (typeof value === 'function') {\n    const f = (state: State) => set(el, name, (value as UnwrappedDerivedValue<State, Action>)(state))\n    acc.push(f)\n  } else {\n    set(el, name, value)\n  }\n  return acc\n}\n\nexport const processEvent = <State, El extends Element, Ev extends Event, Action>(\n  el: El,\n  name: string,\n  value: DOMEventHandler<State, Action, Ev, El>,\n  dispatch: (action: Action) => void,\n  acc: Acc<State>\n): Acc<State> => {\n  const anyEl = el as any\n  name = 'on' + name.toLowerCase()\n  const f = (state: State) => {\n    anyEl[name] = (ev: Ev) => {\n      const r = value(state, ev, el)\n      if (r != null) {\n        dispatch(r)\n      }\n    }\n  }\n  acc.push(f)\n  return acc\n}\n\nexport const processStyle = <State, Action>(\n  el: Element,\n  name: string,\n  value: DOMStyleAttribute<State, Action>,\n  acc: Acc<State>\n): Acc<State> => {\n  if (typeof value === 'function') {\n    const f = (state: State) => setOneStyle(el, name, (value as UnwrappedDerivedValue<State, Action>)(state))\n    acc.push(f)\n  } else {\n    setOneStyle(el, name, value)\n  }\n  return acc\n}\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMTemplate, DOMChild } from './template'\nimport { DOMContext } from './context'\nimport { View } from '@tempo/core/lib/view'\nimport { processAttribute, processEvent, processStyle, filterDynamics, domChildToTemplate } from './utils/dom'\nimport { DOMDynamicNodeView, DOMStaticNodeView } from './node_view'\nimport { DOMAttributes } from './value'\n\nconst applyChange = <State, Action, El extends Element, T>(\n  change: (state: State, el: El, ctx: DOMContext<Action>, value: T | undefined) => T | undefined,\n  el: El,\n  ctx: DOMContext<Action>\n) => (state: State, value: T | undefined): T | undefined => {\n  return change(state, el, ctx, value)\n}\n\nconst applyAfterRender = <State, Action, El extends Element, T>(\n  attr: (state: State, el: El, ctx: DOMContext<Action>) => T | undefined,\n  el: El,\n  ctx: DOMContext<Action>,\n  state: State\n) => {\n  if (attr != null) {\n    return attr(state, el, ctx)\n  } else {\n    return undefined\n  }\n}\n\nexport class DOMElement<State, Action, El extends Element = Element, T = unknown> implements DOMTemplate<State, Action> {\n  constructor(\n    readonly createElement: (doc: Document) => El,\n    readonly attributes: DOMAttributes<State, Action, El, T>,\n    readonly children: DOMTemplate<State, Action>[]\n  ) {}\n\n  render(ctx: DOMContext<Action>, state: State): View<State> {\n    const el = this.createElement(ctx.doc)\n    let value: T | undefined = undefined\n\n    const {\n      attrs,\n      events,\n      styles,\n      afterrender,\n      beforechange,\n      afterchange,\n      beforedestroy\n    } = this.attributes\n\n    const beforedestroyf = beforedestroy && (() => beforedestroy(el, ctx, value))\n\n    const allDynamics = [] as ((state: State) => void)[]\n\n    if (attrs) {\n      Object.keys(attrs).forEach(\n        (key: keyof typeof attrs) => processAttribute(el, key, attrs[key], allDynamics)\n      )\n    }\n\n    if (events) {\n      Object.keys(events).forEach(\n        (key: keyof typeof events) => processEvent(el, key, events[key], ctx.dispatch, allDynamics)\n      )\n    }\n\n    if (styles) {\n      Object.keys(styles).forEach(\n        (key: keyof typeof styles) => processStyle(el, key, styles[key], allDynamics)\n      )\n    }\n\n    for (const dy of allDynamics) dy(state)\n\n    // children\n    const appendChild = (n: Node) => el.appendChild(n)\n    const newCtx = ctx.withAppend(appendChild).withParent(el)\n    const views = this.children.map(child => child.render(newCtx, state))\n\n    ctx.append(el)\n\n    if (afterrender) {\n      value = applyAfterRender(afterrender, el, ctx, state)\n    }\n\n    const dynamicChildren = filterDynamics(views).map(child => (state: State) => child.change(state))\n\n    allDynamics.push(...dynamicChildren)\n\n    if (beforechange) {\n      const change = applyChange(beforechange, el, ctx)\n      const update = (state: State) => { value = change(state, value) }\n      allDynamics.unshift(update)\n    }\n\n    if (afterchange) {\n      const change = applyChange(afterchange, el, ctx)\n      const update = (state: State) => { value = change(state, value) }\n      allDynamics.push(update)\n    }\n\n    if (allDynamics.length > 0) {\n      return new DOMDynamicNodeView(el, views, (state: State) => {\n        for (const f of allDynamics) f(state)\n      }, beforedestroyf)\n    } else {\n      return new DOMStaticNodeView(el, views, beforedestroyf)\n    }\n  }\n}\n\nconst makeCreateElement = <El extends Element>(name: string) => (doc: Document) => doc.createElement(name) as any as El\n\nexport const el = <State, Action, El extends Element, T = unknown>(\n  name: string,\n  attributes: DOMAttributes<State, Action, El, T>,\n  ...children: DOMChild<State, Action>[]\n) => {\n  return new DOMElement<State, Action, El, T>(\n    makeCreateElement(name),\n    attributes,\n    children.map(domChildToTemplate)\n  )\n}\n\nexport const el2 = <El extends Element>(name: string) => <State, Action, T = unknown>(\n  attributes: DOMAttributes<State, Action, El, T>,\n  ...children: DOMChild<State, Action>[]) => {\n    return new DOMElement<State, Action, El, T>(\n      makeCreateElement(name),\n      attributes,\n      children.map(domChildToTemplate)\n    )\n  }\n\nexport const defaultNamespaces: Record<string, string> = {\n  'svg': 'http://www.w3.org/2000/svg'\n}\n\nconst makeCreateElementNS = <El extends Element>(namespace: string, name: string) =>\n  (doc: Document) => doc.createElementNS(namespace, name) as any as El\n\nexport const elNS = <State, Action, El extends Element, T = unknown>(\n  ns: string,\n  name: string,\n  attributes: DOMAttributes<State, Action, El, T>,\n  ...children: DOMChild<State, Action>[]\n) => {\n  const namespace = defaultNamespaces[ns] || ns\n  return new DOMElement<State, Action, El, T>(\n    makeCreateElementNS(namespace, name),\n    attributes,\n    children.map(domChildToTemplate)\n  )\n}\n\nexport const elNS2 = <El extends Element>(namespace: string, name: string) => <State, Action, T = unknown>(\n  attributes: DOMAttributes<State, Action, El, T>,\n  ...children: DOMChild<State, Action>[]) => {\n    return new DOMElement<State, Action, El, T>(\n      makeCreateElementNS(namespace, name),\n      attributes,\n      children.map(domChildToTemplate)\n    )\n  }\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { el2 } from './element'\n\nexport const a = el2<HTMLAnchorElement>('a')\nexport const abbr = el2<HTMLElement>('abbr')\nexport const address = el2<HTMLElement>('address')\nexport const applet = el2<HTMLAppletElement>('applet')\nexport const area = el2<HTMLAreaElement>('area')\nexport const article = el2<HTMLElement>('article')\nexport const aside = el2<HTMLElement>('aside')\nexport const audio = el2<HTMLAudioElement>('audio')\nexport const b = el2<HTMLElement>('b')\nexport const base = el2<HTMLBaseElement>('base')\nexport const basefont = el2<HTMLBaseFontElement>('basefont')\nexport const bdi = el2<HTMLElement>('bdi')\nexport const bdo = el2<HTMLElement>('bdo')\nexport const blockquote = el2<HTMLQuoteElement>('blockquote')\nexport const body = el2<HTMLBodyElement>('body')\nexport const br = el2<HTMLBRElement>('br')\nexport const button = el2<HTMLButtonElement>('button')\nexport const canvas = el2<HTMLCanvasElement>('canvas')\nexport const caption = el2<HTMLTableCaptionElement>('caption')\nexport const cite = el2<HTMLElement>('cite')\nexport const code = el2<HTMLElement>('code')\nexport const col = el2<HTMLTableColElement>('col')\nexport const colgroup = el2<HTMLTableColElement>('colgroup')\nexport const data = el2<HTMLDataElement>('data')\nexport const datalist = el2<HTMLDataListElement>('datalist')\nexport const dd = el2<HTMLElement>('dd')\nexport const del = el2<HTMLModElement>('del')\nexport const details = el2<HTMLDetailsElement>('details')\nexport const dfn = el2<HTMLElement>('dfn')\nexport const dialog = el2<HTMLDialogElement>('dialog')\nexport const dir = el2<HTMLDirectoryElement>('dir')\nexport const div = el2<HTMLDivElement>('div')\nexport const dl = el2<HTMLDListElement>('dl')\nexport const dt = el2<HTMLElement>('dt')\nexport const em = el2<HTMLElement>('em')\nexport const embed = el2<HTMLEmbedElement>('embed')\nexport const fieldset = el2<HTMLFieldSetElement>('fieldset')\nexport const figcaption = el2<HTMLElement>('figcaption')\nexport const figure = el2<HTMLElement>('figure')\nexport const font = el2<HTMLFontElement>('font')\nexport const footer = el2<HTMLElement>('footer')\nexport const form = el2<HTMLFormElement>('form')\nexport const frame = el2<HTMLFrameElement>('frame')\nexport const frameset = el2<HTMLFrameSetElement>('frameset')\nexport const h1 = el2<HTMLHeadingElement>('h1')\nexport const h2 = el2<HTMLHeadingElement>('h2')\nexport const h3 = el2<HTMLHeadingElement>('h3')\nexport const h4 = el2<HTMLHeadingElement>('h4')\nexport const h5 = el2<HTMLHeadingElement>('h5')\nexport const h6 = el2<HTMLHeadingElement>('h6')\nexport const head = el2<HTMLHeadElement>('head')\nexport const header = el2<HTMLElement>('header')\nexport const hgroup = el2<HTMLElement>('hgroup')\nexport const hr = el2<HTMLHRElement>('hr')\nexport const html = el2<HTMLHtmlElement>('html')\nexport const i = el2<HTMLElement>('i')\nexport const iframe = el2<HTMLIFrameElement>('iframe')\nexport const img = el2<HTMLImageElement>('img')\nexport const input = el2<HTMLInputElement>('input')\nexport const ins = el2<HTMLModElement>('ins')\nexport const kbd = el2<HTMLElement>('kbd')\nexport const label = el2<HTMLLabelElement>('label')\nexport const legend = el2<HTMLLegendElement>('legend')\nexport const li = el2<HTMLLIElement>('li')\nexport const link = el2<HTMLLinkElement>('link')\nexport const listing = el2<HTMLPreElement>('listing')\nexport const main = el2<HTMLElement>('main')\nexport const map = el2<HTMLMapElement>('map')\nexport const mark = el2<HTMLElement>('mark')\nexport const marquee = el2<HTMLMarqueeElement>('marquee')\nexport const menu = el2<HTMLMenuElement>('menu')\nexport const meta = el2<HTMLMetaElement>('meta')\nexport const meter = el2<HTMLMeterElement>('meter')\nexport const nav = el2<HTMLElement>('nav')\nexport const noscript = el2<HTMLElement>('noscript')\nexport const object = el2<HTMLObjectElement>('object')\nexport const ol = el2<HTMLOListElement>('ol')\nexport const optgroup = el2<HTMLOptGroupElement>('optgroup')\nexport const option = el2<HTMLOptionElement>('option')\nexport const output = el2<HTMLOutputElement>('output')\nexport const p = el2<HTMLParagraphElement>('p')\nexport const param = el2<HTMLParamElement>('param')\nexport const picture = el2<HTMLPictureElement>('picture')\nexport const pre = el2<HTMLPreElement>('pre')\nexport const progress = el2<HTMLProgressElement>('progress')\nexport const q = el2<HTMLQuoteElement>('q')\nexport const rp = el2<HTMLElement>('rp')\nexport const rt = el2<HTMLElement>('rt')\nexport const ruby = el2<HTMLElement>('ruby')\nexport const s = el2<HTMLElement>('s')\nexport const samp = el2<HTMLElement>('samp')\nexport const script = el2<HTMLScriptElement>('script')\nexport const section = el2<HTMLElement>('section')\nexport const select = el2<HTMLSelectElement>('select')\nexport const slot = el2<HTMLSlotElement>('slot')\nexport const small = el2<HTMLElement>('small')\nexport const source = el2<HTMLSourceElement>('source')\nexport const span = el2<HTMLSpanElement>('span')\nexport const strong = el2<HTMLElement>('strong')\nexport const style = el2<HTMLStyleElement>('style')\nexport const sub = el2<HTMLElement>('sub')\nexport const summary = el2<HTMLElement>('summary')\nexport const sup = el2<HTMLElement>('sup')\nexport const table = el2<HTMLTableElement>('table')\nexport const tbody = el2<HTMLTableSectionElement>('tbody')\nexport const td = el2<HTMLTableDataCellElement>('td')\nexport const template = el2<HTMLTemplateElement>('template')\nexport const textarea = el2<HTMLTextAreaElement>('textarea')\nexport const tfoot = el2<HTMLTableSectionElement>('tfoot')\nexport const th = el2<HTMLTableHeaderCellElement>('th')\nexport const thead = el2<HTMLTableSectionElement>('thead')\nexport const time = el2<HTMLTimeElement>('time')\nexport const title = el2<HTMLTitleElement>('title')\nexport const tr = el2<HTMLTableRowElement>('tr')\nexport const track = el2<HTMLTrackElement>('track')\nexport const u = el2<HTMLElement>('u')\nexport const ul = el2<HTMLUListElement>('ul')\nexport const varEl = el2<HTMLElement>('var')\nexport const video = el2<HTMLVideoElement>('video')\nexport const wbr = el2<HTMLElement>('wbr')\nexport const xmp = el2<HTMLPreElement>('xmp')\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DynamicView, View } from '@tempo/core/lib/view'\nimport { DOMContext } from './context'\nimport { DOMTemplate, DOMChild } from './template'\nimport { removeNode, filterDynamics, domChildToTemplate, insertBefore } from './utils/dom'\n\nexport class DOMUntilView<OuterState, InnerState, Action> implements DynamicView<OuterState> {\n  readonly kind = 'dynamic'\n  constructor(\n    readonly ref: Node,\n    readonly repeatUntil: (state: OuterState, index: number) => InnerState | undefined,\n    readonly ctx: DOMContext<Action>,\n    readonly children: DOMTemplate<InnerState, Action>[]\n  ) {}\n\n  destroy(): void {\n    removeNode(this.ref)\n    for (const c of this.childrenView)\n      for (const e of c)\n        e.destroy()\n    this.childrenView = []\n  }\n\n  change(state: OuterState): void {\n    const currentViewLength = this.childrenView.length\n    let count = 0\n    let value: InnerState | undefined\n    while ((value = this.repeatUntil(state, count)) !== undefined) {\n      if (count < currentViewLength) {\n        // replace existing\n        for (const v of filterDynamics(this.childrenView[count])) v.change(value!)\n      } else {\n        // add node\n        this.childrenView.push(this.children.map(el => el.render(this.ctx, value!)))\n      }\n      count++\n    }\n    let i = count\n    while (i < currentViewLength) {\n      // remove extra nodes\n      for (const c of this.childrenView[i]) c.destroy()\n      i++\n    }\n    this.childrenView = this.childrenView.slice(0, count)\n  }\n\n  private childrenView: View<InnerState>[][] = []\n}\n\nexport class DOMUntilTemplate<OuterState, InnerState, Action> implements DOMTemplate<OuterState, Action> {\n  constructor(\n    readonly options: {\n      refId?: string\n      repeatUntil: (state: OuterState, index: number) => InnerState | undefined\n    },\n    readonly children: DOMTemplate<InnerState, Action>[]\n  ) {}\n\n  render(ctx: DOMContext<Action>, state: OuterState): DynamicView<OuterState> {\n    const ref = ctx.doc.createComment(this.options.refId || 'md:until')\n    ctx.append(ref)\n    const view = new DOMUntilView<OuterState, InnerState, Action>(\n      ref,\n      this.options.repeatUntil,\n      ctx.withAppend(insertBefore(ref)),\n      this.children\n    )\n    view.change(state)\n    return view\n  }\n}\n\nexport const until = <OuterState, InnerState, Action>(\n  options: {\n    refId?: string\n    repeatUntil: (state: OuterState, index: number) => InnerState | undefined\n  },\n  ...children: DOMChild<InnerState, Action>[]\n) => new DOMUntilTemplate<OuterState, InnerState, Action>(options, children.map(domChildToTemplate))\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { DOMChild } from './template'\nimport { until } from './until'\n\nexport const forEach = <State extends any[], Action>(\n  options: { refId?: string },\n  ...children: DOMChild<State[number], Action>[]\n) => until({\n  refId: options.refId || 'md:for_each',\n  repeatUntil: (state: State, index: number) => state[index]\n}, ...children)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { ul, li } from '@tempo/dom/lib/html'\nimport { forEach } from '@tempo/dom/lib/for_each'\n\nexport const list = ul<number[], unknown>({}, forEach({}, li({ attrs: { className: String } }, String)))\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { div, h1, address, article } from '@tempo/dom/lib/html'\n\nexport interface Deep {\n  id: string\n  name: string\n  address: {\n    line1: string\n    line2: string\n  }\n  paragraph: string\n}\n\nexport const deep = div<Deep, unknown>(\n  { attrs: { id: s => s.id } },\n  div(\n    {},\n    h1({}, 'Welcome ', s => s.name),\n    address(\n      {},\n      div({}, 'Address:'),\n      div({}, s => s.address.line1),\n      div({}, s => s.address.line2)\n    ),\n    article({}, s => s.paragraph)\n  )\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nexport class DOMContext<Action> {\n  static fromElement<Action>(element: Element, dispatch: (action: Action) => void): DOMContext<Action> {\n    return new DOMContext<Action>(\n      /* istanbul ignore next */\n      element.ownerDocument || (window && window.document),\n      (node: Node) => element.appendChild(node),\n      element,\n      dispatch\n    )\n  }\n\n  constructor(\n    readonly doc: Document,\n    readonly append: (node: Node) => void,\n    readonly parent: Element,\n    readonly dispatch: (action: Action) => void\n  ) {}\n\n  mapAction<OtherAction>(f: (action: OtherAction) => Action) {\n    return new DOMContext<OtherAction>(this.doc, this.append, this.parent, (action: OtherAction) =>\n      this.dispatch(f(action))\n    )\n  }\n\n  conditionalMapAction<OtherAction>(f: (action: OtherAction) => Action | undefined) {\n    return new DOMContext<OtherAction>(this.doc, this.append, this.parent, (action: OtherAction) => {\n      const newAction = f(action)\n      if (newAction !== undefined) {\n        this.dispatch(newAction)\n      }\n    })\n  }\n\n  withAppend(append: (node: Node) => void) {\n    return new DOMContext<Action>(this.doc, append, this.parent, this.dispatch)\n  }\n\n  withParent(parent: Element) {\n    return new DOMContext<Action>(this.doc, this.append, parent, this.dispatch)\n  }\n\n  withDispatch<OtherAction>(dispatch: (action: OtherAction) => void) {\n    return new DOMContext<OtherAction>(this.doc, this.append, this.parent, dispatch)\n  }\n}\n","import { div } from '@tempo/dom/lib/html'\n\nexport interface TestAttributes {\n  id: string\n  className: string\n  title: string\n}\n\nexport const attribute = div<TestAttributes, unknown>(\n  { attrs: { id: s => s.id, className: s => s.className, title: s => s.title } },\n  'content'\n)\n","import { div } from '@tempo/dom/lib/html'\n\nexport interface TestStyles {\n  backgroundColor: string\n  color: string\n  border: string\n}\n\nexport const style = div<TestStyles, unknown>(\n  { styles: { backgroundColor: s => s.backgroundColor, color: s => s.color, border: s => s.border } },\n  'content'\n)\n","import { button } from '@tempo/dom/lib/html'\n\nexport const event = button<string, string>(\n  {\n    events: {\n      click: (state: string): string => {\n        return state\n      }\n    }\n  },\n  'click me'\n)\n","import { input } from '@tempo/dom/lib/html'\n\nexport interface TestProperties {\n  value: string\n  disabled: boolean\n}\n\nexport const property = input<TestProperties, unknown>(\n  { attrs: { value: s => s.value, disabled: s => s.disabled } }\n)\n","/*\nCopyright 2019 Google LLC\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n    https://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { list } from './template/list'\nimport { deep, Deep } from './template/deep'\nimport { DOMContext } from '@tempo/dom/lib/context'\nimport { DynamicView } from '@tempo/core/lib/view'\nimport { TestAttributes, attribute } from './template/attribute'\nimport { TestStyles, style } from './template/styles'\nimport { event } from './template/events'\nimport { TestProperties, property } from './template/property'\n\nconst ctx = DOMContext.fromElement(document.getElementById('test')!, () => {})\n\nexport const renderListElements = (numbers: number[]) => {\n  list.render(ctx, numbers)\n}\n\nexport const renderListAndUpdate = (numbers: number[][]) => {\n  const view = list.render(ctx, []) as DynamicView<number[]>\n  for (const nums of numbers)\n    view.change(nums)\n}\n\nexport const renderListElementsAndDestroy = (numbers: number[]) => {\n  const view = list.render(ctx, numbers)\n  view.destroy()\n}\n\nexport const renderDeepAndUpdate = (values: Deep[]) => {\n  const view = deep.render(ctx, values[0]!) as DynamicView<Deep>\n  for (const v of values)\n    view.change(v)\n}\n\nexport const updateAttributes = (values: TestAttributes[]) => {\n  const view = attribute.render(ctx, values[0]!) as DynamicView<TestAttributes>\n  for (const v of values)\n    view.change(v)\n}\n\nexport const updateProperty = (values: TestProperties[]) => {\n  const view = property.render(ctx, values[0]!) as DynamicView<TestProperties>\n  for (const v of values)\n    view.change(v)\n}\n\nexport const updateStyles = (values: TestStyles[]) => {\n  const view = style.render(ctx, values[0]!) as DynamicView<TestStyles>\n  for (const v of values)\n    view.change(v)\n}\n\nexport const updateAndTriggerEvents = (values: string[]) => {\n  const view = event.render(ctx, values[0]!) as DynamicView<string>\n  const el = document.getElementById('test').firstElementChild! as HTMLButtonElement\n  for (const v of values) {\n    el.click()\n    view.change(v)\n  }\n}\n\nconst anyWin = window as any\nanyWin.__tests__ = {\n  renderListElements,\n  renderListAndUpdate,\n  renderListElementsAndDestroy,\n  renderDeepAndUpdate,\n  updateAttributes,\n  updateStyles,\n  updateProperty,\n  updateAndTriggerEvents\n}\n"]}